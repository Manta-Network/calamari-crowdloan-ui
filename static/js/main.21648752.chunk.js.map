{"version":3,"sources":["assets/images/calamari-logo.svg","config/index.js","types/ReferralCode.js","utils/LocalStorageValue.js","assets/icons/menu.svg","assets/icons/close-menu.svg","substrate-lib/SubstrateContext.js","substrate-lib/utils.js","components/Layouts/AccountSelectModal.js","components/Layouts/AccountSelectButton.js","components/Layouts/Navbar.js","types/Contribution.js","assets/icons/arrow-down.svg","assets/icons/arrow-up.svg","components/HomeComponents/Details/ContributionHistory.js","components/HomeComponents/Details/ReferralHistory.js","types/Calamari.js","types/Kusama.js","components/HomeComponents/Details/DetailsSummary.js","components/HomeComponents/Details/Details.js","utils/FormatPayloadForSubstrate.js","types/TxStatus.js","components/Layouts/TxStatusDisplay.js","utils/GetFailedExtrinsicError.js","utils/MakeTxResHandler.js","components/HomeComponents/Contribute.js","components/HomeComponents/Crowdloan/Graph.js","components/Table/TableColumnHeader/index.js","components/Table/TableHeaderWrapper/index.js","components/Table/TableRow/index.js","components/Table/TableRowItem/index.js","components/HomeComponents/Crowdloan/Leaderboard.js","components/HomeComponents/Crowdloan/Crowdloan.js","components/HomeComponents/ContributeActivity.js","components/Layouts/Header.js","components/Layouts/VersionTag.js","utils/GetFromAccount.js","pages/HomePage/index.js","utils/InitAxios.js","App.js","common/i18n/i18n.js","index.js"],"names":["configEnv","require","types","envVars","reduce","mem","n","undefined","process","slice","config","configCommon","ReferralCode","bytes","this","encodeAddress","SS58_FORMAT","hexStripPrefix","u8aToHex","address","decodeAddress","hexStr","length","Error","hexToU8a","hexAddPrefix","LANGUAGE_KEY","LAST_ACCOUNT_KEY","LATEST_REFERRAL_KEY","getLanguage","localStorage","getItem","getLastAccessedAccount","keyring","lastAccount","getPair","error","getLatestReferralCode","referralString","fromHexStr","setLatestReferralCode","referralCode","setItem","toString","INIT_STATE","socket","queryString","parse","window","location","search","rpc","PROVIDER_SOCKET","jsonrpc","RPC","keyringState","api","apiError","apiState","reducer","state","action","type","payload","loadAccts","SubstrateContext","React","createContext","SubstrateContextProvider","props","initState","forEach","key","useReducer","dispatch","provider","WsProvider","_api","ApiPromise","on","isReady","then","err","connect","asyncLoadAccounts","a","e","console","loadAccounts","Provider","value","children","useSubstrate","useContext","utils","paramConversion","num","AddressSelectModal","openModal","setOpenModal","acccountAddress","setAccountAddress","t","useTranslation","keyringOptions","getPairs","map","account","text","meta","name","toUpperCase","icon","Modal","size","className","open","onClose","Header","Content","option","index","onClick","classNames","active","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","shapeRendering","viewBox","height","width","d","cx","cy","r","Main","accountPair","useState","AccountSelectModal","AccountSelector","query","Navbar","accountAddress","keyringIsInit","i18n","selected","setSelected","isOpen","setIsOpen","onChangeLanguage","code","lang","langCode","changeLanguage","useEffect","onClickMyReferralCode","navigator","clipboard","writeText","APP_BASE_URL","fromAddress","toast","position","autoClose","hideProgressBar","draggable","target","rel","href","src","Logo","alt","countries","customLabels","US","CN","onSelect","MenuIcon","style","transform","overflow","CloseMenuIcon","Contribution","amountKSM","date","referral","ContributionHistoryPlaceholder","Placeholder","fluid","Paragraph","Line","ContributionHistory","userContributions","currentPageNumberUserContributions","setCurrentPageNumberUserContributions","totalPagesUserContributions","Math","max","ceil","currentPageUserContributions","dateFormatOptions","month","day","contribution","toLocaleDateString","ArrowUp","ArrowDown","ReferralHistoryPlaceholder","ReferralHistory","userReferrals","currentPageNumberUserReferrals","setCurrentPageNumberUserReferrals","totalPagesUserReferrals","currentPageUserReferrals","Calamari","amountKMA","other","add","gt","toNumber","toLocaleString","DISPLAY_OPTIONS","Decimal","maximumFractionDigits","minimumFractionDigits","Kusama","denomination","kusama","minus","min","lt","lte","ATOMIC_UNITS","amount","pow","mul","KSM","div","includeUnits","string","toNearest","ROUND_DOWN","toFixed","DetailsSummaryPlaceholder","DetailsSummary","allReferrals","allContributions","allContributors","zero","userBaseRewardsKMA","setUserBaseRewardsKMA","userBonusRewardsKMA","setUserBonusRewardsKMA","userGaveReferralRewardsKMA","setUserGaveReferralRewardsKMA","userWasReferredRewards","setUserWasReferredRewards","userTotalRewardsKMA","setUserTotalRewardKMA","userTotalContributionsKSM","setUserTotalContributionsKSM","acc","curr","getUserTotalContributionsKSM","userBaseRewards","toKMABaseReward","getUserBaseRewardsKMA","EARLY_BONUS_TIER_1_CUTOFF","includes","toKMABonusRewardTier1","EARLY_BONUS_TIER_2_CUTOFF","toKMABonusRewardTier2","toKMAGaveReferralReward","toKMAWasReferredReward","CreateAccountPrompt","InstallPJSPrompt","Details","setUserReferrals","referredByUser","Object","entries","referred","push","sort","b","getUserReferrals","isNumType","some","el","indexOf","FINALIZED","FAILED","PROCESSING","TxStatus","status","block","message","batchNum","totalBatches","txStatusMesage","txStatus","transactionType","isProcessing","isFinalized","isFailed","textAlign","overflowWrap","flexGrow","Loader","inline","inverted","BLOCK_EXPLORER_URL","getFailedExtrinsicError","events","errorMessage","filter","event","system","ExtrinsicFailed","is","utility","BatchInterrupted","data","isModule","decoded","registry","findMetaError","asModule","documentation","method","section","join","makeTxResHandler","onSuccess","onFailure","onUpdate","isInBlock","asInBlock","asFinalized","log","CrowdloanFinishedNote","Contribute","fromAccount","accountBalanceKSM","urlReferralCode","totalContributionsKSM","contributionStatus","setContributionStatus","contributeAmountInput","setContributeAmountInput","referralCodeInput","setReferralCodeInput","setReferralCode","referralCodeInvalid","setReferralCodeInvalid","userReferredSelf","setUserReferredSelf","contributeAmountKSM","getContributeAmounKSM","contributeAmountAtomicUnits","toAtomicUnits","earlyBonus","referralBonus","previousReferral","getReferalBonus","baseReward","totalReward","onContributeSuccess","finalized","onContributeFailure","failed","onContributeUpdate","processing","buildReferralTx","memo","createType","tx","crowdloan","addMemo","PARA_ID","toHex","userMaxContributionKSM","estimatedFeeAmount","DEFENSIVE_FEE_ESTIMATE_KSM","getUserMaxContributionKSM","crowdloanRemainingFundsKSM","CROWDLOAN_KSM_TARGET","maxContributionKSM","buildContributeTx","contribute","opts","emptyAsNull","paramFields","Array","paramVal","inputParam","trim","field","ind","converted","split","single","Number","parseFloat","parseInt","formatPayloadForSubstrate","BN","toAddress","handleReferralCodeInputChange","onChangeReferralCodeInput","startsWith","replace","useMemo","latestReferral","setReferralCodeFromHistory","amountLabel","formIsDisabled","referralCodeInputIsDisabled","exceedsTarget","insufficientFunds","belowMinContribution","MIN_CONTRIBUTION","crowdloanIsFinished","STAGE_2_TARGET_KSM","onClickClaimButton","txResHandler","contributeTx","referralTx","transactions","batch","signAndSend","Input","onChange","input","isNaN","disabled","toUnformattedString","GraphPlaceholder","Graph","contributionsByDay","setContributionsByDay","CROWDLOAN_START_DATE","Date","CROWDLOAN_START_TIMESTAMP","MS_PER_DAY","msIntoCrowdloan","daysIntoCrowdloan","keys","i","getTime","totalContributions","dayIdx","currentDate","contributionsZerothDay","getContributionsByDay","_","cur","graphData","labels","singleDayContributions","datasets","label","borderColor","backgroundColor","yAxisID","borderWidth","options","animation","responsive","interaction","mode","intersect","stacked","plugins","legend","display","scales","y","elements","point","radius","hoverRadius","TableColumnHeader","TableHeaderWrapper","TableRow","highlight","TableRowItem","onTableRow","LeaderboardPlaceholder","Leaderboard","topThreeContributors","contributionsByAddress","addressCurrentContribution","first","second","getTopThreeContributors","val","ADDRESS_BLOCK_EXPLORER_URL","textOverflow","Crowdloan","totalBaseRewardsKMA","setTotalBaseRewardsKMA","totalBonusRewardsKMA","setTotalBonusRewardsKMA","totalReferralRewardsKMA","setTotalReferralRewardsKMA","totalRewardsKMA","setTotalRewardsKMA","giveReferralReward","receiveReferralReward","referralReward","ContributeActivityPlaceholder","TableRowData","contributionReward","referralCount","ContributeActivity","totalPages","setTotalPages","pageNumber","setPageNumber","contributions","setContributions","contributionRewards","setContributionRewards","referralCounts","setReferralCounts","referralRewards","setReferralRewards","axios","post","fund_id","FUND_ID","row","page","order","from_history","res","count","rawContributions","contributes","rawContribution","contributing","toKSM","isHex","block_timestamp","who","getContributions","bonusReward","referralsByContribution","currentPageContribution","someContribution","referredTransactions","transaction","self","getReferralCountsAndRewards","Pagination","boundaryRange","defaultActivePage","siblingRange","onPageChange","activePage","color","padding","zIndex","marginBottom","VersionTag","float","GIT_HASH","getFromAccount","source","isInjected","web3FromSource","injected","fromAcct","setSigner","signer","defaults","baseURL","SUBSCAN_URL","headers","SUBSCAN_API_KEY","axiosRetry","retries","retryDelay","retryCondition","response","URLSearchParams","useLocation","get","setFromAccount","setAccountBalanceKSM","setUserContributions","hasLoggedVersion","setHasLoggedVersion","waitingForKeyring","setWaitingForKeyring","setKeyringIsInit","setTotalContributionsKSM","setAllReferrals","setAllContributions","setAllContributors","polkadotJsIsInjected","injectedWeb3","initKeyring","web3Enable","APP_NAME","web3Accounts","allAccounts","loadAll","ss58Format","isDevelopment","timer","setInterval","clearInterval","initKeyringWhenInjected","defaultAccount","setDefaultAccount","isConnected","loadFromAccount","balance","rawBalance","free","unsub","unsubscribe","catch","getAccountBalance","getAllContributors","pageIdx","currentContribution","getAllContributionsAndReferrals","getUserContributions","funds","raised","getTotalContributionsKSM","Grid","centered","columns","padded","Column","Message","negative","compact","floating","header","content","JSON","stringify","Dimmer","paddingTop","Row","HomePage","App","path","component","resources","en","translation","translationEN","cn","translationCN","use","detector","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.21648752.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/calamari-logo.fecd29f4.svg\";","import configCommon from './common.json';\n// Using `require` as `import` does not support dynamic loading (yet).\nconst configEnv = require(`./${process.env.NODE_ENV}.json`);\nconst types = require('./types.json');\n\n// Accepting React env vars and aggregating them into `config` object.\nconst envVarNames = [\n  'REACT_APP_PROVIDER_SOCKET',\n  'REACT_APP_DEVELOPMENT_KEYRING'\n];\nconst envVars = envVarNames.reduce((mem, n) => {\n  // Remove the `REACT_APP_` prefix\n  if (process.env[n] !== undefined) mem[n.slice(10)] = process.env[n];\n  return mem;\n}, {});\n\nconst config = { ...configCommon, ...configEnv, ...envVars, types };\nexport default config;\n","import { encodeAddress, decodeAddress } from '@polkadot/util-crypto';\nimport { hexToU8a, u8aToHex, hexAddPrefix, hexStripPrefix } from '@polkadot/util';\nimport config from 'config';\n\nexport default class ReferralCode {\n  constructor (bytes) {\n    this.bytes = bytes;\n  }\n\n  static fromAddress (address) {\n    return new ReferralCode(decodeAddress(address));\n  }\n\n  static fromHexStr (hexStr) {\n    if (hexStr.length !== 64) {\n      throw Error('Invalid referral code');\n    }\n    return new ReferralCode(hexToU8a(hexAddPrefix(hexStr)));\n  }\n\n  toAddress () {\n    return encodeAddress(this.bytes, config.SS58_FORMAT);\n  }\n\n  toString () {\n    return hexStripPrefix(u8aToHex(this.bytes));\n  }\n}\n","import ReferralCode from 'types/ReferralCode';\n\nconst LANGUAGE_KEY = 'lang';\nconst LAST_ACCOUNT_KEY = 'lastAccount';\nconst LATEST_REFERRAL_KEY = 'lastestReferral';\n\nexport const getLanguage = () => {\n  return localStorage.getItem(LANGUAGE_KEY) ?? 'en';\n};\n\nexport const setLanguage = (lang) => {\n  localStorage.setItem(LANGUAGE_KEY, lang);\n};\n\nexport const getLastAccessedAccount = (keyring) => {\n  const lastAccount = localStorage.getItem(LAST_ACCOUNT_KEY);\n  if (!lastAccount) {\n    return null;\n  }\n  // Validate that account is still in user's keychain\n  try {\n    keyring.getPair(lastAccount);\n    return lastAccount;\n  } catch (error) {\n    return null;\n  }\n};\n\nexport const setLastAccessedAccount = (lastAccount) => {\n  localStorage.setItem(LAST_ACCOUNT_KEY, lastAccount);\n};\n\nexport const getLatestReferralCode = (address) => {\n  const referralString =\n    localStorage.getItem(`${LATEST_REFERRAL_KEY}_${address}`) ?? null;\n  return referralString ? ReferralCode.fromHexStr(referralString) : null;\n};\n\nexport const setLatestReferralCode = (referralCode, address) => {\n  localStorage.setItem(\n    `${LATEST_REFERRAL_KEY}_${address}`,\n    referralCode.toString(),\n  );\n};\n","export default __webpack_public_path__ + \"static/media/menu.71929dc3.svg\";","export default __webpack_public_path__ + \"static/media/close-menu.94c95cb6.svg\";","import React, { useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport jsonrpc from '@polkadot/types/interfaces/jsonrpc';\nimport queryString from 'query-string';\n\nimport { ApiPromise, WsProvider } from '@polkadot/api';\nimport keyring from '@polkadot/ui-keyring';\n\nimport config from '../config';\n\nconst parsedQuery = queryString.parse(window.location.search);\nconst connectedSocket = parsedQuery.rpc || config.PROVIDER_SOCKET;\n\n// Initial state for `useReducer`\nconst INIT_STATE = {\n  socket: connectedSocket,\n  jsonrpc: { ...jsonrpc, ...config.RPC },\n  types: config.types,\n  keyring: null,\n  keyringState: null,\n  api: null,\n  apiError: null,\n  apiState: null\n};\n\n///\n// Reducer function for `useReducer`\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n  case 'CONNECT_INIT':\n    return { ...state, apiState: 'CONNECT_INIT' };\n\n  case 'CONNECT':\n    return { ...state, api: action.payload, apiState: 'CONNECTING' };\n\n  case 'CONNECT_SUCCESS':\n    return { ...state, apiState: 'READY' };\n\n  case 'CONNECT_ERROR':\n    return { ...state, apiState: 'ERROR', apiError: action.payload };\n\n  case 'LOAD_KEYRING':\n    return { ...state, keyringState: 'LOADING' };\n\n  case 'SET_KEYRING':\n    return { ...state, keyring: action.payload, keyringState: 'READY' };\n\n  case 'KEYRING_ERROR':\n    return { ...state, keyring: null, keyringState: 'ERROR' };\n\n  default:\n    throw new Error(`Unknown type: ${action.type}`);\n  }\n};\n\n///\n// Connecting to the Substrate node\n\nconst connect = (state, dispatch) => {\n  const { apiState, socket, jsonrpc, types } = state;\n  // We only want this function to be performed once\n  if (apiState) return;\n\n  dispatch({ type: 'CONNECT_INIT' });\n\n  const provider = new WsProvider(socket);\n  const _api = new ApiPromise({ provider, types, rpc: jsonrpc });\n\n  // Set listeners for disconnection and reconnection event.\n  _api.on('connected', () => {\n    dispatch({ type: 'CONNECT', payload: _api });\n    // `ready` event is not emitted upon reconnection and is checked explicitly here.\n    _api.isReady.then(() => dispatch({ type: 'CONNECT_SUCCESS' }));\n  });\n  _api.on('ready', () => dispatch({ type: 'CONNECT_SUCCESS' }));\n  _api.on('error', err => dispatch({ type: 'CONNECT_ERROR', payload: err }));\n};\n\n///\n// Loading accounts from dev and polkadot-js extension\n\nlet loadAccts = false;\nconst loadAccounts = (state, dispatch) => {\n  const asyncLoadAccounts = async () => {\n    dispatch({ type: 'LOAD_KEYRING' });\n    try {\n      dispatch({ type: 'SET_KEYRING', payload: keyring });\n    } catch (e) {\n      console.error(e);\n      dispatch({ type: 'KEYRING_ERROR' });\n    }\n  };\n\n  const { keyringState } = state;\n  // If `keyringState` is not null `asyncLoadAccounts` is running.\n  if (keyringState) return;\n  // If `loadAccts` is true, the `asyncLoadAccounts` has been run once.\n  if (loadAccts) return dispatch({ type: 'SET_KEYRING', payload: keyring });\n\n  // This is the heavy duty work\n  loadAccts = true;\n  asyncLoadAccounts();\n};\n\nconst SubstrateContext = React.createContext();\n\nconst SubstrateContextProvider = (props) => {\n  // filtering props and merge with default param value\n  const initState = { ...INIT_STATE };\n  const neededPropNames = ['socket', 'types'];\n  neededPropNames.forEach(key => {\n    initState[key] = (typeof props[key] === 'undefined' ? initState[key] : props[key]);\n  });\n\n  const [state, dispatch] = useReducer(reducer, initState);\n  connect(state, dispatch);\n  loadAccounts(state, dispatch);\n\n  return <SubstrateContext.Provider value={state}>\n    {props.children}\n  </SubstrateContext.Provider>;\n};\n\n\nSubstrateContextProvider.propTypes = {\n  socket: PropTypes.string,\n  types: PropTypes.object,\n  children: PropTypes.any\n};\n\nconst useSubstrate = () => ({ ...useContext(SubstrateContext) });\n\nexport { SubstrateContextProvider, useSubstrate };\n","const utils = {\n  paramConversion: {\n    num: [\n      'Compact<Balance>',\n      'BalanceOf',\n      'u8', 'u16', 'u32', 'u64', 'u128',\n      'i8', 'i16', 'i32', 'i64', 'i128'\n    ]\n  }\n};\n\nexport default utils;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Modal } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport { useSubstrate } from 'substrate-lib';\nimport { setLastAccessedAccount } from '../../utils/LocalStorageValue';\n\nfunction AddressSelectModal ({ openModal, setOpenModal, acccountAddress, setAccountAddress }) {\n  const { keyring } = useSubstrate();\n  const { t } = useTranslation();\n  // Get the list of accounts we possess the private key for\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n\n  return (\n    <Modal\n      size=\"small\"\n      className=\"address-modal\"\n      open={openModal}\n      onClose={() => setOpenModal(!openModal)}>\n      <Modal.Header className=\"py-2\">\n        <div className=\"text-2xl calamari-text text-center font-semibold\">\n          {t('Select an account')}\n        </div>\n      </Modal.Header>\n      <Modal.Content>\n        <div className=\"px-24\">\n          {keyringOptions?.map((option, index) => (\n            <div\n              onClick={() => {\n                setAccountAddress(option.value);\n                setLastAccessedAccount(option.value);\n                setOpenModal(false);\n              }}\n              className={classNames(\n                'border cursor-pointer px-8 mb-4 account rounded-md',\n                {\n                  active:\n                        acccountAddress &&\n                        acccountAddress === option.value\n                }\n              )}\n              key={index}>\n              <div className=\"flex calamari-text items-center content\">\n                <svg\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth=\"1.5\"\n                  shapeRendering=\"geometricPrecision\"\n                  viewBox=\"0 0 24 24\"\n                  height=\"24\"\n                  width=\"24\">\n                  <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n                  <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n                </svg>\n                <div className=\"px-4 py-1\">\n                  <p className=\"mb-1 account-name font-semibold calamari-text\">\n                    {option.text}\n                  </p>\n                  <span className=\"purple-text account-address\">\n                    {option.value}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </Modal.Content>\n    </Modal>\n  );\n}\n\nAddressSelectModal.propTypes = {\n  openModal: PropTypes.bool,\n  setOpenModal: PropTypes.func,\n  acccountAddress: PropTypes.string,\n  setAccountAddress: PropTypes.func\n};\n\nexport default AddressSelectModal;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { useSubstrate } from '../../substrate-lib';\nimport AccountSelectModal from './AccountSelectModal';\n\nfunction Main ({ accountPair, setAccountAddress }) {\n  const { t } = useTranslation();\n  const [openModal, setOpenModal] = useState(false);\n  return (\n    <>\n      <div\n        onClick={() => setOpenModal(true)}\n        className=\"menu-item text-base btn lg:text-xl py-3 lg:ml-6 lg:py-4 px-4 lg:px-8 xl:px-12 btn\">\n        {accountPair\n          ? (\n            <div className=\"flex px-3 items-center\">\n              <svg\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth=\"1.5\"\n                shapeRendering=\"geometricPrecision\"\n                viewBox=\"0 0 24 24\"\n                height=\"24\"\n                width=\"24\">\n                <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n                <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n              </svg>\n              <span className=\"pl-4\">{accountPair && accountPair.meta.name.toUpperCase()}</span>\n            </div>\n          )\n          : (\n            t('Connect wallet')\n          )}\n      </div>\n      {\n        openModal &&\n      <AccountSelectModal\n        openModal={openModal}\n        setOpenModal={setOpenModal}\n        setAccountAddress={setAccountAddress}\n        accountPair={accountPair}\n      />\n      }\n    </>\n\n  );\n}\n\nMain.propTypes = {\n  accountPair: PropTypes.object, setAccountAddress: PropTypes.func\n};\n\nexport default function AccountSelector (props) {\n  const { api, keyring } = useSubstrate();\n  return keyring?.getPairs && api.query ? <Main {...props} /> : null;\n}\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from 'assets/images/calamari-logo.svg';\nimport { useTranslation } from 'react-i18next';\nimport ReactFlagsSelect from 'react-flags-select';\nimport { setLanguage, getLanguage } from 'utils/LocalStorageValue';\nimport 'react-toastify/dist/ReactToastify.css';\nimport MenuIcon from 'assets/icons/menu.svg';\nimport CloseMenuIcon from 'assets/icons/close-menu.svg';\nimport { toast, ToastContainer } from 'react-toastify';\nimport ReferralCode from 'types/ReferralCode';\nimport config from 'config';\nimport AccountSelectButton from './AccountSelectButton';\n\nfunction Navbar ({\n  setAccountAddress,\n  accountAddress,\n  accountPair,\n  keyringIsInit\n}) {\n  const { t, i18n } = useTranslation();\n  const [selected, setSelected] = useState('US');\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onChangeLanguage = (code) => {\n    setSelected(code);\n    const langCode = code === 'US' ? 'en' : 'cn';\n    i18n.changeLanguage(langCode);\n    setLanguage(langCode);\n  };\n\n  useEffect(() => {\n    setSelected(getLanguage() === 'en' ? 'US' : 'CN');\n  }, []);\n\n  const onClickMyReferralCode = () => {\n    if (accountAddress) {\n      navigator.clipboard.writeText(`${config.APP_BASE_URL}?referral=${ReferralCode.fromAddress(accountAddress).toString()}`);\n      toast(t('Copied to clipboard'), {\n        position: 'top-right',\n        autoClose: 2000,\n        hideProgressBar: true,\n        draggable: true\n      });\n    }\n  };\n\n  return (\n    <div className=\"navbar-content\">\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://calamari.manta.network\">\n        <div className=\"logo-content\">\n          <img src={Logo} alt=\"logo\" />\n        </div>\n      </a>\n      <ToastContainer />\n      <div className=\"navbar-menu\">\n        <div className=\"hidden lg:flex\">\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://mantanetwork.medium.com/the-calamari-crowdloan-on-kusama-74a3cb2a2a4b\">\n            <div className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 lg:px-6 xl:px-9\">\n              {t('How it works')}\n            </div>\n          </a>\n          {keyringIsInit && (\n            <div\n              onClick={onClickMyReferralCode}\n              className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 cursor-pointer lg:px-6 xl:px-9\">\n              {t('My referral link')}\n            </div>\n          )}\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.com/invite/5khsf6QmCb\">\n            <div className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 lg:px-6 xl:px-9\">\n              {t('Support')}\n            </div>\n          </a>\n        </div>\n        <div className=\"hidden lg:block\">\n          <ReactFlagsSelect\n            selected={selected}\n            countries={['US', 'CN']}\n            customLabels={{ US: 'EN', CN: 'CN' }}\n            onSelect={(code) => onChangeLanguage(code)}\n          />\n        </div>\n        {keyringIsInit && (\n          <div className=\"hidden lg:block\">\n            <AccountSelectButton\n              setAccountAddress={setAccountAddress}\n              accountPair={accountPair}\n            />\n          </div>\n        )}\n        <div className=\"lg:hidden flex items-center\">\n          <img\n            src={MenuIcon}\n            onClick={() => setIsOpen(!isOpen)}\n            className=\"cursor-pointer w-10\"\n            alt=\"menu-icon\"\n          />\n        </div>\n        <div\n          style={{ transform: isOpen && 'none', overflow: isOpen && 'visible' }}\n          className=\"nav-menu-mobile\">\n          <div>\n            {isOpen && (\n              <>\n                <span onClick={() => setIsOpen(false)} className=\"close-icon\">\n                  <img src={CloseMenuIcon} alt=\"close-menu-icon\" />\n                </span>\n                <div className=\"px-8 py-4\">\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://mantanetwork.medium.com/the-calamari-crowdloan-on-kusama-74a3cb2a2a4b\">\n                    <div className=\"menu-item text-base py-2\">\n                      {t('How it works')}\n                    </div>\n                  </a>\n                  <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.com/invite/5khsf6QmCb\">\n                    <div className=\"menu-item text-base py-2\">\n                      {t('Support')}\n                    </div>\n                  </a>\n                  {keyringIsInit && (\n                    <div\n                      onClick={onClickMyReferralCode}\n                      className=\"menu-item text-base py-3 mb-2 cursor-pointer\">\n                      {t('My referral link')}\n                    </div>\n                  )}\n                  <ReactFlagsSelect\n                    className=\"w-2/5 mb-4\"\n                    selected={selected}\n                    countries={['US', 'CN']}\n                    customLabels={{ US: 'EN', CN: 'CN' }}\n                    onSelect={(code) => onChangeLanguage(code)}\n                  />\n                  {keyringIsInit && (\n                    <AccountSelectButton\n                      setAccountAddress={setAccountAddress}\n                      accountPair={accountPair}\n                    />\n                  )}\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n      {isOpen && (\n        <div\n          onClick={() => setIsOpen(false)}\n          className=\"navbar-mobile-overlay\"></div>\n      )}\n    </div>\n  );\n}\n\nNavbar.propTypes = {\n  setAccountAddress: PropTypes.func,\n  accountAddress: PropTypes.string,\n  accountPair: PropTypes.object,\n  keyringIsInit: PropTypes.bool\n};\n\nexport default Navbar;\n","class Contribution {\n  constructor (amountKSM, date, address, referral = null) {\n    this.amountKSM = amountKSM;\n    this.date = date;\n    this.address = address;\n    this.referral = referral;\n  }\n}\n\nexport default Contribution;\n","export default __webpack_public_path__ + \"static/media/arrow-down.d80e70fa.svg\";","export default __webpack_public_path__ + \"static/media/arrow-up.716601cb.svg\";","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Contribution from 'types/Contribution';\n\nconst ContributionHistoryPlaceholder = () => {\n  return (\n    <div className=\"py-12\">\n      <Placeholder fluid>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n      </Placeholder>\n    </div>\n  );\n};\n\nconst ContributionHistory = ({ userContributions }) => {\n  const { t } = useTranslation();\n  const PAGE_SIZE = 5;\n  const [currentPageNumberUserContributions, setCurrentPageNumberUserContributions] = useState(1);\n  const totalPagesUserContributions = userContributions && Math.max(Math.ceil(userContributions.length / 5, 1), 1);\n  const currentPageUserContributions = userContributions && userContributions.slice((currentPageNumberUserContributions - 1) * PAGE_SIZE, currentPageNumberUserContributions * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n\n  if (!userContributions) {\n    return <ContributionHistoryPlaceholder />;\n  }\n  return (\n    <>\n      <div className=\"flex justify-between pt-6\">\n        <p className=\"mb-1\">{t('Contribution history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserContributions} of {totalPagesUserContributions}</span>\n      </div>\n      <div>\n        <div className=\"artibute border-2 py-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          {currentPageUserContributions.map((contribution, index) => (\n            <div\n              key={index}\n              className={classNames(\n                'flex text-lg justify-between pl-6 pr-10 py-2',\n                { 'bg-gray': index % 2 }\n              )}>\n              <span>{contribution.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n              <span className=\"font-semibold\">{contribution.amountKSM.toString()}</span>\n            </div>\n          ))}\n          <img\n            src={ArrowUp}\n            onClick={() =>\n              currentPageNumberUserContributions > 1 && setCurrentPageNumberUserContributions(currentPageNumberUserContributions - 1)\n            }\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n          />\n          <img\n            src={ArrowDown}\n            onClick={() =>\n              currentPageNumberUserContributions < totalPagesUserContributions && setCurrentPageNumberUserContributions(currentPageNumberUserContributions + 1)\n            }\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nContributionHistory.propTypes = {\n  userContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution))\n};\n\nexport default ContributionHistory;\n","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport Contribution from 'types/Contribution';\n\nconst ReferralHistoryPlaceholder = () => {\n  return (\n    <div className=\"py-12\">\n      <Placeholder fluid>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n      </Placeholder>\n    </div>\n  );\n};\n\nconst ReferralHistory = ({ userReferrals }) => {\n  const [currentPageNumberUserReferrals, setCurrentPageNumberUserReferrals] = useState(1);\n\n  const PAGE_SIZE = 5;\n  const totalPagesUserReferrals = Math.max(Math.ceil(userReferrals?.length / 5, 1), 1);\n  const currentPageUserReferrals = userReferrals?.slice((currentPageNumberUserReferrals - 1) * PAGE_SIZE, currentPageNumberUserReferrals * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const { t } = useTranslation();\n\n  if (!userReferrals) {\n    return <ReferralHistoryPlaceholder />;\n  }\n  return (\n    <>\n      <div className=\"flex justify-between pt-10\">\n        <p className=\"mb-1\">{t('Referral history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserReferrals} of {totalPagesUserReferrals}</span>\n      </div>\n      <div>\n        <div className=\"artibute border-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          <div className='pt-2'>\n            {currentPageUserReferrals.map((referral, index) => (\n\n              <div\n                key={index}\n                className={classNames(\n                  'flex text-lg justify-between pl-6 pr-10 py-2',\n                  { 'bg-gray': index % 2 }\n                )}>\n                <span>{referral.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n                <span className=\"font-semibold\">{referral.amountKSM.toString()}</span>\n              </div>\n            ))\n            }\n          </div>\n          <img\n            src={ArrowDown}\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals < totalPagesUserReferrals && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals + 1)\n            }\n          />\n          <img\n            src={ArrowUp}\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals > 1 && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals - 1)\n            }\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nReferralHistory.propTypes = {\n  userReferrals:  PropTypes.arrayOf(PropTypes.instanceOf(Contribution))\n};\n\nexport default ReferralHistory;\n","import Decimal from 'decimal.js';\n\nexport default class Calamari {\n    static DISPLAY_OPTIONS = { maximumFractionDigits: 0, minimumFractionDigits: 0 };\n\n    constructor (amountKMA) {\n      this.amountKMA = amountKMA;\n    }\n\n    static zero () {\n      return new Calamari(new Decimal(0));\n    }\n\n    add (other) {\n      return new Calamari(this.amountKMA.add(other.amountKMA));\n    }\n\n    gt (other) {\n      return this.amountKMA.gt(other.amountKMA);\n    }\n\n    toString () {\n      return this.amountKMA.toNumber().toLocaleString(undefined, Calamari.DISPLAY_OPTIONS) + ' KMA';\n    }\n}\n","import Decimal from 'decimal.js';\nimport Calamari from './Calamari';\n\nconst KUSAMA_CHAIN_DECIMALS = 12;\n\nfunction kusamaToAtomicUnits(amount) {\n  return new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)).mul(amount);\n}\n\nfunction atomicUnitsToKSM(amount) {\n  return amount.div(new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)));\n}\n\nclass Kusama {\n  static ATOMIC_UNITS = 'atomic units';\n  static KSM = 'KSM';\n  static DISPLAY_OPTIONS = {\n    maximumFractionDigits: 1,\n    minimumFractionDigits: 0,\n  };\n\n  constructor(denomination, value) {\n    this.denomination = denomination;\n    this.value = value;\n  }\n\n  static zero() {\n    return new Kusama(Kusama.KSM, new Decimal(0));\n  }\n\n  minus(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot subtrract; denominations do not match');\n    } else {\n      return new Kusama(this.denomination, this.value.minus(kusama.value));\n    }\n  }\n\n  add(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot add; denominations do not match');\n    } else {\n      return new Kusama(this.denomination, this.value.add(kusama.value));\n    }\n  }\n\n  min(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot get min; denominations do not match');\n    } else {\n      return new Kusama(\n        this.denomination,\n        Decimal.min(this.value, kusama.value),\n      );\n    }\n  }\n\n  max(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot get max; denominations do not match');\n    } else {\n      return new Kusama(\n        this.denomination,\n        Decimal.max(this.value, kusama.value),\n      );\n    }\n  }\n\n  gt(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot get max; denominations do not match');\n    } else {\n      return this.value.gt(kusama.value);\n    }\n  }\n\n  lt(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot get max; denominations do not match');\n    } else {\n      return this.value.lt(kusama.value);\n    }\n  }\n\n  lte(kusama) {\n    if (this.denomination !== kusama.denomination) {\n      throw Error('Cannot get max; denominations do not match');\n    } else {\n      return this.value.lte(kusama.value);\n    }\n  }\n\n  toAtomicUnits() {\n    if (this.denomination === Kusama.ATOMIC_UNITS) {\n      throw Error('Cannot convert atomic units to atomic units');\n    }\n    return new Kusama(Kusama.ATOMIC_UNITS, kusamaToAtomicUnits(this.value));\n  }\n\n  toKSM() {\n    if (this.denomination === Kusama.KSM) {\n      throw Error('Cannot convert KSM to KSM');\n    }\n    return new Kusama(Kusama.KSM, atomicUnitsToKSM(this.value));\n  }\n\n  toKMABaseReward() {\n    if (this.denomination !== Kusama.KSM) {\n      throw Error('Cannot calculate reward from atomic units');\n    }\n    return new Calamari(this.value.mul(10000));\n  }\n\n  toKMABonusRewardTier1() {\n    if (this.denomination !== Kusama.KSM) {\n      throw Error('Cannot calculate reward from atomic units');\n    }\n    return new Calamari(this.value.mul(1000));\n  }\n\n  toKMABonusRewardTier2() {\n    if (this.denomination !== Kusama.KSM) {\n      throw Error('Cannot calculate reward from atomic units');\n    }\n    return new Calamari(this.value.mul(500));\n  }\n\n  toKMAGaveReferralReward() {\n    if (this.denomination !== Kusama.KSM) {\n      throw Error('Cannot calculate reward from atomic units');\n    }\n    return new Calamari(this.value.mul(250));\n  }\n\n  toKMAWasReferredReward() {\n    if (this.denomination !== Kusama.KSM) {\n      throw Error('Cannot calculate reward from atomic units');\n    }\n    return new Calamari(this.value.mul(250));\n  }\n\n  toString(includeUnits = true) {\n    if (this.denomination === Kusama.ATOMIC_UNITS) {\n      return this.value\n        .toNumber()\n        .toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n    } else if (this.denomination === Kusama.KSM) {\n      let string = this.value\n        .toNearest(0.1, Decimal.ROUND_DOWN)\n        .toNumber()\n        .toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n      if (includeUnits) {\n        string = string + ' KSM';\n      }\n      return string;\n    }\n  }\n\n  toUnformattedString() {\n    if (this.denomination === Kusama.ATOMIC_UNITS) {\n      return this.value.toNearest(1, Decimal.ROUND_DOWN).toNumber().toFixed(0);\n    } else if (this.denomination === Kusama.KSM) {\n      return this.value\n        .toNearest(0.01, Decimal.ROUND_DOWN)\n        .toNumber()\n        .toFixed(2);\n    }\n  }\n}\n\nexport default Kusama;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport Kusama from 'types/Kusama';\nimport config from 'config';\nimport Calamari from 'types/Calamari';\nimport { Placeholder } from 'semantic-ui-react';\nimport Contribution from 'types/Contribution';\n\nconst DetailsSummaryPlaceholder = () => {\n  return (\n    <div className=\"py-2\">\n      <Placeholder fluid>\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder>\n    </div>\n  );\n};\n\nconst DetailsSummary = ({\n  userReferrals = [],\n  allReferrals,\n  userContributions,\n  allContributions,\n  accountAddress,\n  allContributors\n}) => {\n  const [userBaseRewardsKMA, setUserBaseRewardsKMA] = useState(Calamari.zero());\n  const [userBonusRewardsKMA, setUserBonusRewardsKMA] = useState(Calamari.zero());\n  const [userGaveReferralRewardsKMA, setUserGaveReferralRewardsKMA] = useState(Calamari.zero());\n  const [userWasReferredRewards, setUserWasReferredRewards] = useState(Calamari.zero());\n  const [userTotalRewardsKMA, setUserTotalRewardKMA] = useState(Calamari.zero());\n  const [userTotalContributionsKSM, setUserTotalContributionsKSM] = useState(Kusama.zero());\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getUserTotalContributionsKSM = () => {\n      if (!userContributions) {\n        return Calamari.zero();\n      }\n      const userTotalContributionsKSM = userContributions.reduce((acc, curr) => acc.add(curr.amountKSM), Kusama.zero());\n      setUserTotalContributionsKSM(userTotalContributionsKSM);\n    };\n    getUserTotalContributionsKSM();\n  }, [userContributions]);\n\n  useEffect(() => {\n    const getUserBaseRewardsKMA = () => {\n      if (!userTotalContributionsKSM) {\n        return Calamari.zero();\n      }\n      const userBaseRewards = userTotalContributionsKSM.toKMABaseReward();\n      setUserBaseRewardsKMA(userBaseRewards);\n    };\n    getUserBaseRewardsKMA();\n  }, [userTotalContributionsKSM]);\n\n  useEffect(() => {\n    const getUserBonusRewardsKMA = () => {\n      if (!allContributions) {\n        return Calamari.zero();\n      } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(accountAddress)) {\n        return userContributions.reduce((acc, curr) => acc.add(curr.amountKSM.toKMABonusRewardTier1()), Calamari.zero());\n      } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(accountAddress)) {\n        return userContributions.reduce((acc, curr) => acc.add(curr.amountKSM.toKMABonusRewardTier2()), Calamari.zero());\n      } else {\n        return Calamari.zero();\n      }\n    };\n    setUserBonusRewardsKMA(getUserBonusRewardsKMA());\n  }, [allContributions, allContributors, accountAddress, userContributions]);\n\n  useEffect(() => {\n    const getUserGaveReferralRewards = () => {\n      if (!userReferrals) {\n        return Calamari.zero();\n      }\n      return userReferrals.reduce((acc, curr) => acc.add(curr.amountKSM.toKMAGaveReferralReward()), Calamari.zero());\n    };\n    setUserGaveReferralRewardsKMA(getUserGaveReferralRewards());\n  }, [userReferrals]);\n\n  useEffect(() => {\n    const getUserWasReferredRewards = () => {\n      if (!allReferrals || !accountAddress || !userTotalContributionsKSM) {\n        return Calamari.zero();\n      } else if (allReferrals[accountAddress]) {\n        return userTotalContributionsKSM.toKMAWasReferredReward();\n      } else {\n        return Calamari.zero();\n      }\n    };\n    setUserWasReferredRewards(getUserWasReferredRewards());\n  }, [allReferrals, accountAddress, userTotalContributionsKSM]);\n\n  useEffect(() => {\n    const getUserTotalRewardsKMA = () => {\n      return userBaseRewardsKMA.add(userBonusRewardsKMA.add(userGaveReferralRewardsKMA.add(userWasReferredRewards)));\n    };\n    setUserTotalRewardKMA(getUserTotalRewardsKMA());\n  }, [userBaseRewardsKMA, userBonusRewardsKMA, userGaveReferralRewardsKMA, userWasReferredRewards]);\n\n  if (!userContributions || !allContributions) {\n    return <DetailsSummaryPlaceholder />;\n  }\n  return (\n    <div className=\"flex\">\n      <div className=\"w-3/5\">\n        <p className=\"mb-0 pb-5\">{t('Total contributions ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalContributionsKSM.toString()}\n        </span>\n      </div>\n      <div className=\"w-2/5\">\n        <p className=\"mb-0 pb-5\">{t('Total rewards ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalRewardsKMA.toString()}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nDetailsSummary.propTypes = {\n  userReferrals: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allReferrals: PropTypes.object,\n  userContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  accountAddress: PropTypes.string,\n  allContributors: PropTypes.arrayOf(PropTypes.string)\n};\n\nexport default DetailsSummary;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport Contribution from '../../../types/Contribution';\nimport ContributionHistory from './ContributionHistory';\nimport ReferralHistory from './ReferralHistory';\nimport DetailsSummary from './DetailsSummary';\n\nconst CreateAccountPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <p className=\"mb-2 text-md xl:text-base\">\n        {t('Create an account in polkadot.js to continue')}\n      </p>\n    </div>\n  );\n};\n\nconst InstallPJSPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <a className=\"mb-2 text-md xl:text-base\" href='https://polkadot.js.org/extension/'>\n        {t('Install polkadot.js wallet to continue')}\n      </a>\n    </div>\n  );\n};\n\nconst Details = ({\n  userContributions,\n  allContributions,\n  allReferrals,\n  accountAddress,\n  allContributors,\n  keyringIsInit\n}) => {\n  const [userReferrals, setUserReferrals] = useState([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getUserReferrals = () => {\n      if (!allReferrals || !allContributions || !accountAddress) {\n        setUserReferrals(null);\n        return;\n      }\n      const referredByUser = [];\n      for (const [referred, referredBy] of Object.entries(allReferrals)) {\n        if (referredBy === accountAddress) {\n          referredByUser.push(referred);\n        }\n      }\n      const userReferrals = [];\n      allContributions.forEach(contribution => {\n        if (referredByUser.includes(contribution.address)) {\n          userReferrals.push(contribution);\n        }\n      });\n      setUserReferrals(userReferrals.sort((a, b) => b.date - a.date));\n    };\n    getUserReferrals();\n  }, [allContributions, allReferrals, accountAddress]);\n\n  if (!keyringIsInit) {\n    return <InstallPJSPrompt />;\n  } else if (!accountAddress) {\n    return <CreateAccountPrompt />;\n  }\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <DetailsSummary\n        userReferrals={userReferrals || []}\n        userContributions={userContributions}\n        allContributions={allContributions}\n        allReferrals={allReferrals}\n        accountAddress={accountAddress}\n        allContributors={allContributors}\n      />\n      <ContributionHistory userContributions={userContributions} />\n      <ReferralHistory userReferrals={userReferrals} />\n    </div>\n  );\n};\n\nDetails.propTypes = {\n  userContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allReferrals: PropTypes.object,\n  accountAddress: PropTypes.string,\n  allContributors: PropTypes.arrayOf(PropTypes.string),\n  polkadotJSInstalled: PropTypes.bool,\n  setAccountAddress: PropTypes.func,\n  accountPair: PropTypes.object,\n  keyringIsInit: PropTypes.bool\n};\n\nexport default Details;\n","import utils from '../substrate-lib/utils';\n\nfunction isNumType (type) {\n  return utils.paramConversion.num.some(el => type.indexOf(el) >= 0);\n}\n\nexport default function formatPayloadForSubstrate (payload, opts = { emptyAsNull: true }) {\n  const paramFields = new Array(payload.length).fill(true);\n\n  // if `opts.emptyAsNull` is true, empty param value will be added to res as `null`.\n  //   Otherwise, it will not be added\n  const paramVal = payload.map(inputParam => {\n    // To cater the js quirk that `null` is a type of `object`.\n    if (typeof inputParam === 'object' && inputParam !== null && typeof inputParam.value === 'string') {\n      return inputParam.value.trim();\n    } else if (typeof inputParam === 'string') {\n      return inputParam.trim();\n    }\n    return inputParam;\n  });\n  const params = paramFields.map((field, ind) => ({ ...field, value: paramVal[ind] || null }));\n\n  return params.reduce((memo, { type = 'string', value }) => {\n    if (value == null || value === '') return (opts.emptyAsNull ? [...memo, null] : memo);\n\n    let converted = value;\n\n    // Deal with a vector\n    if (type.indexOf('Vec<') >= 0) {\n      converted = converted.split(',').map(e => e.trim());\n      converted = converted.map(single => isNumType(type)\n        ? (single.indexOf('.') >= 0 ? Number.parseFloat(single) : Number.parseInt(single))\n        : single\n      );\n      return [...memo, converted];\n    }\n\n    // Deal with a single value\n    if (isNumType(type)) {\n      converted = converted.indexOf('.') >= 0 ? Number.parseFloat(converted) : Number.parseInt(converted);\n    }\n    return [...memo, converted];\n  }, []);\n}\n","const FINALIZED = 'finalized';\nconst FAILED = 'failed';\nconst PROCESSING = 'processing';\n\nexport default class TxStatus {\n  constructor (status, block = null, message = null) {\n    this.status = status;\n    this.block = block;\n    this.message = message;\n    this.batchNum = null;\n    this.totalBatches = null;\n  }\n\n  static processing (message) {\n    return new TxStatus(PROCESSING, null, message);\n  }\n\n  static finalized (block) {\n    return new TxStatus(FINALIZED, block, null);\n  }\n\n  static failed (block, message) {\n    return new TxStatus(FAILED, block, message);\n  }\n\n  isProcessing () {\n    return this.status === PROCESSING;\n  }\n\n  isFinalized () {\n    return this.status === FINALIZED;\n  }\n\n  isFailed () {\n    return this.status === FAILED;\n  }\n\n  toString () {\n    let message = this.status;\n    if (this.block) {\n      message += `;\\n block hash: ${this.block}`;\n    }\n    if (this.message) {\n      message += `;\\n ${this.message}`;\n    }\n    return message;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nimport { Loader } from 'semantic-ui-react';\nimport TxStatus from 'types/TxStatus';\n\n\nexport default function Main ({ txStatus, transactionType = 'Transacion' }) {\n  const { t } = useTranslation();\n\n  let txStatusMesage;\n  if (txStatus.isProcessing()) {\n    txStatusMesage = t(`${transactionType} processing`);\n  } else if (txStatus.isFinalized()) {\n    txStatusMesage = ' ' + t(`${transactionType} finalized`);\n  } else if (txStatus.isFailed()) {\n    txStatusMesage = ' ' + t(`${transactionType} failed`);\n  }\n\n  return (\n    <div style={{ textAlign: 'center', overflowWrap: 'break-word' }} className=\"pt-10 pr-2\" >\n      <span style={{ flexGrow: 1 }} className='items-center'>\n        {txStatus.isProcessing()\n          ? <p>\n            <Loader active inline size='small' inverted />{' ' + txStatusMesage}\n          </p>\n          : <a target=\"_blank\" rel=\"noopener noreferrer\" href={config.BLOCK_EXPLORER_URL + txStatus.block} style={{ textAlign: 'center', overflowWrap: 'break-word' }}>\n            <p>{txStatusMesage}</p>\n          </a>\n        }\n      </span>\n    </div>\n  );\n}\n\nMain.propTypes = {\n  txStatus: PropTypes.instanceOf(TxStatus), transactionType: PropTypes.string\n};\n","export default function getFailedExtrinsicError (events, api) {\n  let errorMessage = null;\n  events.filter(({ event }) =>\n    api.events.system.ExtrinsicFailed.is(event) || api.events.utility.BatchInterrupted.is(event))\n    .forEach(({ event: { data: [error,] } }) => {\n      if (error.isModule) {\n        // for module errors, we have the section indexed, lookup\n        const decoded = api.registry.findMetaError(error.asModule);\n        const { documentation, method, section } = decoded;\n        errorMessage = `${section}.${method}: ${documentation.join(' ')}`;\n      } else {\n      // Other, CannotLookup, BadOrigin, no extra info\n        errorMessage = error.toString();\n      }\n    });\n  return errorMessage;\n}\n","import getFailedExtrinsicError from './GetFailedExtrinsicError';\n\nexport function makeTxResHandler (\n  api,\n  onSuccess = block => null,  // eslint-disable-line no-unused-vars\n  onFailure = (block, error) => null,  // eslint-disable-line no-unused-vars\n  onUpdate = message => null  // eslint-disable-line no-unused-vars\n) {\n  return ({ status, events }) => {\n    let error;\n    if (status.isInBlock || status.isFinalized) {\n      error = getFailedExtrinsicError(events, api);\n    }\n    if (status.isInBlock && error) {\n      onFailure(status.asInBlock.toString(), error);\n    } else if (status.isFinalized && error) {\n      onFailure(status.asFinalized.toString(), error);\n    } else if (status.isFinalized) {\n      console.log(status);\n      onSuccess(status.asFinalized.toString());\n    } else {\n      onUpdate(status.type);\n    }\n  };\n}\n","/* eslint-disable multiline-ternary */\nimport React, { useEffect, useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'semantic-ui-react';\nimport Decimal from 'decimal.js';\nimport formatPayloadForSubstrate from 'utils/FormatPayloadForSubstrate';\nimport BN from 'bn.js';\nimport { useTranslation } from 'react-i18next';\nimport Calamari from 'types/Calamari';\nimport config from 'config';\nimport ReferralCode from 'types/ReferralCode';\nimport {\n  getLatestReferralCode,\n  setLatestReferralCode,\n} from 'utils/LocalStorageValue';\nimport Contribution from 'types/Contribution';\nimport TxStatus from '../../types/TxStatus';\nimport TxStatusDisplay from '../Layouts/TxStatusDisplay';\nimport Kusama from '../../types/Kusama';\nimport { makeTxResHandler } from '../../utils/MakeTxResHandler';\nimport { useSubstrate } from '../../substrate-lib';\n\nconst CreateAccountPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p className=\"mb-2 text-md xl:text-base\">\n        {t('Create an account in polkadot.js to continue')}\n      </p>\n    </div>\n  );\n};\n\nconst InstallPJSPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <a\n        className=\"mb-2 text-md xl:text-base\"\n        href=\"https://polkadot.js.org/extension/\">\n        {t('Install polkadot.js wallet to continue')}\n      </a>\n    </div>\n  );\n};\n\nconst CrowdloanFinishedNote = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p>\n        Second tranche of rewards has been consumed. Thank you for supporting\n        Calamari Network! Do not contribute any more KSM at this time.\n      </p>\n      <p></p>\n    </div>\n  );\n};\n\nfunction Contribute({\n  fromAccount,\n  accountBalanceKSM,\n  urlReferralCode,\n  allContributors,\n  accountAddress,\n  keyringIsInit,\n  totalContributionsKSM,\n  userContributions,\n}) {\n  const [contributionStatus, setContributionStatus] = useState(null);\n  const [contributeAmountInput, setContributeAmountInput] = useState('');\n  const [referralCodeInput, setReferralCodeInput] = useState('');\n  const [referralCode, setReferralCode] = useState();\n  const [referralCodeInvalid, setReferralCodeInvalid] = useState(false);\n  const [userReferredSelf, setUserReferredSelf] = useState(false);\n  const { api } = useSubstrate();\n  const { t } = useTranslation();\n\n  const getContributeAmounKSM = () => {\n    try {\n      return new Kusama(Kusama.KSM, new Decimal(contributeAmountInput));\n    } catch (error) {\n      return Kusama.zero();\n    }\n  };\n  const contributeAmountKSM = getContributeAmounKSM();\n  const contributeAmountAtomicUnits = contributeAmountKSM?.toAtomicUnits();\n\n  const getEarlyBonus = () => {\n    if (!allContributors || !contributeAmountKSM) {\n      return Calamari.zero();\n    } else if (\n      allContributors.length < config.EARLY_BONUS_TIER_1_CUTOFF ||\n      allContributors\n        .slice(0, config.EARLY_BONUS_TIER_1_CUTOFF)\n        .includes(accountAddress)\n    ) {\n      return contributeAmountKSM.toKMABonusRewardTier1();\n    } else if (\n      allContributors.length < config.EARLY_BONUS_TIER_2_CUTOFF ||\n      allContributors\n        .slice(0, config.EARLY_BONUS_TIER_2_CUTOFF)\n        .includes(accountAddress)\n    ) {\n      return contributeAmountKSM.toKMABonusRewardTier2();\n    } else {\n      return Calamari.zero();\n    }\n  };\n  const earlyBonus = getEarlyBonus();\n\n  const getReferalBonus = () => {\n    if (!contributeAmountKSM && !userContributions) return null;\n    const previousReferral = userContributions?.some(\n      (contribution) => contribution.referral,\n    );\n    return referralCode || previousReferral\n      ? contributeAmountKSM.toKMAWasReferredReward()\n      : Calamari.zero();\n  };\n  const referralBonus = getReferalBonus();\n\n  const getBaseReward = () => {\n    if (!contributeAmountKSM) return null;\n    return contributeAmountKSM\n      ? contributeAmountKSM.toKMABaseReward()\n      : Calamari.zero();\n  };\n  const baseReward = getBaseReward();\n\n  let totalReward = null;\n\n  if (baseReward && referralBonus && earlyBonus) {\n    totalReward = baseReward.add(referralBonus.add(earlyBonus));\n  }\n\n  const onContributeSuccess = (block) => {\n    setContributionStatus(TxStatus.finalized(block));\n    if (referralCode) {\n      setLatestReferralCode(referralCode, accountAddress);\n    }\n  };\n  const onContributeFailure = (block, error) => {\n    console.error(error);\n    setContributionStatus(TxStatus.failed(block, error));\n  };\n  const onContributeUpdate = (message) => {\n    setContributionStatus(TxStatus.processing(message));\n  };\n\n  const buildReferralTx = () => {\n    const memo = api.createType('Memo', referralCode.bytes);\n    return api.tx.crowdloan.addMemo(config.PARA_ID, memo.toHex());\n  };\n\n  const getUserMaxContributionKSM = () => {\n    if (!accountBalanceKSM) {\n      return Kusama.zero();\n    }\n    const estimatedFeeAmount = new Kusama(\n      Kusama.KSM,\n      new Decimal(config.DEFENSIVE_FEE_ESTIMATE_KSM),\n    );\n    return accountBalanceKSM.minus(estimatedFeeAmount).max(Kusama.zero());\n  };\n  const userMaxContributionKSM = getUserMaxContributionKSM();\n\n  const getCrowdloanRemainingFundsKSM = () => {\n    const crowdloanKSMTarget = new Kusama(\n      Kusama.KSM,\n      new Decimal(config.CROWDLOAN_KSM_TARGET),\n    );\n    return crowdloanKSMTarget.minus(totalContributionsKSM).max(Kusama.zero());\n  };\n  const crowdloanRemainingFundsKSM = getCrowdloanRemainingFundsKSM();\n\n  const maxContributionKSM = userMaxContributionKSM.min(\n    crowdloanRemainingFundsKSM,\n  );\n\n  const onClickMax = () => {\n    accountBalanceKSM &&\n      setContributeAmountInput(maxContributionKSM.toUnformattedString());\n  };\n\n  const onChangeContributeAmountInput = (e) => {\n    const input = e.target.value;\n    if ((isNaN(input) && input !== '') || parseFloat(e.target.value) < 0) {\n      return;\n    }\n    setContributeAmountInput(input);\n  };\n\n  const buildContributeTx = () => {\n    return api.tx.crowdloan.contribute(\n      ...formatPayloadForSubstrate([\n        config.PARA_ID,\n        new BN(contributeAmountAtomicUnits.value.toString()),\n        null,\n      ]),\n    );\n  };\n\n  useEffect(() => {\n    if (!accountAddress) {\n      return;\n    }\n    const handleReferralCodeInputChange = () => {\n      if (referralCodeInput === '') {\n        setReferralCode(null);\n        setUserReferredSelf(false);\n        setReferralCodeInvalid(false);\n        return;\n      }\n      try {\n        const referralCode = ReferralCode.fromHexStr(referralCodeInput);\n        if (referralCode.toAddress() === accountAddress) {\n          setReferralCode(null);\n          setUserReferredSelf(true);\n          setReferralCodeInvalid(false);\n        } else {\n          setReferralCode(referralCode);\n          setUserReferredSelf(false);\n          setReferralCodeInvalid(false);\n        }\n      } catch (error) {\n        setReferralCode(null);\n        setUserReferredSelf(false);\n        setReferralCodeInvalid(true);\n      }\n    };\n    handleReferralCodeInputChange();\n  }, [accountAddress, referralCodeInput]);\n\n  const onChangeReferralCodeInput = (value) => {\n    if (value.startsWith(`${config.APP_BASE_URL}?referral=`)) {\n      value = value.replace(`${config.APP_BASE_URL}?referral=`, '');\n    }\n    setReferralCodeInput(value);\n  };\n\n  useMemo(() => {\n    const setReferralCodeFromURL = () => {\n      if (urlReferralCode && !getLatestReferralCode(accountAddress)) {\n        onChangeReferralCodeInput(urlReferralCode);\n      }\n    };\n    setReferralCodeFromURL();\n  }, [urlReferralCode, accountAddress]);\n\n  useEffect(() => {\n    const setReferralCodeFromHistory = () => {\n      if (contributionStatus) {\n        return;\n      }\n      let latestReferral = getLatestReferralCode(accountAddress);\n      if (!latestReferral) {\n        userContributions?.forEach((contribution) => {\n          if (contribution.referral) {\n            latestReferral = contribution.referral;\n            setLatestReferralCode(contribution.referral, accountAddress);\n          }\n        });\n      }\n      if (latestReferral) {\n        onChangeReferralCodeInput(latestReferral.toString());\n      }\n    };\n    setReferralCodeFromHistory();\n  }, [userContributions, accountAddress, contributionStatus]);\n\n  const formIsDisabled =\n    contributionStatus && contributionStatus.isProcessing();\n\n  const referralCodeInputIsDisabled =\n    formIsDisabled || getLatestReferralCode(accountAddress);\n\n  const exceedsTarget =\n    contributeAmountKSM &&\n    crowdloanRemainingFundsKSM.lt(contributeAmountKSM) &&\n    contributeAmountInput.length > 0;\n\n  const insufficientFunds =\n    contributeAmountKSM &&\n    contributeAmountKSM.gt(userMaxContributionKSM) &&\n    contributeAmountInput.length > 0;\n  const belowMinContribution =\n    contributeAmountKSM &&\n    contributeAmountKSM.lt(\n      new Kusama(Kusama.KSM, new Decimal(config.MIN_CONTRIBUTION)),\n    ) &&\n    contributeAmountInput.length > 0;\n  const crowdloanIsFinished = totalContributionsKSM.gt(\n    new Kusama(Kusama.KSM, new Decimal(config.STAGE_2_TARGET_KSM)),\n  );\n\n  const onClickClaimButton = async () => {\n    if (\n      !contributeAmountKSM ||\n      insufficientFunds ||\n      belowMinContribution ||\n      exceedsTarget ||\n      crowdloanIsFinished\n    ) {\n      return;\n    }\n    try {\n      setContributionStatus(TxStatus.processing(''));\n      const txResHandler = makeTxResHandler(\n        api,\n        onContributeSuccess,\n        onContributeFailure,\n        onContributeUpdate,\n      );\n      const contributeTx = buildContributeTx();\n      const referralTx = referralCode && buildReferralTx();\n      if (referralTx) {\n        const transactions = referralTx\n          ? [contributeTx, referralTx]\n          : [contributeTx];\n        api.tx.utility\n          .batch(transactions)\n          .signAndSend(fromAccount, txResHandler);\n      } else {\n        contributeTx.signAndSend(fromAccount, txResHandler);\n      }\n    } catch (error) {\n      console.error(error);\n      setContributionStatus(TxStatus.failed(null, error));\n    }\n  };\n\n  if (crowdloanIsFinished) {\n    return <CrowdloanFinishedNote />;\n  } else if (!keyringIsInit) {\n    return <InstallPJSPrompt />;\n  } else if (!fromAccount) {\n    return <CreateAccountPrompt />;\n  }\n\n  let amountLabel;\n  if (contributionStatus) {\n    amountLabel = t('Enter your contribution amount');\n  } else if (insufficientFunds) {\n    amountLabel = ' ' + t('Insufficient funds');\n  } else if (belowMinContribution) {\n    amountLabel =\n      ' ' + t(`Minimum contribution is ${config.MIN_CONTRIBUTION} KSM`);\n  } else if (exceedsTarget) {\n    amountLabel = ' ' + t('Contribution exceeds crowdloan target');\n  } else {\n    amountLabel = t('Enter your contribution amount');\n  }\n\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p className=\"mb-2 text-sm xl:text-base\">{amountLabel}</p>\n      <div className=\"flex items-center\">\n        <div className=\"form-input w-4/5 amount relative h-20\">\n          <Input\n            className=\"h-full w-full outline-none\"\n            value={contributeAmountInput && contributeAmountInput.toString()}\n            type=\"numher\"\n            onChange={onChangeContributeAmountInput}\n            disabled={formIsDisabled}\n          />\n          <span\n            onClick={onClickMax}\n            className=\"uppercase cursor-pointer text-xl xl:text-2xl mt-4 right-0 mr-4 max-btn font-semibold absolute px-5 py-3 rounded-md\">\n            {t('Max')}\n          </span>\n        </div>\n        <div className=\"text-2xl xl:text-2xl w-1/5 font-semibold pl-4\">KSM</div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2 text-sm xl:text-base\">\n          {!referralCodeInvalid &&\n            !userReferredSelf &&\n            t('Enter your referral code (optional)')}\n          {userReferredSelf && ' ' + t('Cannot refer self')}\n          {referralCodeInvalid && ' ' + t('Referral code invalid')}\n        </p>\n        <div className=\"w-full form-input relative h-20\">\n          <Input\n            value={referralCodeInput}\n            onChange={(e) => onChangeReferralCodeInput(e.target.value)}\n            className=\"w-full h-full outline-none\"\n            disabled={referralCodeInputIsDisabled}\n          />\n        </div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2\">{t('Your Rewards')}</p>\n        <div className=\"reward\">\n          <div className=\"artibute rounded-t-lg calamari-text bg-white\">\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-4 pb-2\">\n              <span>{t('Base')}</span>\n              <span className=\"font-semibold\">\n                {baseReward && baseReward.toString()}\n              </span>\n            </div>\n            <div className=\"flex text-base xl:text-lg items-center justify-between px-3 xl:px-6 py-2 bg-gray\">\n              <div className=\"flex items-center\">\n                <span>{t('Bonus')}</span>\n                <span className=\"text-xs block text-white rounded-sm ml-2 bg-red py-1 px-2\">\n                  {t('Limited Time')}\n                </span>\n              </div>\n              <span className=\"font-semibold\">\n                {earlyBonus && earlyBonus.toString()}\n              </span>\n            </div>\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-2 pb-4\">\n              <span>{t('Referral')}</span>\n              <span className=\"font-semibold\">\n                {referralBonus && referralBonus.toString()}\n              </span>\n            </div>\n          </div>\n          <div className=\"flex text-xl p-6 result justify-between text-white\">\n            <span>{t('Rewards')}:</span>\n            <span>{totalReward && totalReward.toString()}</span>\n          </div>\n        </div>\n      </div>\n      {!contributionStatus ? (\n        <div\n          onClick={onClickClaimButton}\n          className=\"py-6 rounded-lg text-2xl xl:text-2xl cursor-pointer text-center mt-8 mb-4 bg-oriange\">\n          {t('Contribute')}\n        </div>\n      ) : (\n        <TxStatusDisplay\n          txStatus={contributionStatus}\n          transactionType={'Contribution'}\n        />\n      )}\n    </div>\n  );\n}\n\nContribute.propTypes = {\n  fromAccount: PropTypes.string,\n  accountBalanceKSM: PropTypes.instanceOf(Kusama),\n  urlReferralCode: PropTypes.string,\n  allContributors: PropTypes.arrayOf(PropTypes.string),\n  accountAddress: PropTypes.string,\n  polkadotJSInstalled: PropTypes.bool,\n  setAccountAddress: PropTypes.func,\n  accountPair: PropTypes.object,\n  keyringIsInit: PropTypes.bool,\n  totalContributionsKSM: PropTypes.instanceOf(Kusama),\n  userContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n};\n\nexport default Contribute;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Line } from 'react-chartjs-2';\nimport Kusama from 'types/Kusama';\nimport { Placeholder } from 'semantic-ui-react';\nimport Contribution from 'types/Contribution';\nimport config from '../../../config';\n\nconst GraphPlaceholder = () => {\n  return (\n    <div className=\"py-8\">\n      <Placeholder fluid>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n        <Placeholder.Paragraph>\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n          <Placeholder.Line />\n        </Placeholder.Paragraph>\n      </Placeholder>\n    </div>\n  );\n};\n\nexport default function Graph ({ allContributions }) {\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const [contributionsByDay, setContributionsByDay] = useState([]);\n\n  useEffect(() => {\n    if (!allContributions) {\n      return;\n    }\n    const getContributionsByDay = () => {\n      const CROWDLOAN_START_DATE = new Date(config.CROWDLOAN_START_TIMESTAMP);\n      const MS_PER_DAY = 1000 * 60 * 60 * 24;\n      const msIntoCrowdloan = new Date() - CROWDLOAN_START_DATE;\n      const daysIntoCrowdloan = Math.ceil(msIntoCrowdloan / MS_PER_DAY);\n      const crowdloanDays = [...Array(daysIntoCrowdloan).keys()].map((i) => new Date(CROWDLOAN_START_DATE.getTime() + (i * MS_PER_DAY)));\n      const contributionsByDay = crowdloanDays.map(day => ({ day: day, totalContributions: Kusama.zero() }));\n      let dayIdx = 0;\n      let currentDate = contributionsByDay[dayIdx].day;\n      allContributions.forEach(contribution => {\n        while (contribution.date > new Date(currentDate.getTime() + MS_PER_DAY)) {\n          dayIdx++;\n          currentDate = contributionsByDay[dayIdx].day;\n        }\n        contributionsByDay[dayIdx].totalContributions = contributionsByDay[dayIdx].totalContributions.add(contribution.amountKSM);\n      });\n      // Add day before crowdloan so that the graph starts at 0\n      const dayBeforeCrowdloan = CROWDLOAN_START_DATE.getTime() - MS_PER_DAY;\n      const contributionsZerothDay = { day: dayBeforeCrowdloan, totalContributions: Kusama.zero() };\n      setContributionsByDay([contributionsZerothDay, ...contributionsByDay]);\n    };\n    getContributionsByDay();\n  }, [allContributions]);\n\n  const options = {\n    animation: false,\n    responsive: true,\n    interaction: {\n      mode: 'index',\n      intersect: false\n    },\n    stacked: false,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      y: {\n        type: 'linear',\n        display: true,\n        position: 'right'\n      }\n    },\n    elements: { point: { radius: 2, hoverRadius: 3 } }\n  };\n\n  const data = contributionsByDay.map((_, i) => contributionsByDay.slice(0, i + 1)\n    .reduce((acc, cur) => acc.add(cur.totalContributions), Kusama.zero()))\n    .map(kusama => kusama.value.toNumber());\n\n  const graphLabels = contributionsByDay.map(singleDayContributions => {\n    const day = new Date(singleDayContributions.day);\n    return day.toLocaleDateString('en-US', dateFormatOptions);\n  });\n\n  const graphData = {\n    labels: graphLabels,\n    datasets: [\n      {\n        label: 'KSM',\n        data: data,\n        borderColor: 'rgba(233, 109, 43, 1)',\n        backgroundColor: 'rgba(233, 109, 43, 1)',\n        yAxisID: 'y',\n        borderWidth: 1\n      }\n    ]\n  };\n\n  if (!allContributions) {\n    return <GraphPlaceholder />;\n  }\n  return (\n    <div className=\"py-4 relative graph-line pt-4\">\n      <span className=\"absolute right-0\">KSM</span>\n      <Line data={graphData} options={options} />\n    </div>\n  );\n}\n\n\nGraph.propTypes = {\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution))\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableColumnHeader = ({ label, className, width = 'auto', children }) => {\n  return (\n    <div\n      style={{ width }}\n      className={classNames(\n        'box-border text-base inline-block p-2 text-gray font-semibold',\n        className\n      )}>\n      {label || children}\n    </div>\n  );\n};\n\nTableColumnHeader.propTypes = {\n  label: PropTypes.string,\n  className: PropTypes.string,\n  width: PropTypes.string,\n  children: PropTypes.element\n};\n\nexport default TableColumnHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableHeaderWrapper = ({ children, className }) => {\n  return (\n    <div className={classNames('flex w-full items-center bottom-border-dashed', className)}>\n      {children}\n    </div>\n  );\n};\n\nTableHeaderWrapper.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n\nexport default TableHeaderWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableRow = ({ children, className, highlight }) => {\n  return (\n    <div\n      className={classNames('flex w-full items-center', { 'bg-table-row': highlight }, className)}\n    >\n      {children}\n    </div>\n  );\n};\n\nTableRow.propTypes = {\n  children: PropTypes.any,\n  className: PropTypes.string,\n  highlight: PropTypes.bool\n};\n\nexport default TableRow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableRowItem = ({ children, className, width = '', onTableRow }) => {\n  return (\n    <div\n      style={{ width }}\n      onClick={onTableRow}\n      className={classNames('box-border inline-block p-2', className)}>\n      {children}\n    </div>\n  );\n};\n\nTableRowItem.propTypes = {\n  children: PropTypes.any,\n  className: PropTypes.string,\n  width: PropTypes.string,\n  onTableRow: PropTypes.func\n};\n\nexport default TableRowItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Kusama from 'types/Kusama';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\nimport Contribution from 'types/Contribution';\nimport config from 'config';\n\nconst LeaderboardPlaceholder = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"item p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n      <div className=\"py-8\">\n        <Placeholder fluid>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n        </Placeholder>\n      </div>\n    </div>\n  );\n};\n\nexport default function Leaderboard({ allContributions }) {\n  const { t } = useTranslation();\n\n  const getTopThreeContributors = () => {\n    if (!allContributions) {\n      return null;\n    }\n    const contributionsByAddress = {};\n    allContributions.forEach((contribution) => {\n      const addressCurrentContribution =\n        contributionsByAddress[contribution.address] || Kusama.zero();\n      contributionsByAddress[contribution.address] =\n        addressCurrentContribution.add(contribution.amountKSM);\n    });\n\n    const contributionsByContributor = Object.entries(contributionsByAddress)\n      .map(([address, amountKSM]) => ({\n        address: address,\n        amountKSM: amountKSM,\n      }))\n      .sort((first, second) =>\n        second.amountKSM.value.minus(first.amountKSM.value),\n      );\n\n    return contributionsByContributor.slice(0, 3);\n  };\n  const topThreeContributors = getTopThreeContributors();\n  if (!topThreeContributors) {\n    return <LeaderboardPlaceholder />;\n  }\n\n  return (\n    <div className=\"item flex-auto p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n      <div className=\"overflow-x-auto border-2 rounded-lg\">\n        <div className=\"min-w-table-sm \">\n          <TableHeaderWrapper className=\"px-2\">\n            <TableColumnHeader label={t('Rank')} width=\"20%\" />\n            <TableColumnHeader label={t('Address')} width=\"40%\" />\n            <TableColumnHeader label={t('Contributed')} width=\"40%\" />\n          </TableHeaderWrapper>\n          {topThreeContributors.map((val, i) => (\n            <TableRow\n              className=\"bg-light-gray calamari-text rounded-lg px-2 my-2\"\n              key={val.address}>\n              <TableRowItem width=\"20%\">\n                <div className=\"w-8 h-8 bg-purple text-white leading-8 text-center rounded-md\">\n                  {i + 1}\n                </div>\n              </TableRowItem>\n              <TableRowItem width=\"40%\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={config.ADDRESS_BLOCK_EXPLORER_URL + val.address}>\n                  <div\n                    style={{ textOverflow: 'ellipsis' }}\n                    className=\"overflow-hidden\">\n                    {val.address}\n                  </div>\n                </a>\n              </TableRowItem>\n              <TableRowItem width=\"40%\">\n                <span className=\"text-thirdry font-semibold\">\n                  {val.amountKSM.toString()}\n                </span>\n              </TableRowItem>\n            </TableRow>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nLeaderboard.propTypes = {\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n};\n","/* eslint-disable multiline-ternary */\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport Calamari from 'types/Calamari';\nimport config from 'config';\nimport Kusama from 'types/Kusama';\nimport Contribution from 'types/Contribution';\nimport Graph from './Graph';\nimport Leaderboard from './Leaderboard';\n\nfunction Crowdloan ({ totalContributionsKSM, allContributions, allContributors, allReferrals }) {\n  const { t } = useTranslation();\n\n  const [totalBaseRewardsKMA, setTotalBaseRewardsKMA] = useState(Calamari.zero());\n  const [totalBonusRewardsKMA, setTotalBonusRewardsKMA] = useState(Calamari.zero());\n  const [totalReferralRewardsKMA, setTotalReferralRewardsKMA] = useState(Calamari.zero());\n  const [totalRewardsKMA, setTotalRewardsKMA] = useState(Calamari.zero());\n\n  useEffect(() => {\n    const getTotalBaseRewardsKMA = () => {\n      if (!totalContributionsKSM) {\n        return Calamari.zero();\n      }\n      return totalContributionsKSM.toKMABaseReward();\n    };\n    setTotalBaseRewardsKMA(getTotalBaseRewardsKMA());\n  }, [totalContributionsKSM]);\n\n  useEffect(() => {\n    const getTotalBonusRewardsKMA = () => {\n      if (!allContributions) {\n        return Calamari.zero();\n      }\n      return allContributions.reduce((acc, contribution) => {\n        if (allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(contribution.address)) {\n          return acc.add(contribution.amountKSM.toKMABonusRewardTier1());\n        } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(contribution.address)) {\n          return acc.add(contribution.amountKSM.toKMABonusRewardTier2());\n        } else {\n          return acc;\n        }\n      }, Calamari.zero());\n    };\n    setTotalBonusRewardsKMA(getTotalBonusRewardsKMA());\n  }, [allContributions, allContributors]);\n\n  useEffect(() => {\n    const getTotalReferralRewardsKMA = () => {\n      if (!allContributions || !allReferrals) {\n        return Calamari.zero();\n      }\n      return allContributions.reduce((acc, contribution) => {\n        if (allReferrals[contribution.address]) {\n          const giveReferralReward = contribution.amountKSM.toKMAGaveReferralReward();\n          const receiveReferralReward = contribution.amountKSM.toKMAWasReferredReward();\n          const referralReward = giveReferralReward.add(receiveReferralReward);\n          return acc.add(referralReward);\n        } else {\n          return acc;\n        }\n      }, Calamari.zero());\n    };\n    setTotalReferralRewardsKMA(getTotalReferralRewardsKMA());\n  }, [allContributions, allReferrals]);\n\n  useEffect(() => {\n    const getTotalRewardsKMA = () => {\n      return totalBaseRewardsKMA.add(totalBonusRewardsKMA.add(totalReferralRewardsKMA));\n    };\n    setTotalRewardsKMA(getTotalRewardsKMA());\n  }, [totalBaseRewardsKMA, totalBonusRewardsKMA, totalReferralRewardsKMA]);\n\n  return (\n    <div className=\"content-item lg:flex flex-col h-full mt-16 lg:mt-0 calamari-text crowdloan\">\n      <div className=\"bg-white item p-8 xl:p-10 xl:pb-4\">\n        <h1 className=\"title text-3xl md:text-4xl\">{t('The Crowdloan')}</h1>\n        {!totalContributionsKSM ? (\n          <div className=\"py-2\">\n            <Placeholder fluid>\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder>\n          </div>\n        ) : (\n          <div className=\"flex\">\n            <div className=\"w-3/5\">\n              <p className=\"mb-0 pb-5 total-title\">\n                {t('Total contributions')}\n              </p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n                {totalContributionsKSM.toString()}\n              </span>\n            </div>\n            <div className=\"w-2/5\">\n              <p className=\"mb-0 pb-5 total-title\">{t('Total rewards')}</p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n                {totalRewardsKMA.toString()}\n              </span>\n            </div>\n          </div>\n        )}\n        <Graph allContributions={allContributions} />\n      </div>\n      <Leaderboard allContributions={allContributions} />\n    </div>\n  );\n}\n\nCrowdloan.propTypes = {\n  totalContributionsKSM: PropTypes.instanceOf(Kusama),\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allContributors: PropTypes.arrayOf(PropTypes.string),\n  allReferrals: PropTypes.object\n};\n\nexport default Crowdloan;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Pagination, Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\nimport axios from 'axios';\nimport Decimal from 'decimal.js';\nimport { useTranslation } from 'react-i18next';\nimport Calamari from 'types/Calamari';\nimport Contribution from 'types/Contribution';\nimport Kusama from 'types/Kusama';\nimport config from 'config';\nimport ReferralCode from 'types/ReferralCode';\nimport { hexAddPrefix, isHex } from '@polkadot/util';\n\nconst ContributeActivityPlaceholder = () => {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n      <div className=\"mb-4 min-w-table-sm\">\n        <Placeholder fluid>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n        </Placeholder>\n      </div>\n    </div>\n  );\n};\n\nconst ContributeActivity = ({ allContributions, allContributors }) => {\n  const [totalPages, setTotalPages] = useState(1);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [contributions, setContributions] = useState(null);\n  const [contributionRewards, setContributionRewards] = useState(null);\n  const [referralCounts, setReferralCounts] = useState(null);\n  const [referralRewards, setReferralRewards] = useState(null);\n\n  const { t } = useTranslation();\n  const PAGE_SIZE = 10;\n\n  const handlePageChange = (_, data) => {\n    setPageNumber(data.activePage);\n  };\n\n  useEffect(() => {\n    const getContributions = async () => {\n      const res = await axios.post('parachain/contributes', {\n        fund_id: config.FUND_ID,\n        row: PAGE_SIZE,\n        page: pageNumber - 1,\n        order: 'block_num desc',\n        from_history: true\n      });\n      setTotalPages(Math.ceil(res.data.data.count / PAGE_SIZE));\n      const rawContributions = res.data.data.contributes ?? [];\n      setContributions(rawContributions.map(rawContribution => {\n        const amountKSM = new Kusama(Kusama.ATOMIC_UNITS, new Decimal(rawContribution.contributing)).toKSM();\n        const referralCode = (isHex(hexAddPrefix(rawContribution.memo)) && rawContribution.memo.length === 64) ? ReferralCode.fromHexStr(rawContribution.memo) : null;\n        return new Contribution(amountKSM, new Date(rawContribution.block_timestamp * 1000), rawContribution.who, referralCode);\n      }));\n    };\n    getContributions();\n  }, [pageNumber]);\n\n  useEffect(() => {\n    if (contributions === null) {\n      return;\n    }\n    const getContributionsRewards = () => {\n      return contributions.map(contribution => {\n        const baseReward = contribution.amountKSM.toKMABaseReward();\n        if (!allContributors || !allContributions) {\n          return baseReward;\n        }\n        let bonusReward = Calamari.zero();\n        if (allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(contribution.address)) {\n          bonusReward = contribution.amountKSM.toKMABonusRewardTier1();\n        } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(contribution.address)) {\n          bonusReward = contribution.amountKSM.toKMABonusRewardTier2();\n        }\n        return baseReward.add(bonusReward);\n      });\n    };\n    setContributionRewards(getContributionsRewards());\n  }, [contributions, allContributors, allContributions]);\n\n  useEffect(() => {\n    if (!allContributions || !contributions) {\n      return;\n    }\n    const getReferralCountsAndRewards = () => {\n      const referralsByContribution = contributions.map(currentPageContribution => {\n        return allContributions.filter(someContribution => {\n          return someContribution.referral?.toAddress() === currentPageContribution.address;\n        });\n      });\n      const referralCounts = referralsByContribution.map(referredTransactions => {\n        return referredTransactions.map(transaction => transaction.address).filter((address, i, self) => self.indexOf(address) === i).length;\n      });\n\n      const referralRewards = referralsByContribution.map(referredTransactions => {\n        return referredTransactions.reduce((acc, transaction) => acc.add(transaction.amountKSM.toKMAGaveReferralReward()), Calamari.zero());\n      });\n      return [referralCounts, referralRewards];\n    };\n    const [referralCounts, referralRewards] = getReferralCountsAndRewards();\n    setReferralCounts(referralCounts);\n    setReferralRewards(referralRewards);\n  }, [allContributions, contributions]);\n\n  if (!contributions) {\n    return <ContributeActivityPlaceholder />;\n  }\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n      <div className=\"mb-4 min-w-table-sm\">\n        <TableHeaderWrapper className=\"px-2\">\n          <TableColumnHeader label={t('Address')} width=\"40%\" />\n          <TableColumnHeader label={t('Contributed')} width=\"13%\" />\n          <TableColumnHeader label={t('Rewards')} width=\"17%\" />\n          {(referralCounts && referralRewards) &&\n            <>\n              <TableColumnHeader label={t('Referrals')} width=\"13%\" />\n              <TableColumnHeader label={t('Referral rewards')} width=\"17%\" />\n            </>\n          }\n        </TableHeaderWrapper>\n        {\n          contributions?.map((contribution, i) => {\n            return (\n              <TableRowData\n                contribution={contribution}\n                key={contribution.address + contribution.date.toString()}\n                contributionReward={contributionRewards && contributionRewards[i]}\n                referralCount={referralCounts && referralCounts[i]}\n                referralReward={referralRewards && referralRewards[i]}\n              />\n            );\n          })\n        }\n      </div>\n      <div className=\"flex justify-center pt-2\">\n        <Pagination\n          boundaryRange={0}\n          defaultActivePage={1}\n          siblingRange={2}\n          totalPages={totalPages}\n          onPageChange={handlePageChange}\n          size=\"mini\"\n        />\n      </div>\n    </div>\n  );\n};\n\nContributeActivity.propTypes = {\n  allContributions: PropTypes.arrayOf(PropTypes.instanceOf(Contribution)),\n  allContributors: PropTypes.arrayOf(PropTypes.string),\n};\n\nconst TableRowData = ({ contribution, contributionReward, referralCount, referralReward }) => {\n  return (\n    <TableRow className=\"bg-light-gray calamari-text rounded-md px-2 my-2\">\n      <TableRowItem width=\"40%\">\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={config.ADDRESS_BLOCK_EXPLORER_URL + contribution.address}>\n          <div className=\"text-blue-thirdry overflow-hidden\" style={{ textOverflow: 'ellipsis' }}>\n            {contribution.address}\n          </div>\n        </a>\n      </TableRowItem>\n      <TableRowItem width=\"13%\">\n        <span className=\"text-thirdry font-semibold\">{contribution.amountKSM.toString()}</span>\n      </TableRowItem>\n      <TableRowItem width=\"17%\">\n        <span className=\"manta-prime-blue font-semibold\">{contributionReward && contributionReward.toString()}</span>\n      </TableRowItem>\n      {(referralCount !== null && referralReward !== null) &&\n        <>\n          <TableRowItem width=\"13%\">\n            <span className=\"text-thirdry font-semibold\">{referralCount && referralCount}</span>\n          </TableRowItem>\n          <TableRowItem width=\"17%\">\n            <span className=\"text-thirdry font-semibold\">{referralReward && referralReward.toString()}</span>\n          </TableRowItem>\n        </>\n      }\n    </TableRow>\n  );\n};\n\nTableRowData.propTypes = {\n  contribution: PropTypes.instanceOf(Contribution),\n  referralCount: PropTypes.number,\n  referralReward: PropTypes.instanceOf(Calamari),\n  contributionReward: PropTypes.instanceOf(Calamari)\n};\n\nexport default ContributeActivity;\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport default function Header() {\n  const { t } = useTranslation();\n  return (\n    <section\n      style={{\n        color: '#fff',\n        position: 'fixed',\n        backgroundColor: ' #07b801',\n        width: '100%',\n        textAlign: 'center',\n        padding: '5px 0px',\n        zIndex: 1000,\n        marginBottom: '10rem',\n      }}>\n      {t(\n        'Second tranche of rewards has been consumed. Thank you for supporting Calamari Network! Do not contribute any more KSM at this time.',\n      )}\n    </section>\n  );\n}\n","import React from 'react';\nimport config from 'config';\n\nexport default function VersionTag() {\n\n  return (\n    <div style={{color: 'darkgray', float: 'right'}}>Version: {config.GIT_HASH.slice(0, 4)}</div>\n  );\n}\n","import { web3FromSource } from '@polkadot/extension-dapp';\n\nexport default async function getFromAccount (accountPair, api) {\n  const {\n    address,\n    meta: { source, isInjected }\n  } = accountPair;\n  let fromAcct;\n  // signer is from Polkadot-js browser extension\n  if (isInjected) {\n    const injected = await web3FromSource(source);\n    fromAcct = address;\n    api.setSigner(injected.signer);\n  } else {\n    fromAcct = accountPair;\n  }\n  return fromAcct;\n}\n","import React, { useState, useEffect, useMemo } from 'react';\nimport Navbar from 'components/Layouts/Navbar';\nimport {\n  Details,\n  Contribute,\n  Crowdloan,\n  ContributeActivity,\n} from 'components/HomeComponents';\nimport { Dimmer, Loader, Grid, Message } from 'semantic-ui-react';\nimport Decimal from 'decimal.js';\nimport Kusama from 'types/Kusama';\nimport Contribution from 'types/Contribution';\nimport axios from 'axios';\nimport config from 'config';\nimport { isHex, hexAddPrefix } from '@polkadot/util';\nimport ReferralCode from 'types/ReferralCode';\nimport { useLocation } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { web3Enable, web3Accounts } from '@polkadot/extension-dapp';\nimport initAxios from 'utils/InitAxios';\nimport Header from 'components/Layouts/Header';\nimport VersionTag from 'components/Layouts/VersionTag';\nimport getFromAccount from '../../utils/GetFromAccount';\nimport { getLastAccessedAccount } from '../../utils/LocalStorageValue';\nimport { useSubstrate, SubstrateContextProvider } from '../../substrate-lib';\n\nfunction Main() {\n  initAxios();\n\n  const { api, apiState, keyring, keyringState, apiError } = useSubstrate();\n  const { t } = useTranslation();\n  const referralCode = new URLSearchParams(useLocation().search).get(\n    'referral',\n  );\n\n  const [fromAccount, setFromAccount] = useState(null);\n  const [accountAddress, setAccountAddress] = useState(null);\n  const [accountBalanceKSM, setAccountBalanceKSM] = useState(null);\n  const [userContributions, setUserContributions] = useState(null);\n  const [hasLoggedVersion, setHasLoggedVersion] = useState(false);\n  const [waitingForKeyring, setWaitingForKeyring] = useState(false);\n  const [keyringIsInit, setKeyringIsInit] = useState(false);\n  const [totalContributionsKSM, setTotalContributionsKSM] = useState(null);\n  const [allReferrals, setAllReferrals] = useState(null);\n  const [allContributions, setAllContributions] = useState(null);\n  const [allContributors, setAllContributors] = useState(null);\n\n  const accountPair =\n    accountAddress && keyringIsInit && keyring.getPair(accountAddress);\n\n  useEffect(() => {\n    const polkadotJsIsInjected = () => !!window.injectedWeb3['polkadot-js'];\n\n    const initKeyring = async () => {\n      await web3Enable(config.APP_NAME);\n      let allAccounts = await web3Accounts();\n      allAccounts = allAccounts.map(({ address, meta }) => ({\n        address,\n        meta: { ...meta, name: meta.name },\n      }));\n      keyring.loadAll(\n        { ss58Format: config.SS58_FORMAT, isDevelopment: false },\n        allAccounts,\n      );\n      setKeyringIsInit(true);\n    };\n\n    const initKeyringWhenInjected = async () => {\n      if (polkadotJsIsInjected()) {\n        initKeyring();\n      } else {\n        setWaitingForKeyring(true);\n        const timer = setInterval(async () => {\n          if (!polkadotJsIsInjected()) return;\n          await initKeyring();\n          setWaitingForKeyring(false);\n          clearInterval(timer);\n        }, 500);\n      }\n    };\n\n    if (keyringIsInit || waitingForKeyring) return;\n    initKeyringWhenInjected();\n  }, [keyringIsInit, waitingForKeyring, keyring]);\n\n  useMemo(() => {\n    if (!hasLoggedVersion) {\n      console.log(`Calmari Crowdloan UI Version ${config.GIT_HASH}`);\n      setHasLoggedVersion(true);\n    }\n  }, [hasLoggedVersion]);\n\n  useEffect(() => {\n    const setDefaultAccount = async () => {\n      if (keyringIsInit && keyring.getPairs().length > 0 && !accountAddress) {\n        const defaultAccount =\n          getLastAccessedAccount(keyring) || keyring.getPairs()[0].address;\n        setAccountAddress(defaultAccount);\n      }\n    };\n    setDefaultAccount();\n  }, [keyringIsInit, keyring, accountAddress]);\n\n  useEffect(() => {\n    async function loadFromAccount() {\n      if (!api || !api.isConnected || !accountPair) {\n        return;\n      }\n      await api.isReady;\n      const fromAccount = await getFromAccount(accountPair, api);\n      setFromAccount(fromAccount);\n    }\n    loadFromAccount();\n  }, [api, accountPair]);\n\n  useEffect(() => {\n    const getAccountBalance = async () => {\n      if (!api || !api.isConnected || !accountAddress) {\n        return;\n      }\n      await api.isReady;\n      let unsubscribe;\n      api.query.system\n        .account(accountAddress, (balance) => {\n          const rawBalance = new Decimal(balance.data.free.toString());\n          setAccountBalanceKSM(\n            new Kusama(Kusama.ATOMIC_UNITS, rawBalance).toKSM(),\n          );\n        })\n        .then((unsub) => {\n          unsubscribe = unsub;\n        })\n        .catch(console.error);\n      return () => unsubscribe && unsubscribe();\n    };\n    getAccountBalance();\n  }, [api, accountAddress]);\n\n  useMemo(() => {\n    const getAllContributors = (allContributions) => {\n      return allContributions\n        .map((contribution) => contribution.address)\n        .filter((address, i, self) => self.indexOf(address) === i);\n    };\n\n    const getAllContributionsAndReferrals = async () => {\n      if (!api) {\n        return;\n      }\n      await api.isReady;\n      let totalPages;\n      let pageIdx = 0;\n      const allContributions = [];\n\n      const allReferrals = {};\n      do {\n        const res = await axios.post('parachain/contributes', {\n          fund_id: config.FUND_ID,\n          order: 'block_num asc',\n          row: 100,\n          page: pageIdx,\n          from_history: true,\n        });\n        totalPages = Math.ceil(res.data.data.count / 100);\n        res.data.data.contributes?.forEach((contribution) => {\n          const amountKSM = new Kusama(\n            Kusama.ATOMIC_UNITS,\n            new Decimal(contribution.contributing),\n          ).toKSM();\n          const referralCode =\n            isHex(hexAddPrefix(contribution.memo)) &&\n            contribution.memo.length === 64\n              ? ReferralCode.fromHexStr(contribution.memo)\n              : null;\n          const currentContribution = new Contribution(\n            amountKSM,\n            new Date(contribution.block_timestamp * 1000),\n            contribution.who,\n            referralCode,\n          );\n          allContributions.push(currentContribution);\n          if (referralCode) {\n            allReferrals[contribution.who] = referralCode.toAddress();\n          }\n        });\n        pageIdx++;\n      } while (pageIdx < totalPages);\n      const allContributors = getAllContributors(allContributions);\n      setAllContributors(allContributors);\n      setAllContributions(allContributions);\n      setAllReferrals(allReferrals);\n    };\n    getAllContributionsAndReferrals();\n  }, [api]);\n\n  useMemo(() => {\n    const getUserContributions = async () => {\n      if (!accountAddress || !allContributions) {\n        return;\n      }\n      setUserContributions(\n        allContributions\n          .filter((contribution) => contribution.address === accountAddress)\n          .sort((a, b) => b.date - a.date),\n      );\n    };\n    getUserContributions();\n  }, [accountAddress, allContributions]);\n\n  useEffect(() => {\n    const getTotalContributionsKSM = async () => {\n      const res = await axios.post('parachain/funds', {\n        fund_id: config.FUND_ID,\n        row: 1,\n        page: 0,\n      });\n      setTotalContributionsKSM(\n        new Kusama(\n          Kusama.ATOMIC_UNITS,\n          new Decimal(res.data.data.funds[0].raised),\n        ).toKSM(),\n      );\n    };\n    getTotalContributionsKSM();\n  }, [api]);\n\n  const loader = (text) => (\n    <Dimmer active>\n      <Loader size=\"small\">{text}</Loader>\n    </Dimmer>\n  );\n\n  const message = (err) => (\n    <Grid centered columns={2} padded>\n      <Grid.Column>\n        <Message\n          negative\n          compact\n          floating\n          header=\"Error Connecting to Substrate\"\n          content={`${JSON.stringify(err, null, 4)}`}\n        />\n      </Grid.Column>\n    </Grid>\n  );\n\n  const walletMessage = () => (\n    <Dimmer active>\n      <Message compact floating>\n        <a href=\"https://polkadot.js.org/extension/\">\n          {t('Install polkadot.js wallet to continue')}\n        </a>\n      </Message>\n    </Dimmer>\n  );\n\n  if (apiState === 'ERROR') {\n    return message(apiError);\n  } else if (keyringState === 'NO_EXTENSION') {\n    return walletMessage();\n  } else if (apiState !== 'READY') {\n    return loader(t('Connecting to Kusama'));\n  }\n\n  return (\n    <>\n      <Header totalContributionsKSM={totalContributionsKSM} />\n      <div\n        style={{ paddingTop: '1em' }}\n        className=\"home-page px-6 sm:px-16 xl:px-40\">\n        <Navbar\n          keyringIsInit={keyringIsInit}\n          accountPair={accountPair}\n          accountAddress={accountAddress}\n          setAccountAddress={setAccountAddress}\n          accountBalanceKSM={accountBalanceKSM}\n        />\n        <div className=\"home-content py-6\">\n          <Grid columns=\"three\">\n            <Grid.Row className=\"flex-wrap flex-col flex\">\n              <Grid.Column className=\"flex-wrap item flex\">\n                <Contribute\n                  keyringIsInit={keyringIsInit}\n                  accountAddress={accountAddress}\n                  allContributors={allContributors}\n                  urlReferralCode={referralCode}\n                  fromAccount={fromAccount}\n                  accountBalanceKSM={accountBalanceKSM}\n                  totalContributionsKSM={totalContributionsKSM}\n                  setUserContributions={setUserContributions}\n                  setAccountAddress={setAccountAddress}\n                  accountPair={accountPair}\n                  userContributions={userContributions}\n                />\n              </Grid.Column>\n              <Grid.Column className=\"flex-wrap item flex\">\n                <Details\n                  keyringIsInit={keyringIsInit}\n                  accountAddress={accountAddress}\n                  userContributions={userContributions}\n                  allContributions={allContributions}\n                  allContributors={allContributors}\n                  allReferrals={allReferrals}\n                  setAccountAddress={setAccountAddress}\n                  accountPair={accountPair}\n                />\n              </Grid.Column>\n              <Grid.Column className=\"flex-wrap item flex\">\n                <Crowdloan\n                  totalContributionsKSM={totalContributionsKSM}\n                  allContributions={allContributions}\n                  allContributors={allContributors}\n                  allReferrals={allReferrals}\n                />\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n        </div>\n        <ContributeActivity\n          allContributions={allContributions}\n          allContributors={allContributors}\n        />\n        <VersionTag />\n      </div>\n    </>\n  );\n}\n\nexport default function HomePage() {\n  return (\n    <SubstrateContextProvider>\n      <Main />\n    </SubstrateContextProvider>\n  );\n}\n","import axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport config from 'config';\n\nexport default function initAxios() {\n  axios.defaults.baseURL = config.SUBSCAN_URL;\n  axios.defaults.headers.post['Content-Type'] = 'application/json';\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = true;\n  axios.defaults.headers.post['X-API-Key'] = config.SUBSCAN_API_KEY;\n  axiosRetry(axios, { retries: 10, retryDelay: () => 600, retryCondition: error => error.response.status === 429 });\n}\n","import React, { useEffect } from 'react';\nimport 'semantic-ui-css/semantic.min.css';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport HomePage from 'pages/HomePage';\nimport { useTranslation } from 'react-i18next';\nimport { getLanguage } from 'utils/LocalStorageValue';\nimport { SubstrateContextProvider } from './substrate-lib';\n\nconst App = () => {\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    i18n.changeLanguage(getLanguage());\n  }, [i18n]);\n  return (\n    <SubstrateContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/?referral:referralCode\" component={HomePage} />\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n    </SubstrateContextProvider>\n  );\n};\nexport default App;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport translationEN from 'common/locales/en.json';\nimport translationCN from 'common/locales/cn.json';\nimport detector from 'i18next-browser-languagedetector';\n\nconst resources = {\n  en: {\n    translation: translationEN\n  },\n  cn: {\n    translation: translationCN\n  }\n};\n\ni18n\n  .use(detector)\n  .use(initReactI18next)\n  .init({\n    resources,\n    lng: 'en',\n    keySeparator: false,\n    interpolation: {\n      escapeValue: false\n    }\n  });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\nimport './common/i18n/i18n';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}