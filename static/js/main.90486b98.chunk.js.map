{"version":3,"sources":["assets/images/calamari-logo.svg","utils/LocalStorageValue.js","config/index.js","substrate-lib/SubstrateContext.js","substrate-lib/utils.js","components/Layouts/AccountSelectModal.js","components/Layouts/AccountSelectButton.js","assets/icons/menu.svg","assets/icons/close-menu.svg","types/ReferralCode.js","components/Layouts/Navbar.js","assets/icons/arrow-down.svg","assets/icons/arrow-up.svg","components/HomeComponents/Details/ContributionHistory.js","components/HomeComponents/Details/ReferralHistory.js","types/Calamari.js","types/Kusama.js","components/HomeComponents/Details/DetailsSummary.js","components/HomeComponents/Details/Details.js","utils/GetFailedExtrinsicError.js","utils/MakeTxResHandler.js","TxStatusDisplay.js","utils/TxStatus.js","utils/FormatPayloadForSubstrate.js","components/HomeComponents/Contribute.js","components/HomeComponents/Crowdloan/Graph.js","components/Table/TableColumnHeader/index.js","components/Table/TableHeaderWrapper/index.js","components/Table/TableRow/index.js","components/Table/TableRowItem/index.js","components/HomeComponents/Crowdloan/Leaderboard.js","components/HomeComponents/Crowdloan/Crowdloan.js","components/HomeComponents/ContributeActivity.js","utils/GetFromAccount.js","types/Contribution.js","pages/HomePage/index.js","substrate-lib/components/DeveloperConsole.js","App.js","common/i18n/i18n.js","index.js"],"names":["LANGUAGE_KEY","getLanguage","lang","localStorage","getItem","configEnv","require","types","envVars","reduce","mem","n","undefined","process","slice","config","configCommon","INIT_STATE","socket","queryString","parse","window","location","search","rpc","PROVIDER_SOCKET","jsonrpc","RPC","keyring","keyringState","api","apiError","apiState","reducer","state","action","type","payload","Error","loadAccts","SubstrateContext","React","createContext","SubstrateContextProvider","props","initState","forEach","key","useReducer","dispatch","provider","WsProvider","_api","ApiPromise","on","isReady","then","err","connect","asyncLoadAccounts","a","e","console","error","loadAccounts","Provider","value","children","useSubstrate","useContext","utils","paramConversion","num","AddressSelectModal","openModal","setOpenModal","acccountAddress","setAccountAddress","t","useTranslation","keyringOptions","getPairs","map","account","address","text","meta","name","toUpperCase","icon","Modal","size","className","open","onClose","Header","Content","option","index","onClick","classNames","active","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","shapeRendering","viewBox","height","width","d","cx","cy","r","Main","accountPair","useState","AccountSelectModal","AccountSelector","query","ReferralCode","bytes","this","encodeAddress","hexStripPrefix","u8aToHex","decodeAddress","hexStr","length","hexToU8a","hexAddPrefix","Navbar","accountAddress","accountBalanceKSM","i18n","selected","setSelected","isOpen","setIsOpen","onChangeLanguage","code","langCode","changeLanguage","setItem","useEffect","onClickMyReferralCode","navigator","clipboard","writeText","APP_BASE_URL","fromAddress","toString","toast","position","autoClose","hideProgressBar","draggable","progress","target","rel","href","src","Logo","alt","countries","customLabels","US","CN","onSelect","MenuIcon","style","transform","overflow","CloseMenuIcon","ContributionHistoryPlaceholder","Placeholder","fluid","Paragraph","Line","ContributionHistory","userContributions","currentPageNumberUserContributions","setCurrentPageNumberUserContributions","totalPagesUserContributions","Math","max","ceil","currentPageUserContributions","dateFormatOptions","month","day","contribution","date","toLocaleDateString","amountKSM","ArrowUp","ArrowDown","ReferralHistoryPlaceholder","ReferralHistory","userReferrals","currentPageNumberUserReferrals","setCurrentPageNumberUserReferrals","totalPagesUserReferrals","currentPageUserReferrals","referral","Calamari","amountKMA","other","add","gt","toNumber","toLocaleString","DISPLAY_OPTIONS","Decimal","maximumFractionDigits","minimumFractionDigits","Kusama","denomination","kusama","minus","min","lt","ATOMIC_UNITS","amount","pow","mul","KSM","div","includeUnits","string","toNearest","ROUND_DOWN","DetailsSummaryPlaceholder","DetailsSummary","allReferrals","allContributions","allContributors","zero","userBaseRewardsKMA","setUserBaseRewardsKMA","userBonusRewardsKMA","setUserBonusRewardsKMA","userGaveReferralRewardsKMA","setUserGaveReferralRewardsKMA","userWasReferredRewards","setUserWasReferredRewards","userTotalRewardsKMA","setUserTotalRewardKMA","userTotalContributionsKSM","setUserTotalContributionsKSM","acc","curr","getUserTotalContributionsKSM","userBaseRewards","toKMABaseReward","getUserBaseRewardsKMA","EARLY_BONUS_TIER_1_CUTOFF","includes","toKMABonusRewardTier1","EARLY_BONUS_TIER_2_CUTOFF","toKMABonusRewardTier2","toKMAGaveReferralReward","toKMAWasReferredReward","CreateAccountPrompt","InstallPJSPrompt","Details","polkadotJSInstalled","setUserReferrals","referredByUser","Object","entries","referred","push","sort","b","getUserReferrals","getFailedExtrinsicError","events","errorMessage","filter","event","system","ExtrinsicFailed","is","data","isModule","decoded","registry","findMetaError","asModule","documentation","method","section","join","makeTxResHandler","onSuccess","block","onFailure","onUpdate","message","status","isInBlock","isFinalized","asInBlock","asFinalized","txStatusMesage","txStatus","transactionType","isProcessing","isFailed","textAlign","overflowWrap","flexGrow","Loader","inline","inverted","BLOCK_EXPLORER_URL","FINALIZED","FAILED","PROCESSING","TxStatus","batchNum","totalBatches","isNumType","some","el","indexOf","Contribute","fromAccount","urlReferralCode","contributionStatus","setContributionStatus","contributeAmountInput","setContributeAmountInput","referralCodeInput","setReferralCodeInput","referralCode","setReferralCode","referralCodeInvalid","setReferralCodeInvalid","userReferredSelf","setUserReferredSelf","contributeAmountKSM","getContributeAmounKSM","contributeAmountAtomicUnits","toAtomicUnits","earlyBonus","referralBonus","baseReward","totalReward","onContributeSuccess","finalized","onContributeFailure","failed","onContributeUpdate","processing","buildReferralTx","memo","createType","tx","crowdloan","addMemo","PARA_ID","toHex","maxContribution","estimatedFeeAmount","getMaxContribution","buildContributeTx","contribute","opts","emptyAsNull","paramFields","_","paramVal","inputParam","trim","field","ind","converted","split","single","Number","parseFloat","parseInt","formatPayloadForSubstrate","BN","fromHexStr","toAddress","handleReferralCodeInputChange","onChangeReferralCodeInput","startsWith","replace","useMemo","formIsDisabled","insufficientFunds","belowMinContribution","shouldShowInsufficientFundsWarning","shouldShowMinContributionWarning","onClickClaimButton","contributeTx","referralTx","transactions","txResHandler","utility","batch","signAndSend","Input","onChange","input","isNaN","disabled","GraphPlaceholder","Graph","contributionsByDay","setContributionsByDay","CROWDLOAN_START_DATE","Date","CROWDLOAN_START_TIMESTAMP","MS_PER_DAY","msIntoCrowdloan","daysIntoCrowdloan","Array","keys","i","getTime","totalContributions","dayIdx","currentDate","contributionsZerothDay","getContributionsByDay","cur","graphData","labels","singleDayContributions","datasets","label","borderColor","backgroundColor","yAxisID","borderWidth","options","animation","responsive","interaction","mode","intersect","stacked","plugins","legend","display","scales","y","elements","point","radius","hoverRadius","TableColumnHeader","TableHeaderWrapper","TableRow","highlight","TableRowItem","onTableRow","LeaderboardPlaceholder","Leaderboard","topThreeContributors","contributionsByAddress","addressCurrentContribution","first","second","getTopThreeContributors","val","textOverflow","Crowdloan","totalContributionsKSM","totalBaseRewardsKMA","setTotalBaseRewardsKMA","totalBonusRewardsKMA","setTotalBonusRewardsKMA","totalReferralRewardsKMA","setTotalReferralRewardsKMA","totalRewardsKMA","setTotalRewardsKMA","giveReferralReward","receiveReferralReward","referralReward","ContributeActivityPlaceholder","TableRowData","referralCount","contributionKSM","contributing","toKSM","ADDRESS_BLOCK_EXPLORER_URL","who","ContributeActivity","totalPages","setTotalPages","pageNumber","setPageNumber","contributions","setContributions","referralCounts","setReferralCounts","referralRewards","setReferralRewards","axios","post","fund_id","FUND_ID","row","page","order","from_history","res","contributes","count","referralsByContribution","currentPageContribution","someContribution","referredTransactions","transaction","self","getReferralCountsAndRewards","extrinsic_index","Pagination","boundaryRange","defaultActivePage","siblingRange","onPageChange","activePage","getFromAccount","source","isInjected","web3FromSource","injected","fromAcct","setSigner","signer","Contribution","defaults","baseURL","SUBSCAN_URL","headers","API_KEY","axiosRetry","retries","retryDelay","retryCondition","response","useParams","setFromAccount","setAccountBalanceKSM","setUserContributions","setPolkadotJSInstalled","setTotalContributionsKSM","setAllReferrals","setAllContributions","setAllContributors","getPair","setDefaultAccount","log","GIT_HASH","isConnected","loadFromAccount","balance","rawBalance","free","unsub","unsubscribe","catch","getAccountBalance","web3Enable","APP_NAME","extensions","checkForPolkadotJS","getAllContributors","pageIdx","isHex","currentContribution","block_timestamp","getAllContributionsAndReferrals","getUserContributions","funds","raised","getTotalContributionsKSM","Grid","centered","columns","padded","Column","Message","negative","compact","floating","header","content","JSON","stringify","Dimmer","Row","HomePage","DeveloperConsole","util","utilCrypto","App","path","component","resources","en","translation","translationEN","cn","translationCN","use","detector","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","cryptoWaitReady","web3Accounts","allAccounts","loadAll","isDevelopment","DEVELOPMENT_KEYRING","ReactDOM","render","document","getElementById","CalamariCrowdloanUI"],"mappings":"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","file":"static/js/main.90486b98.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/calamari-logo.fecd29f4.svg\";","/* eslint-disable no-unneeded-ternary */\nconst LANGUAGE_KEY = 'lang';\n\nexport const getLanguage = () => {\n  const lang = localStorage.getItem(LANGUAGE_KEY);\n  return lang ? lang : 'en';\n};\n\nexport const setLanguage = (lang) => {\n  localStorage.setItem(LANGUAGE_KEY, lang);\n};\n","import configCommon from './common.json';\n// Using `require` as `import` does not support dynamic loading (yet).\nconst configEnv = require(`./${process.env.NODE_ENV}.json`);\nconst types = require('./types.json');\n\n// Accepting React env vars and aggregating them into `config` object.\nconst envVarNames = [\n  'REACT_APP_PROVIDER_SOCKET',\n  'REACT_APP_DEVELOPMENT_KEYRING'\n];\nconst envVars = envVarNames.reduce((mem, n) => {\n  // Remove the `REACT_APP_` prefix\n  if (process.env[n] !== undefined) mem[n.slice(10)] = process.env[n];\n  return mem;\n}, {});\n\nconst config = { ...configCommon, ...configEnv, ...envVars, types };\nexport default config;\n","import React, { useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport jsonrpc from '@polkadot/types/interfaces/jsonrpc';\nimport queryString from 'query-string';\n\nimport { ApiPromise, WsProvider } from '@polkadot/api';\nimport keyring from '@polkadot/ui-keyring';\n\nimport config from '../config';\n\nconst parsedQuery = queryString.parse(window.location.search);\nconst connectedSocket = parsedQuery.rpc || config.PROVIDER_SOCKET;\n///\n// Initial state for `useReducer`\n\nconst INIT_STATE = {\n  socket: connectedSocket,\n  jsonrpc: { ...jsonrpc, ...config.RPC },\n  types: config.types,\n  keyring: null,\n  keyringState: null,\n  api: null,\n  apiError: null,\n  apiState: null\n};\n\n///\n// Reducer function for `useReducer`\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'CONNECT_INIT':\n      return { ...state, apiState: 'CONNECT_INIT' };\n\n    case 'CONNECT':\n      return { ...state, api: action.payload, apiState: 'CONNECTING' };\n\n    case 'CONNECT_SUCCESS':\n      return { ...state, apiState: 'READY' };\n\n    case 'CONNECT_ERROR':\n      return { ...state, apiState: 'ERROR', apiError: action.payload };\n\n    case 'LOAD_KEYRING':\n      return { ...state, keyringState: 'LOADING' };\n\n    case 'SET_KEYRING':\n      return { ...state, keyring: action.payload, keyringState: 'READY' };\n\n    case 'KEYRING_ERROR':\n      return { ...state, keyring: null, keyringState: 'ERROR' };\n\n    default:\n      throw new Error(`Unknown type: ${action.type}`);\n  }\n};\n\n///\n// Connecting to the Substrate node\n\nconst connect = (state, dispatch) => {\n  const { apiState, socket, jsonrpc, types } = state;\n  // We only want this function to be performed once\n  if (apiState) return;\n\n  dispatch({ type: 'CONNECT_INIT' });\n\n  const provider = new WsProvider(socket);\n  const _api = new ApiPromise({ provider, types, rpc: jsonrpc });\n\n  // Set listeners for disconnection and reconnection event.\n  _api.on('connected', () => {\n    dispatch({ type: 'CONNECT', payload: _api });\n    // `ready` event is not emitted upon reconnection and is checked explicitly here.\n    _api.isReady.then((_api) => dispatch({ type: 'CONNECT_SUCCESS' }));\n  });\n  _api.on('ready', () => dispatch({ type: 'CONNECT_SUCCESS' }));\n  _api.on('error', err => dispatch({ type: 'CONNECT_ERROR', payload: err }));\n};\n\n///\n// Loading accounts from dev and polkadot-js extension\n\nlet loadAccts = false;\nconst loadAccounts = (state, dispatch) => {\n  const asyncLoadAccounts = async () => {\n    dispatch({ type: 'LOAD_KEYRING' });\n    try {\n      dispatch({ type: 'SET_KEYRING', payload: keyring });\n    } catch (e) {\n      console.error(e);\n      dispatch({ type: 'KEYRING_ERROR' });\n    }\n  };\n\n  const { keyringState } = state;\n  // If `keyringState` is not null `asyncLoadAccounts` is running.\n  if (keyringState) return;\n  // If `loadAccts` is true, the `asyncLoadAccounts` has been run once.\n  if (loadAccts) return dispatch({ type: 'SET_KEYRING', payload: keyring });\n\n  // This is the heavy duty work\n  loadAccts = true;\n  asyncLoadAccounts();\n};\n\nconst SubstrateContext = React.createContext();\n\nconst SubstrateContextProvider = (props) => {\n  // filtering props and merge with default param value\n  const initState = { ...INIT_STATE };\n  const neededPropNames = ['socket', 'types'];\n  neededPropNames.forEach(key => {\n    initState[key] = (typeof props[key] === 'undefined' ? initState[key] : props[key]);\n  });\n\n  const [state, dispatch] = useReducer(reducer, initState);\n  connect(state, dispatch);\n  loadAccounts(state, dispatch);\n\n  return <SubstrateContext.Provider value={state}>\n    {props.children}\n  </SubstrateContext.Provider>;\n};\n\n// prop typechecking\nSubstrateContextProvider.propTypes = {\n  socket: PropTypes.string,\n  types: PropTypes.object\n};\n\nconst useSubstrate = () => ({ ...useContext(SubstrateContext) });\n\nexport { SubstrateContextProvider, useSubstrate };\n","const utils = {\n  paramConversion: {\n    num: [\n      'Compact<Balance>',\n      'BalanceOf',\n      'u8', 'u16', 'u32', 'u64', 'u128',\n      'i8', 'i16', 'i32', 'i64', 'i128'\n    ]\n  }\n};\n\nexport default utils;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Modal } from 'semantic-ui-react';\nimport { useSubstrate } from '../../substrate-lib';\nimport { useTranslation } from 'react-i18next';\n\nfunction AddressSelectModal ({ openModal, setOpenModal, acccountAddress, setAccountAddress }) {\n  const { keyring } = useSubstrate();\n  const { t } = useTranslation();\n  // Get the list of accounts we possess the private key for\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n\n  return (\n        <Modal\n            size=\"small\"\n            className=\"address-modal\"\n            open={openModal}\n            onClose={() => setOpenModal(!openModal)}>\n            <Modal.Header className=\"py-2\">\n            <div className=\"text-2xl calamari-text text-center font-semibold\">\n                {t('Select an account')}\n            </div>\n            </Modal.Header>\n            <Modal.Content>\n            <div className=\"px-24\">\n                {keyringOptions?.map((option, index) => (\n                <div\n                    onClick={() => {\n                      setAccountAddress(option.value);\n                      setOpenModal(false);\n                    }}\n                    className={classNames(\n                      'border cursor-pointer px-8 mb-4 account rounded-md',\n                      {\n                        active:\n                        acccountAddress &&\n                        acccountAddress === option.value\n                      }\n                    )}\n                    key={index}>\n                    <div className=\"flex calamari-text items-center content\">\n                    <svg\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"1.5\"\n                        shapeRendering=\"geometricPrecision\"\n                        viewBox=\"0 0 24 24\"\n                        height=\"24\"\n                        width=\"24\">\n                        <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n                        <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n                    </svg>\n                    <div className=\"px-4 py-1\">\n                        <p className=\"mb-1 account-name font-semibold calamari-text\">\n                        {option.text}\n                        </p>\n                        <span className=\"purple-text account-address\">\n                        {option.value}\n                        </span>\n                    </div>\n                    </div>\n                </div>\n                ))}\n            </div>\n            </Modal.Content>\n        </Modal>\n  );\n}\n\nexport default AddressSelectModal;\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSubstrate } from '../../substrate-lib';\nimport AccountSelectModal from './AccountSelectModal';\n\nfunction Main ({ accountPair, setAccountAddress }) {\n  const { t } = useTranslation();\n  const [openModal, setOpenModal] = useState(false);\n  return (\n    <>\n    <div\n      onClick={() => setOpenModal(true)}\n      className=\"menu-item text-base btn lg:text-xl py-3 lg:ml-6 lg:py-4 px-4 lg:px-8 xl:px-12 btn\">\n      {accountPair\n        ? (\n        <div className=\"flex px-3 items-center\">\n          <svg\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1.5\"\n            shapeRendering=\"geometricPrecision\"\n            viewBox=\"0 0 24 24\"\n            height=\"24\"\n            width=\"24\">\n            <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n            <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n          </svg>\n          <span className=\"pl-4\">{accountPair && accountPair.meta.name.toUpperCase()}</span>\n        </div>\n          )\n        : (\n            t('Connect wallet')\n          )}\n    </div>\n    {\n      openModal &&\n      <AccountSelectModal\n        openModal={openModal}\n        setOpenModal={setOpenModal}\n        setAccountAddress={setAccountAddress}\n        accountPair={accountPair}\n      />\n    }\n    </>\n\n  );\n}\n\nexport default function AccountSelector (props) {\n  const { api, keyring } = useSubstrate();\n  return keyring?.getPairs && api.query ? <Main {...props} /> : null;\n}\n","export default __webpack_public_path__ + \"static/media/menu.71929dc3.svg\";","export default __webpack_public_path__ + \"static/media/close-menu.94c95cb6.svg\";","import { encodeAddress, decodeAddress } from '@polkadot/util-crypto';\nimport { hexToU8a, u8aToHex, hexAddPrefix, hexStripPrefix } from '@polkadot/util';\n\nexport default class ReferralCode {\n  constructor (bytes) {\n    this.bytes = bytes;\n  }\n\n  static fromAddress (address) {\n    return new ReferralCode(decodeAddress(address));\n  }\n\n  static fromHexStr (hexStr) {\n    if (hexStr.length !== 64) {\n      throw Error('Invalid referral code');\n    }\n    return new ReferralCode(hexToU8a(hexAddPrefix(hexStr)));\n  }\n\n  toAddress () {\n    return encodeAddress(this.bytes);\n  }\n\n  toString () {\n    return hexStripPrefix(u8aToHex(this.bytes));\n  }\n}\n","/* eslint-disable multiline-ternary */\n/* eslint-disable react/style-prop-object */\nimport React, { useState, useEffect } from 'react';\nimport Logo from 'assets/images/calamari-logo.svg';\nimport { useTranslation } from 'react-i18next';\nimport ReactFlagsSelect from 'react-flags-select';\nimport { setLanguage, getLanguage } from 'utils/LocalStorageValue';\nimport AccountSelectButton from './AccountSelectButton';\nimport 'react-toastify/dist/ReactToastify.css';\nimport MenuIcon from 'assets/icons/menu.svg';\nimport CloseMenuIcon from 'assets/icons/close-menu.svg';\nimport { toast, ToastContainer } from 'react-toastify';\nimport ReferralCode from 'types/ReferralCode';\nimport config from 'config';\n\nfunction Navbar ({\n  setAccountAddress,\n  accountBalanceKSM,\n  accountAddress,\n  accountPair\n}) {\n  const { t, i18n } = useTranslation();\n  const [selected, setSelected] = useState('US');\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onChangeLanguage = (code) => {\n    setSelected(code);\n    const langCode = code === 'US' ? 'en' : 'cn';\n    i18n.changeLanguage(langCode);\n    setLanguage(langCode);\n  };\n\n  useEffect(() => {\n    setSelected(getLanguage() === 'en' ? 'US' : 'CN');\n  }, []);\n\n  const onClickMyReferralCode = () => {\n    if (accountAddress) {\n      navigator.clipboard.writeText(\n        config.APP_BASE_URL +\n          ReferralCode.fromAddress(accountAddress).toString()\n      );\n      toast('Copied to clipboard', {\n        position: 'top-right',\n        autoClose: 2000,\n        hideProgressBar: true,\n        draggable: true,\n        progress: undefined\n      });\n    }\n  };\n\n  return (\n    <div className=\"navbar-content\">\n      <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://calamari.manta.network\">\n        <div className=\"logo-content\">\n          <img src={Logo} alt=\"logo\" />\n        </div>\n      </a>\n      <ToastContainer />\n      <div className=\"navbar-menu\">\n        <div className=\"hidden lg:flex\">\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://mantanetwork.medium.com/the-calamari-crowdloan-on-kusama-74a3cb2a2a4b\">\n            <div className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 lg:px-6 xl:px-9\">\n              {t('How it works')}\n            </div>\n          </a>\n          <div\n            onClick={onClickMyReferralCode}\n            className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 cursor-pointer lg:px-6 xl:px-9\">\n            {t('My referral link')}\n          </div>\n          <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.com/invite/5khsf6QmCb\">\n            <div className=\"menu-item text-base lg:text-lg py-2 lg:py-4 px-3 lg:px-6 xl:px-9\">\n              {t('Support')}\n            </div>\n          </a>\n        </div>\n        <div className=\"hidden lg:block\">\n          <ReactFlagsSelect\n            selected={selected}\n            countries={['US', 'CN']}\n            customLabels={{ US: 'EN', CN: 'CN' }}\n            onSelect={(code) => onChangeLanguage(code)}\n          />\n        </div>\n        <div className=\"hidden lg:block\">\n          <AccountSelectButton\n            setAccountAddress={setAccountAddress}\n            accountPair={accountPair}\n          />\n        </div>\n        <div className=\"lg:hidden flex items-center\">\n          <img\n            src={MenuIcon}\n            onClick={() => setIsOpen(!isOpen)}\n            className=\"cursor-pointer w-10\"\n            alt=\"menu-icon\"\n          />\n        </div>\n        <div\n          style={{ transform: isOpen && 'none', overflow: isOpen && 'visible' }}\n          className=\"nav-menu-mobile\">\n          {isOpen && (\n            <div>\n              <span onClick={() => setIsOpen(false)} className=\"close-icon\">\n                <img src={CloseMenuIcon} alt=\"close-menu-icon\" />\n              </span>\n              <div className=\"px-8 py-4\">\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://mantanetwork.medium.com/the-calamari-crowdloan-on-kusama-74a3cb2a2a4b\">\n                  <div className=\"menu-item text-base py-2\">\n                    {t('How it works')}\n                  </div>\n                </a>\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://discord.com/invite/5khsf6QmCb\">\n                  <div className=\"menu-item text-base py-2\">\n                    {t('Support')}\n                  </div>\n                </a>\n                <div\n                  onClick={onClickMyReferralCode}\n                  className=\"menu-item text-base py-3 mb-2 cursor-pointer\">\n                  {t('My referral link')}\n                </div>\n                <ReactFlagsSelect\n                  className=\"w-2/5 mb-4\"\n                  selected={selected}\n                  countries={['US', 'CN']}\n                  customLabels={{ US: 'EN', CN: 'CN' }}\n                  onSelect={(code) => onChangeLanguage(code)}\n                />\n                <AccountSelectButton\n                  setAccountAddress={setAccountAddress}\n                  accountPair={accountPair}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      {isOpen && (\n        <div\n          onClick={() => setIsOpen(false)}\n          className=\"navbar-mobile-overlay\"></div>\n      )}\n    </div>\n  );\n}\n\nexport default Navbar;\n","export default __webpack_public_path__ + \"static/media/arrow-down.d80e70fa.svg\";","export default __webpack_public_path__ + \"static/media/arrow-up.716601cb.svg\";","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nconst ContributionHistoryPlaceholder = () => {\n  return (\n  <div className=\"py-12\">\n    <Placeholder fluid>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n    </Placeholder>\n  </div>\n  );\n};\n\nconst ContributionHistory = ({ userContributions }) => {\n  const { t } = useTranslation();\n  const PAGE_SIZE = 5;\n  const [currentPageNumberUserContributions, setCurrentPageNumberUserContributions] = useState(1);\n  const totalPagesUserContributions = userContributions && Math.max(Math.ceil(userContributions.length / 5, 1), 1);\n  const currentPageUserContributions = userContributions && userContributions.slice((currentPageNumberUserContributions - 1) * PAGE_SIZE, currentPageNumberUserContributions * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n\n  if (!userContributions) {\n    return <ContributionHistoryPlaceholder />;\n  }\n  return (\n        <>\n        <div className=\"flex justify-between pt-6\">\n        <p className=\"mb-1\">{t('Contribution history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserContributions} of {totalPagesUserContributions}</span>\n        </div>\n        <div>\n        <div className=\"artibute border-2 py-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          {currentPageUserContributions.map((contribution, index) => (\n            <div\n              key={index}\n              className={classNames(\n                'flex text-lg justify-between pl-6 pr-10 py-2',\n                { 'bg-gray': index % 2 }\n              )}>\n              <span>{contribution.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n              <span className=\"font-semibold\">{contribution.amountKSM.toString()}</span>\n            </div>\n          ))}\n          <img\n            src={ArrowUp}\n            onClick={() =>\n              currentPageNumberUserContributions > 1 && setCurrentPageNumberUserContributions(currentPageNumberUserContributions - 1)\n            }\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n          />\n          <img\n            src={ArrowDown}\n            onClick={() =>\n              currentPageNumberUserContributions < totalPagesUserContributions && setCurrentPageNumberUserContributions(currentPageNumberUserContributions + 1)\n            }\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n          />\n        </div>\n      </div>\n      </>\n  );\n};\n\nexport default ContributionHistory;\n","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nconst ReferralHistoryPlaceholder = () => {\n  return (\n  <div className=\"py-12\">\n    <Placeholder fluid>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n    </Placeholder>\n  </div>\n  );\n};\n\nconst ReferralHistory = ({ userReferrals }) => {\n  const [currentPageNumberUserReferrals, setCurrentPageNumberUserReferrals] = useState(1);\n\n  const PAGE_SIZE = 5;\n  const totalPagesUserReferrals = Math.max(Math.ceil(userReferrals?.length / 5, 1), 1);\n  const currentPageUserReferrals = userReferrals?.slice((currentPageNumberUserReferrals - 1) * PAGE_SIZE, currentPageNumberUserReferrals * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const { t } = useTranslation();\n\n  if (!userReferrals) {\n    return <ReferralHistoryPlaceholder />;\n  }\n  return (\n        <>\n        <div className=\"flex justify-between pt-10\">\n        <p className=\"mb-1\">{t('Referral history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserReferrals} of {totalPagesUserReferrals}</span>\n      </div>\n      <div>\n        <div className=\"artibute border-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          <div className='pt-2'>\n            {currentPageUserReferrals.map((referral, index) => (\n\n              <div\n                key={index}\n                className={classNames(\n                  'flex text-lg justify-between pl-6 pr-10 py-2',\n                  { 'bg-gray': index % 2 }\n                )}>\n                <span>{referral.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n                <span className=\"font-semibold\">{referral.amountKSM.toString()}</span>\n              </div>\n            ))\n            }\n          </div>\n          <img\n            src={ArrowDown}\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals < totalPagesUserReferrals && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals + 1)\n            }\n          />\n          <img\n            src={ArrowUp}\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals > 1 && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals - 1)\n            }\n          />\n        </div>\n      </div>\n      </>\n  );\n};\n\nexport default ReferralHistory;\n","import Decimal from 'decimal.js';\n\nexport default class Calamari {\n    static DISPLAY_OPTIONS = { maximumFractionDigits: 0, minimumFractionDigits: 0 };\n\n    constructor (amountKMA) {\n      this.amountKMA = amountKMA;\n    }\n\n    static zero () {\n      return new Calamari(new Decimal(0));\n    }\n\n    add (other) {\n      return new Calamari(this.amountKMA.add(other.amountKMA));\n    }\n\n    gt (other) {\n      return this.amountKMA.gt(other.amountKMA);\n    }\n\n    toString () {\n      return this.amountKMA.toNumber().toLocaleString(undefined, Calamari.DISPLAY_OPTIONS) + ' KMA';\n    }\n}\n","import Decimal from 'decimal.js';\nimport Calamari from './Calamari';\n\nconst KUSAMA_CHAIN_DECIMALS = 12;\n\nfunction kusamaToAtomicUnits (amount) {\n  return new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)).mul(amount);\n}\n\nfunction atomicUnitsToKSM (amount) {\n  return amount.div(new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)));\n}\n\nclass Kusama {\n    static ATOMIC_UNITS = 'atomic units'\n    static KSM = 'KSM'\n    static DISPLAY_OPTIONS = { maximumFractionDigits: 1, minimumFractionDigits: 0 };\n\n    constructor (denomination, value) {\n      this.denomination = denomination;\n      this.value = value;\n    }\n\n    static zero () {\n      return new Kusama(Kusama.KSM, new Decimal(0));\n    }\n\n    minus (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot subtrract; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, this.value.minus(kusama.value));\n      }\n    }\n\n    add (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot add; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, this.value.add(kusama.value));\n      }\n    }\n\n    min (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get min; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, Decimal.min(this.value, kusama.value));\n      }\n    }\n\n    max (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get max; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, Decimal.max(this.value, kusama.value));\n      }\n    }\n\n    gt (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get max; denominations do not match');\n      } else {\n        return this.value.gt(kusama.value);\n      }\n    }\n\n    lt (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get max; denominations do not match');\n      } else {\n        return this.value.lt(kusama.value);\n      }\n    }\n\n    toAtomicUnits () {\n      if (this.denomination === Kusama.ATOMIC_UNITS) {\n        throw Error('Cannot convert atomic units to atomic units');\n      }\n      return new Kusama(Kusama.ATOMIC_UNITS, kusamaToAtomicUnits(this.value));\n    }\n\n    toKSM () {\n      if (this.denomination === Kusama.KSM) {\n        throw Error('Cannot convert KSM to KSM');\n      }\n      return new Kusama(Kusama.KSM, atomicUnitsToKSM(this.value));\n    }\n\n    toKMABaseReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(10000));\n    }\n\n    toKMABonusRewardTier1 () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(1000));\n    }\n\n    toKMABonusRewardTier2 () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(500));\n    }\n\n    toKMAGaveReferralReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(250));\n    }\n\n    toKMAWasReferredReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(250));\n    }\n\n    toString (includeUnits = true) {\n      if (this.denomination === Kusama.ATOMIC_UNITS) {\n        return this.value.toNumber().toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n      } else if (this.denomination === Kusama.KSM) {\n        let string = this.value.toNearest(0.1, Decimal.ROUND_DOWN).toNumber().toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n        if (includeUnits) {\n          string = string + ' KSM';\n        }\n        return string;\n      }\n    }\n}\n\nexport default Kusama;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Kusama from 'types/Kusama';\nimport config from 'config';\nimport Calamari from 'types/Calamari';\nimport { Placeholder } from 'semantic-ui-react';\n\nconst DetailsSummaryPlaceholder = () => {\n  return (\n    <div className=\"py-2\">\n      <Placeholder fluid>\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder>\n    </div>\n  );\n};\n\nconst DetailsSummary = ({\n  userReferrals = [],\n  allReferrals,\n  userContributions,\n  allContributions,\n  accountAddress,\n  allContributors\n}) => {\n  const [userBaseRewardsKMA, setUserBaseRewardsKMA] = useState(Calamari.zero());\n  const [userBonusRewardsKMA, setUserBonusRewardsKMA] = useState(Calamari.zero());\n  const [userGaveReferralRewardsKMA, setUserGaveReferralRewardsKMA] = useState(Calamari.zero());\n  const [userWasReferredRewards, setUserWasReferredRewards] = useState(Calamari.zero());\n  const [userTotalRewardsKMA, setUserTotalRewardKMA] = useState(Calamari.zero());\n  const [userTotalContributionsKSM, setUserTotalContributionsKSM] = useState(Kusama.zero());\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getUserTotalContributionsKSM = () => {\n      if (!userContributions) {\n        return Calamari.zero();\n      }\n      const userTotalContributionsKSM = userContributions.reduce((acc, curr) => acc.add(curr.amountKSM), Kusama.zero());\n      setUserTotalContributionsKSM(userTotalContributionsKSM);\n    };\n    getUserTotalContributionsKSM();\n  }, [userContributions]);\n\n  useEffect(() => {\n    const getUserBaseRewardsKMA = () => {\n      if (!userTotalContributionsKSM) {\n        return Calamari.zero();\n      }\n      const userBaseRewards = userTotalContributionsKSM.toKMABaseReward();\n      setUserBaseRewardsKMA(userBaseRewards);\n    };\n    getUserBaseRewardsKMA();\n  }, [userTotalContributionsKSM]);\n\n  useEffect(() => {\n    const getUserBonusRewardsKMA = () => {\n      if (!allContributions) {\n        return Calamari.zero();\n      } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(accountAddress)) {\n        return userContributions.reduce((acc, curr) => acc.add(curr.amountKSM.toKMABonusRewardTier1()), Calamari.zero());\n      } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(accountAddress)) {\n        return userContributions.reduce((acc, curr) => acc.add(curr.amountKSM.toKMABonusRewardTier2()), Calamari.zero());\n      } else {\n        return Calamari.zero();\n      }\n    };\n    setUserBonusRewardsKMA(getUserBonusRewardsKMA());\n  }, [allContributions, allContributors, accountAddress, userContributions]);\n\n  useEffect(() => {\n    const getUserGaveReferralRewards = () => {\n      if (!userReferrals) {\n        return Calamari.zero();\n      }\n      return userReferrals.reduce((acc, curr) => acc.add(curr.amountKSM.toKMAGaveReferralReward()), Calamari.zero());\n    };\n    setUserGaveReferralRewardsKMA(getUserGaveReferralRewards());\n  }, [userReferrals]);\n\n  useEffect(() => {\n    const getUserWasReferredRewards = () => {\n      if (!allReferrals || !accountAddress || !userTotalContributionsKSM) {\n        return Calamari.zero();\n      } else if (allReferrals[accountAddress]) {\n        return userTotalContributionsKSM.toKMAWasReferredReward();\n      } else {\n        return Calamari.zero();\n      }\n    };\n    setUserWasReferredRewards(getUserWasReferredRewards());\n  }, [allReferrals, accountAddress, userTotalContributionsKSM]);\n\n  useEffect(() => {\n    const getUserTotalRewardsKMA = () => {\n      return userBaseRewardsKMA.add(userBonusRewardsKMA.add(userGaveReferralRewardsKMA.add(userWasReferredRewards)));\n    };\n    setUserTotalRewardKMA(getUserTotalRewardsKMA());\n  }, [userBaseRewardsKMA, userBonusRewardsKMA, userGaveReferralRewardsKMA, userWasReferredRewards]);\n\n  if (!userContributions) {\n    return <DetailsSummaryPlaceholder />;\n  }\n  return (\n    <div className=\"flex\">\n      <div className=\"w-3/5\">\n        <p className=\"mb-0 pb-5\">{t('Total contributions ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalContributionsKSM.toString()}\n        </span>\n      </div>\n      <div className=\"w-2/5\">\n        <p className=\"mb-0 pb-5\">{t('Total rewards ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalRewardsKMA.toString()}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default DetailsSummary;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ContributionHistory from './ContributionHistory';\nimport ReferralHistory from './ReferralHistory';\nimport DetailsSummary from './DetailsSummary';\n\nconst CreateAccountPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n    <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <p href='#' className=\"mb-2 text-md xl:text-base\">\n        {t('Create an account in polkadot.js to continue')}\n      </p>\n    </div>\n  );\n};\n\nconst InstallPJSPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n    <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n    <a className=\"mb-2 text-md xl:text-base\" href='https://polkadot.js.org/extension/'>\n    {t('Install polkadot.js wallet to continue')}\n    </a>\n    </div>\n  );\n};\n\nconst Details = ({\n  userContributions,\n  allContributions,\n  allReferrals,\n  accountAddress,\n  allContributors,\n  polkadotJSInstalled\n}) => {\n  const [userReferrals, setUserReferrals] = useState([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getUserReferrals = () => {\n      if (!allReferrals || !allContributions || !accountAddress) {\n        setUserReferrals(null);\n        return;\n      }\n      const referredByUser = [];\n      for (const [referred, referredBy] of Object.entries(allReferrals)) {\n        if (referredBy === accountAddress) {\n          referredByUser.push(referred);\n        }\n      }\n      const userReferrals = [];\n      allContributions.forEach(contribution => {\n        if (referredByUser.includes(contribution.address)) {\n          userReferrals.push(contribution);\n        }\n      });\n      setUserReferrals(userReferrals.sort((a, b) => b.date - a.date));\n    };\n    getUserReferrals();\n  }, [allContributions, allReferrals, accountAddress]);\n\n  if (!polkadotJSInstalled) {\n    return <InstallPJSPrompt />;\n  } else if (!accountAddress) {\n    return <CreateAccountPrompt />;\n  }\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <DetailsSummary\n        userReferrals={userReferrals || []}\n        userContributions={userContributions}\n        allContributions={allContributions}\n        allReferrals={allReferrals}\n        accountAddress={accountAddress}\n        allContributors={allContributors}\n      />\n      <ContributionHistory userContributions={userContributions} />\n      <ReferralHistory userReferrals={userReferrals} />\n    </div>\n  );\n};\n\nexport default Details;\n","export default function getFailedExtrinsicError (events, api) {\n  let errorMessage = null;\n  events.filter(({ event }) =>\n    api.events.system.ExtrinsicFailed.is(event))\n    .forEach(({ event: { data: [error, info] } }) => {\n      if (error.isModule) {\n        // for module errors, we have the section indexed, lookup\n        const decoded = api.registry.findMetaError(error.asModule);\n        const { documentation, method, section } = decoded;\n        errorMessage = `${section}.${method}: ${documentation.join(' ')}`;\n      } else {\n      // Other, CannotLookup, BadOrigin, no extra info\n        errorMessage = error.toString();\n      }\n    });\n  return errorMessage;\n}\n","import getFailedExtrinsicError from './GetFailedExtrinsicError';\n\nexport function makeTxResHandler (\n  api,\n  onSuccess = block => null,\n  onFailure = (block, error) => null,\n  onUpdate = message => null\n) {\n  return ({ status, events }) => {\n    let error;\n    if (status.isInBlock || status.isFinalized) {\n      error = getFailedExtrinsicError(events, api);\n    }\n    if (status.isInBlock && error) {\n      onFailure(status.asInBlock.toString(), error);\n    } else if (status.isFinalized && error) {\n      onFailure(status.asFinalized.toString(), error);\n    } else if (status.isFinalized) {\n      onSuccess(status.asFinalized.toString());\n    } else {\n      onUpdate(status.type);\n    }\n  };\n}\n","import React from 'react';\nimport config from 'config';\nimport { useTranslation } from 'react-i18next';\nimport { Loader } from 'semantic-ui-react';\n\nexport default function Main ({ txStatus, transactionType = 'Transacion' }) {\n  const { t } = useTranslation();\n\n  let txStatusMesage;\n  if (txStatus.isProcessing()) {\n    txStatusMesage = t(`${transactionType} processing`);\n  } else if (txStatus.isFinalized()) {\n    txStatusMesage = '✅ ' + t(`${transactionType} finalized`);\n  } else if (txStatus.isFailed()) {\n    txStatusMesage = '❌ ' + t(`${transactionType} failed`);\n  }\n\n  return (\n    <div style={{ textAlign: 'center', overflowWrap: 'break-word' }} className=\"pt-10 pr-2\" >\n      <span style={{ flexGrow: 1 }} className='items-center'>\n        {txStatus.isProcessing()\n          ? <p>\n            <Loader active inline size='small' inverted />{' ' + txStatusMesage}\n          </p>\n          : <a href={config.BLOCK_EXPLORER_URL + txStatus.block} style={{ textAlign: 'center', overflowWrap: 'break-word' }}>\n            <p>{txStatusMesage}</p>\n          </a>\n        }\n      </span>\n    </div>\n  );\n}\n","const FINALIZED = 'finalized';\nconst FAILED = 'failed';\nconst PROCESSING = 'processing';\n\nexport default class TxStatus {\n  constructor (status, block = null, message = null) {\n    this.status = status;\n    this.block = block;\n    this.message = message;\n    this.batchNum = null;\n    this.totalBatches = null;\n  }\n\n  static processing (message) {\n    return new TxStatus(PROCESSING, null, message);\n  }\n\n  static finalized (block) {\n    return new TxStatus(FINALIZED, block, null);\n  }\n\n  static failed (block, message) {\n    return new TxStatus(FAILED, block, message);\n  }\n\n  isProcessing () {\n    return this.status === PROCESSING;\n  }\n\n  isFinalized () {\n    return this.status === FINALIZED;\n  }\n\n  isFailed () {\n    return this.status === FAILED;\n  }\n\n  toString () {\n    let message = this.status;\n    if (this.block) {\n      message += `;\\n block hash: ${this.block}`;\n    }\n    if (this.message) {\n      message += `;\\n ${this.message}`;\n    }\n    return message;\n  }\n}\n","import utils from '../substrate-lib/utils';\n\nfunction isNumType (type) {\n  return utils.paramConversion.num.some(el => type.indexOf(el) >= 0);\n}\n\nexport default function formatPayloadForSubstrate (payload, opts = { emptyAsNull: true }) {\n  const paramFields = payload.map(_ => true);\n\n  // if `opts.emptyAsNull` is true, empty param value will be added to res as `null`.\n  //   Otherwise, it will not be added\n  const paramVal = payload.map(inputParam => {\n    // To cater the js quirk that `null` is a type of `object`.\n    if (typeof inputParam === 'object' && inputParam !== null && typeof inputParam.value === 'string') {\n      return inputParam.value.trim();\n    } else if (typeof inputParam === 'string') {\n      return inputParam.trim();\n    }\n    return inputParam;\n  });\n  const params = paramFields.map((field, ind) => ({ ...field, value: paramVal[ind] || null }));\n\n  return params.reduce((memo, { type = 'string', value }) => {\n    if (value == null || value === '') return (opts.emptyAsNull ? [...memo, null] : memo);\n\n    let converted = value;\n\n    // Deal with a vector\n    if (type.indexOf('Vec<') >= 0) {\n      converted = converted.split(',').map(e => e.trim());\n      converted = converted.map(single => isNumType(type)\n        ? (single.indexOf('.') >= 0 ? Number.parseFloat(single) : Number.parseInt(single))\n        : single\n      );\n      return [...memo, converted];\n    }\n\n    // Deal with a single value\n    if (isNumType(type)) {\n      converted = converted.indexOf('.') >= 0 ? Number.parseFloat(converted) : Number.parseInt(converted);\n    }\n    return [...memo, converted];\n  }, []);\n}\n","/* eslint-disable multiline-ternary */\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { Input } from 'semantic-ui-react';\nimport { useSubstrate } from '../../substrate-lib';\nimport Decimal from 'decimal.js';\nimport { makeTxResHandler } from '../../utils/MakeTxResHandler';\nimport Kusama from '../../types/Kusama';\nimport TxStatusDisplay from '../../TxStatusDisplay';\nimport TxStatus from '../../utils/TxStatus';\nimport formatPayloadForSubstrate from 'utils/FormatPayloadForSubstrate';\nimport BN from 'bn.js';\nimport { useTranslation } from 'react-i18next';\nimport Calamari from 'types/Calamari';\nimport config from 'config';\nimport ReferralCode from 'types/ReferralCode';\n\nconst CreateAccountPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p href='#' className=\"mb-2 text-md xl:text-base\">\n        {t('Create an account in polkadot.js to continue')}\n      </p>\n    </div>\n  );\n};\n\nconst InstallPJSPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <a className=\"mb-2 text-md xl:text-base\" href='https://polkadot.js.org/extension/'>\n        {t('Install polkadot.js wallet to continue')}\n      </a>\n    </div>\n  );\n};\n\nfunction Contribute ({\n  fromAccount,\n  accountBalanceKSM,\n  urlReferralCode,\n  allContributors,\n  accountAddress,\n  polkadotJSInstalled\n}) {\n  const [contributionStatus, setContributionStatus] = useState(null);\n  const [contributeAmountInput, setContributeAmountInput] = useState('');\n  const [referralCodeInput, setReferralCodeInput] = useState('');\n  const [referralCode, setReferralCode] = useState();\n  const [referralCodeInvalid, setReferralCodeInvalid] = useState(false);\n  const [userReferredSelf, setUserReferredSelf] = useState(false);\n  const { api } = useSubstrate();\n  const { t } = useTranslation();\n\n  const getContributeAmounKSM = () => {\n    try {\n      return new Kusama(Kusama.KSM, new Decimal(contributeAmountInput));\n    } catch (error) {\n      return Kusama.zero();\n    }\n  };\n  const contributeAmountKSM = getContributeAmounKSM();\n  const contributeAmountAtomicUnits = contributeAmountKSM?.toAtomicUnits();\n\n  const getEarlyBonus = () => {\n    if (!allContributors || !contributeAmountKSM) {\n      return Calamari.zero();\n    } else if (allContributors.length < config.EARLY_BONUS_TIER_1_CUTOFF || allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(accountAddress)) {\n      return contributeAmountKSM.toKMABonusRewardTier1();\n    } else if (allContributors.length < config.EARLY_BONUS_TIER_2_CUTOFF || allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(accountAddress)) {\n      return contributeAmountKSM.toKMABonusRewardTier2();\n    } else {\n      return Calamari.zero();\n    }\n  };\n  const earlyBonus = getEarlyBonus();\n\n  const getReferalBonus = () => {\n    if (!contributeAmountKSM) return null;\n    return referralCode ? contributeAmountKSM.toKMAWasReferredReward() : Calamari.zero();\n  };\n  const referralBonus = getReferalBonus();\n\n  const getBaseReward = () => {\n    if (!contributeAmountKSM) return null;\n    return contributeAmountKSM ? contributeAmountKSM.toKMABaseReward() : Calamari.zero();\n  };\n  const baseReward = getBaseReward();\n\n  let totalReward = null;\n\n  if (baseReward && referralBonus && earlyBonus) {\n    totalReward = baseReward.add(referralBonus.add(earlyBonus));\n  }\n\n  const onContributeSuccess = block => {\n    setContributionStatus(TxStatus.finalized(block));\n  };\n  const onContributeFailure = (block, error) => {\n    setContributionStatus(TxStatus.failed(block, error));\n  };\n  const onContributeUpdate = message => {\n    setContributionStatus(TxStatus.processing(message));\n  };\n\n  const buildReferralTx = () => {\n    const memo = api.createType('Memo', referralCode.bytes);\n    return api.tx.crowdloan.addMemo(\n      config.PARA_ID, memo.toHex()\n    );\n  };\n\n  const getMaxContribution = () => {\n    if (!accountBalanceKSM) {\n      return Kusama.zero();\n    }\n    const estimatedFeeAmount = new Kusama(Kusama.KSM, new Decimal(0.1));\n    return accountBalanceKSM.minus(estimatedFeeAmount).max(Kusama.zero());\n  };\n  const maxContribution = getMaxContribution();\n\n  const onClickMax = () => {\n    accountBalanceKSM && setContributeAmountInput(maxContribution.toString(false));\n  };\n\n  const onChangeContributeAmountInput = e => {\n    const input = e.target.value;\n    if ((isNaN(input) && input !== '') || (parseFloat(e.target.value) < 0)) {\n      return;\n    }\n    setContributeAmountInput(input);\n  };\n\n  const buildContributeTx = () => {\n    return api.tx.crowdloan.contribute(\n      ...formatPayloadForSubstrate([\n        config.PARA_ID,\n        new BN(contributeAmountAtomicUnits.value.toString()),\n        null\n      ])\n    );\n  };\n\n  useEffect(() => {\n    if (!accountAddress) {\n      return;\n    }\n    const handleReferralCodeInputChange = () => {\n      if (referralCodeInput === '') {\n        setReferralCode(null);\n        setUserReferredSelf(false);\n        setReferralCodeInvalid(false);\n        return;\n      }\n      try {\n        const referralCode = ReferralCode.fromHexStr(referralCodeInput);\n        if (referralCode.toAddress() === accountAddress) {\n          setReferralCode(null);\n          setUserReferredSelf(true);\n          setReferralCodeInvalid(false);\n        } else {\n          setReferralCode(referralCode);\n          setUserReferredSelf(false);\n          setReferralCodeInvalid(false);\n        }\n      } catch (error) {\n        setReferralCode(null);\n        setUserReferredSelf(false);\n        setReferralCodeInvalid(true);\n      }\n    };\n    handleReferralCodeInputChange();\n  }, [accountAddress, referralCodeInput]);\n\n  const onChangeReferralCodeInput = value => {\n    if (value.startsWith(config.APP_BASE_URL)) {\n      value = value.replace(config.APP_BASE_URL, '');\n    }\n    setReferralCodeInput(value);\n  };\n\n  useMemo(() => {\n    const setReferralCodeFromURL = () => {\n      if (urlReferralCode) {\n        onChangeReferralCodeInput(urlReferralCode);\n      }\n    };\n    setReferralCodeFromURL();\n  }, [urlReferralCode]);\n\n  const formIsDisabled = contributionStatus && contributionStatus.isProcessing();\n  const insufficientFunds = contributeAmountKSM && contributeAmountKSM.gt(maxContribution);\n  const belowMinContribution = contributeAmountKSM && contributeAmountKSM.lt(new Kusama(Kusama.KSM, new Decimal(1)));\n  const shouldShowInsufficientFundsWarning = insufficientFunds && contributeAmountInput.length > 0;\n  const shouldShowMinContributionWarning = !shouldShowInsufficientFundsWarning && belowMinContribution && contributeAmountInput.length > 0;\n\n  const onClickClaimButton = async () => {\n    if (!contributeAmountKSM || insufficientFunds || belowMinContribution) {\n      return;\n    }\n    try {\n      setContributionStatus(TxStatus.processing(''));\n      const contributeTx = buildContributeTx();\n      const referralTx = referralCode && buildReferralTx();\n      const transactions = referralTx ? [contributeTx, referralTx] : [contributeTx];\n      const txResHandler = makeTxResHandler(api, onContributeSuccess, onContributeFailure, onContributeUpdate);\n      api.tx.utility.batch(transactions).signAndSend(fromAccount, txResHandler);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  if (!polkadotJSInstalled) {\n    return <InstallPJSPrompt />;\n  } else if (!fromAccount) {\n    return <CreateAccountPrompt />;\n  }\n\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p className=\"mb-2 text-sm xl:text-base\">\n        {(!shouldShowInsufficientFundsWarning && !shouldShowMinContributionWarning) && t('Enter your contribution amount')}\n        {shouldShowInsufficientFundsWarning && '❌ ' + t('Insufficient funds')}\n        {shouldShowMinContributionWarning && '❌ ' + t('Minimum contribution is 1 KSM')}\n      </p>\n      <div className=\"flex items-center\">\n        <div className=\"form-input w-4/5 amount relative h-20\">\n          <Input\n            className=\"h-full w-full outline-none\"\n            value={contributeAmountInput && contributeAmountInput.toString()}\n            type='numher'\n            onChange={onChangeContributeAmountInput}\n            disabled={formIsDisabled}\n          />\n          <span onClick={onClickMax} className=\"uppercase cursor-pointer text-xl xl:text-2xl mt-4 right-0 mr-4 max-btn font-semibold absolute px-5 py-3 rounded-md\">\n            {t('Max')}\n          </span>\n        </div>\n        <div className=\"text-2xl xl:text-2xl w-1/5 font-semibold pl-4\">KSM</div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2 text-sm xl:text-base\">\n          {(!referralCodeInvalid && !userReferredSelf) && t('Enter your referral code (optional)')}\n          {userReferredSelf && '❌ ' + t('Cannot refer self')}\n          {referralCodeInvalid && '❌ ' + t('Referral code invalid')}\n        </p>\n        <div className=\"w-full form-input relative h-20\">\n          <Input\n            value={referralCodeInput}\n            onChange={e => onChangeReferralCodeInput(e.target.value)}\n            className=\"w-full h-full outline-none\"\n            disabled={formIsDisabled}\n          />\n        </div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2\">{t('Your Rewards')}</p>\n        <div className=\"reward\">\n          <div className=\"artibute rounded-t-lg calamari-text bg-white\">\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-4 pb-2\">\n              <span>{t('Base')}</span>\n              <span className=\"font-semibold\">{baseReward && baseReward.toString()}</span>\n            </div>\n            <div className=\"flex text-base xl:text-lg items-center justify-between px-3 xl:px-6 py-2 bg-gray\">\n              <div className=\"flex items-center\">\n                <span>{t('Bonus')}</span>\n                <span className=\"text-xs block text-white rounded-sm ml-2 bg-red py-1 px-2\">\n                  {t('Limited Time')}\n                </span>\n              </div>\n              <span className=\"font-semibold\">{earlyBonus && earlyBonus.toString()}</span>\n            </div>\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-2 pb-4\">\n              <span>{t('Referral')}</span>\n              <span className=\"font-semibold\">{referralBonus && referralBonus.toString()}</span>\n            </div>\n          </div>\n          <div className=\"flex text-xl p-6 result justify-between text-white\">\n            <span>{t('Rewards')}:</span>\n            <span>{totalReward && totalReward.toString()}</span>\n          </div>\n        </div>\n      </div>\n      {!contributionStatus ? (\n        <div\n          onClick={onClickClaimButton}\n          className=\"py-6 rounded-lg text-2xl xl:text-2xl cursor-pointer text-center mt-8 mb-4 bg-oriange\">\n          {t('Contribute')}\n        </div>\n      ) : (\n      <TxStatusDisplay txStatus={contributionStatus} transactionType={'Contribution'} />\n      )}\n    </div>\n  );\n}\n\nexport default Contribute;\n","import React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport Kusama from 'types/Kusama';\nimport { Placeholder } from 'semantic-ui-react';\nimport config from '../../../config';\n\nconst GraphPlaceholder = () => {\n  return (\n        <div className=\"py-8\">\n            <Placeholder fluid>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            </Placeholder>\n        </div>\n  );\n};\n\nexport default function Graph ({ allContributions }) {\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const [contributionsByDay, setContributionsByDay] = useState([]);\n\n  useEffect(() => {\n    if (!allContributions) {\n      return;\n    }\n    const getContributionsByDay = () => {\n      const CROWDLOAN_START_DATE = new Date(config.CROWDLOAN_START_TIMESTAMP);\n      const MS_PER_DAY = 1000 * 60 * 60 * 24;\n      const msIntoCrowdloan = new Date() - CROWDLOAN_START_DATE;\n      const daysIntoCrowdloan = Math.ceil(msIntoCrowdloan / MS_PER_DAY);\n      const crowdloanDays = [...Array(daysIntoCrowdloan).keys()].map((i) => new Date(CROWDLOAN_START_DATE.getTime() + (i * MS_PER_DAY)));\n      const contributionsByDay = crowdloanDays.map(day => ({ day: day, totalContributions: Kusama.zero() }));\n      let dayIdx = 0;\n      let currentDate = contributionsByDay[dayIdx].day;\n      allContributions.forEach(contribution => {\n        while (contribution.date > new Date(currentDate.getTime() + MS_PER_DAY)) {\n          dayIdx++;\n          currentDate = contributionsByDay[dayIdx].day;\n        }\n        contributionsByDay[dayIdx].totalContributions = contributionsByDay[dayIdx].totalContributions.add(contribution.amountKSM);\n      });\n      // Add day before crowdloan so that the graph starts at 0\n      const dayBeforeCrowdloan = CROWDLOAN_START_DATE.getTime() - MS_PER_DAY;\n      const contributionsZerothDay = { day: dayBeforeCrowdloan, totalContributions: Kusama.zero() };\n      setContributionsByDay([contributionsZerothDay, ...contributionsByDay]);\n    };\n    getContributionsByDay();\n  }, [allContributions]);\n\n  const options = {\n    animation: false,\n    responsive: true,\n    interaction: {\n      mode: 'index',\n      intersect: false\n    },\n    stacked: false,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      y: {\n        type: 'linear',\n        display: true,\n        position: 'right'\n      }\n    },\n    elements: { point: { radius: 2, hoverRadius: 3 } }\n  };\n\n  const data = contributionsByDay.map((_, i) => contributionsByDay.slice(0, i + 1)\n    .reduce((acc, cur) => acc.add(cur.totalContributions), Kusama.zero()))\n    .map(kusama => kusama.value.toNumber());\n\n  const graphLabels = contributionsByDay.map(singleDayContributions => {\n    const day = new Date(singleDayContributions.day);\n    return day.toLocaleDateString('en-US', dateFormatOptions);\n  });\n\n  const graphData = {\n    labels: graphLabels,\n    datasets: [\n      {\n        label: 'KSM',\n        data: data,\n        borderColor: 'rgba(233, 109, 43, 1)',\n        backgroundColor: 'rgba(233, 109, 43, 1)',\n        yAxisID: 'y',\n        borderWidth: 1\n      }\n    ]\n  };\n\n  if (!allContributions) {\n    return <GraphPlaceholder />;\n  }\n  return (\n        <div className=\"py-4 relative graph-line pt-4\">\n            <span className=\"absolute right-0\">KSM</span>\n            <Line data={graphData} options={options} />\n        </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nconst TableColumnHeader = ({ label, className, width = 'auto', children }) => {\n  return (\n    <div\n      style={{ width }}\n      className={classNames(\n        'box-border text-base inline-block p-2 text-gray font-semibold',\n        className\n      )}>\n      {label || children}\n    </div>\n  );\n};\n\nexport default TableColumnHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableHeaderWrapper = ({ children, className }) => {\n  return (\n    <div className={classNames('flex w-full items-center bottom-border-dashed', className)}>\n      {children}\n    </div>\n  );\n};\n\nTableHeaderWrapper.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n\nexport default TableHeaderWrapper;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport classNames from 'classnames';\n\nconst TableRow = ({ children, className, highlight }) => {\n  return (\n    <div\n      className={classNames('flex w-full items-center', { 'bg-table-row': highlight }, className)}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default TableRow;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport classNames from 'classnames';\n\nconst TableRowItem = ({ children, className, width = '', onTableRow }) => {\n  return (\n    <div\n      style={{ width }}\n      onClick={onTableRow}\n      className={classNames('box-border inline-block p-2', className)}>\n      {children}\n    </div>\n  );\n};\n\nexport default TableRowItem;\n","import React from 'react';\nimport Kusama from 'types/Kusama';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\n\nconst LeaderboardPlaceholder = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"item p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n      <div className=\"py-8\">\n        <Placeholder fluid>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n          <Placeholder.Paragraph>\n            <Placeholder.Line />\n            <Placeholder.Line />\n            <Placeholder.Line />\n          </Placeholder.Paragraph>\n        </Placeholder>\n      </div>\n    </div>\n  );\n};\n\nexport default function Leaderboard ({ allContributions }) {\n  const { t } = useTranslation();\n\n  const getTopThreeContributors = () => {\n    if (!allContributions) {\n      return null;\n    }\n    const contributionsByAddress = {};\n    allContributions.forEach((contribution) => {\n      const addressCurrentContribution =\n        contributionsByAddress[contribution.address] || Kusama.zero();\n      contributionsByAddress[contribution.address] =\n        addressCurrentContribution.add(contribution.amountKSM);\n    });\n\n    return Object.entries(contributionsByAddress)\n      .map(([address, amountKSM]) => ({\n        address: address,\n        amountKSM: amountKSM\n      }))\n      .sort((first, second) => second.amountKSM.value.minus(first.amountKSM.value))\n      .slice(0, 3);\n  };\n  const topThreeContributors = getTopThreeContributors();\n  if (!topThreeContributors) {\n    return <LeaderboardPlaceholder />;\n  }\n\n  return (\n    <div className=\"item flex-auto p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n      <div className=\"overflow-x-auto border-2 rounded-lg\">\n        <div className=\"min-w-table-sm \">\n          <TableHeaderWrapper className=\"px-2\">\n            <TableColumnHeader label={t('Rank')} width=\"20%\" />\n            <TableColumnHeader label={t('Address')} width=\"40%\" />\n            <TableColumnHeader label={t('Contributed')} width=\"40%\" />\n          </TableHeaderWrapper>\n          {topThreeContributors.map((val, i) => (\n            <TableRow className=\"bg-light-gray calamari-text rounded-lg px-2 my-2\">\n              <TableRowItem width=\"20%\">\n                <div className=\"w-8 h-8 bg-purple text-white leading-8 text-center rounded-md\">\n                  {i + 1}\n                </div>\n              </TableRowItem>\n              <TableRowItem width=\"40%\">\n                <div\n                  style={{ textOverflow: 'ellipsis' }}\n                  className=\"overflow-hidden\">\n                  {val.address}\n                </div>\n              </TableRowItem>\n              <TableRowItem width=\"40%\">\n                <span className=\"text-thirdry font-semibold\">\n                  {val.amountKSM.toString()}\n                </span>\n              </TableRowItem>\n            </TableRow>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable multiline-ternary */\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport Calamari from 'types/Calamari';\nimport Graph from './Graph';\nimport Leaderboard from './Leaderboard';\nimport config from 'config';\n\nfunction Crowdloan ({ totalContributionsKSM, allContributions, allContributors, allReferrals }) {\n  const { t } = useTranslation();\n\n  const [totalBaseRewardsKMA, setTotalBaseRewardsKMA] = useState(Calamari.zero());\n  const [totalBonusRewardsKMA, setTotalBonusRewardsKMA] = useState(Calamari.zero());\n  const [totalReferralRewardsKMA, setTotalReferralRewardsKMA] = useState(Calamari.zero());\n  const [totalRewardsKMA, setTotalRewardsKMA] = useState(Calamari.zero());\n\n  useEffect(() => {\n    const getTotalBaseRewardsKMA = () => {\n      if (!totalContributionsKSM) {\n        return Calamari.zero();\n      }\n      return totalContributionsKSM.toKMABaseReward();\n    };\n    setTotalBaseRewardsKMA(getTotalBaseRewardsKMA());\n  }, [totalContributionsKSM]);\n\n  useEffect(() => {\n    const getTotalBonusRewardsKMA = () => {\n      if (!allContributions) {\n        return Calamari.zero();\n      }\n      return allContributions.reduce((acc, contribution) => {\n        if (allContributors.slice(0, config.EARLY_BONUS_TIER_1_CUTOFF).includes(contribution.address)) {\n          return acc.add(contribution.amountKSM.toKMABonusRewardTier1());\n        } else if (allContributors.slice(0, config.EARLY_BONUS_TIER_2_CUTOFF).includes(contribution.address)) {\n          return acc.add(contribution.amountKSM.toKMABonusRewardTier2());\n        } else {\n          return acc;\n        }\n      }, Calamari.zero());\n    };\n    setTotalBonusRewardsKMA(getTotalBonusRewardsKMA());\n  }, [allContributions, allContributors]);\n\n  useEffect(() => {\n    const getTotalReferralRewardsKMA = () => {\n      if (!allContributions || !allReferrals) {\n        return Calamari.zero();\n      }\n      return allContributions.reduce((acc, contribution) => {\n        if (allReferrals[contribution.address]) {\n          const giveReferralReward = contribution.amountKSM.toKMAGaveReferralReward();\n          const receiveReferralReward = contribution.amountKSM.toKMAWasReferredReward();\n          const referralReward = giveReferralReward.add(receiveReferralReward);\n          return acc.add(referralReward);\n        } else {\n          return acc;\n        }\n      }, Calamari.zero());\n    };\n    setTotalReferralRewardsKMA(getTotalReferralRewardsKMA());\n  }, [allContributions, allReferrals]);\n\n  useEffect(() => {\n    const getTotalRewardsKMA = () => {\n      return totalBaseRewardsKMA.add(totalBonusRewardsKMA.add(totalReferralRewardsKMA));\n    };\n    setTotalRewardsKMA(getTotalRewardsKMA());\n  }, [totalBaseRewardsKMA, totalBonusRewardsKMA, totalReferralRewardsKMA]);\n\n  return (\n    <div className=\"content-item lg:flex flex-col h-full mt-16 lg:mt-0 calamari-text crowdloan\">\n      <div className=\"bg-white item p-8 xl:p-10 xl:pb-4\">\n        <h1 className=\"title text-3xl md:text-4xl\">{t('The Crowdloan')}</h1>\n        {!totalContributionsKSM ? (\n          <div className=\"py-2\">\n            <Placeholder fluid>\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder>\n          </div>\n        ) : (\n          <div className=\"flex\">\n            <div className=\"w-3/5\">\n              <p className=\"mb-0 pb-5 total-title\">\n                {t('Total contributions')}\n              </p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n                {totalContributionsKSM.toString()}\n              </span>\n            </div>\n            <div className=\"w-2/5\">\n              <p className=\"mb-0 pb-5 total-title\">{t('Total rewards')}</p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n                {totalRewardsKMA.toString()}\n              </span>\n            </div>\n          </div>\n        )}\n        <Graph allContributions={allContributions} />\n      </div>\n      <Leaderboard allContributions={allContributions} />\n    </div>\n  );\n}\n\nexport default Crowdloan;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport { Pagination, Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\nimport axios from 'axios';\nimport Decimal from 'decimal.js';\nimport Kusama from '../../types/Kusama';\nimport config from '../../config';\nimport { useTranslation } from 'react-i18next';\nimport Calamari from 'types/Calamari';\n\nconst ContributeActivityPlaceholder = () => {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n        <div className=\"mb-4 min-w-table-sm\">\n          <Placeholder fluid>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n          </Placeholder>\n        </div>\n    </div>\n  );\n};\n\nconst ContributeActivity = ({ allContributions }) => {\n  const [totalPages, setTotalPages] = useState(1);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [contributions, setContributions] = useState(null);\n  const [referralCounts, setReferralCounts] = useState(null);\n  const [referralRewards, setReferralRewards] = useState(null);\n\n  const { t } = useTranslation();\n  const PAGE_SIZE = 10;\n\n  const handlePageChange = (_, data) => {\n    setPageNumber(data.activePage);\n  };\n\n  useEffect(() => {\n    const getContributions = () => {\n      axios.post('parachain/contributes', {\n        fund_id: config.FUND_ID,\n        row: PAGE_SIZE,\n        page: pageNumber - 1,\n        order: 'block_num desc',\n        from_history: true\n      }).then(res => {\n        setContributions(res.data.data.contributes || []);\n        setTotalPages(Math.ceil(res.data.data.count / PAGE_SIZE));\n      });\n    };\n    getContributions();\n  }, [pageNumber]);\n\n  useEffect(() => {\n    if (!allContributions || !contributions) {\n      return;\n    }\n    const getReferralCountsAndRewards = () => {\n      const referralsByContribution = contributions.map(currentPageContribution => {\n        return allContributions.filter(someContribution => {\n          return someContribution.referral?.toAddress() === currentPageContribution.who;\n        });\n      });\n      const referralCounts = referralsByContribution.map(referredTransactions => {\n        return referredTransactions.map(transaction => transaction.address).filter((address, i, self) => self.indexOf(address) === i).length;\n      });\n\n      const referralRewards = referralsByContribution.map(referredTransactions => {\n        return referredTransactions.reduce((acc, transaction) => acc.add(transaction.amountKSM.toKMAGaveReferralReward()), Calamari.zero());\n      });\n      return [referralCounts, referralRewards];\n    };\n    const [referralCounts, referralRewards] = getReferralCountsAndRewards();\n    setReferralCounts(referralCounts);\n    setReferralRewards(referralRewards);\n  }, [allContributions, contributions]);\n\n  if (!contributions) {\n    return <ContributeActivityPlaceholder />;\n  }\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n      <div className=\"mb-4 min-w-table-sm\">\n        <TableHeaderWrapper className=\"px-2\">\n          <TableColumnHeader label={t('Address')} width=\"40%\" />\n          <TableColumnHeader label={t('Contributed')} width=\"13%\" />\n          <TableColumnHeader label={t('Rewards')} width=\"17%\" />\n          {(referralCounts && referralRewards) &&\n            <>\n              <TableColumnHeader label={t('Referrals')} width=\"13%\" />\n              <TableColumnHeader label={t('Referral rewards')} width=\"17%\" />\n            </>\n          }\n        </TableHeaderWrapper>\n        {\n          contributions?.map((contribution, i) => {\n            return (\n              <TableRowData\n                contribution={contribution}\n                key={contribution.extrinsic_index}\n                referralCount={referralCounts && referralCounts[i]}\n                referralReward={referralRewards && referralRewards[i]}\n              />\n            );\n          })\n        }\n      </div>\n      <div className=\"flex justify-center pt-2\">\n        <Pagination\n          boundaryRange={0}\n          defaultActivePage={1}\n          siblingRange={2}\n          totalPages={totalPages}\n          onPageChange={handlePageChange}\n          size=\"mini\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TableRowData = ({ contribution, referralCount, referralReward }) => {\n  const contributionKSM = new Kusama(Kusama.ATOMIC_UNITS, new Decimal(contribution.contributing)).toKSM();\n  return (\n    <TableRow className=\"bg-light-gray calamari-text rounded-md px-2 my-2\">\n      <TableRowItem width=\"40%\">\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={config.ADDRESS_BLOCK_EXPLORER_URL + contribution.who}>\n        <div className=\"text-blue-thirdry overflow-hidden\" style={{ textOverflow: 'ellipsis' }}>\n          {contribution.who}\n        </div>\n        </a>\n      </TableRowItem>\n      <TableRowItem width=\"13%\">\n        <span className=\"text-thirdry font-semibold\">{contributionKSM.toString()}</span>\n      </TableRowItem>\n      <TableRowItem width=\"17%\">\n        <span className=\"manta-prime-blue font-semibold\">{contributionKSM.value.mul(10000).toString()} KMA</span>\n      </TableRowItem>\n      {(referralCount !== null && referralReward !== null) &&\n        <>\n          <TableRowItem width=\"13%\">\n            <span className=\"text-thirdry font-semibold\">{referralCount && referralCount}</span>\n          </TableRowItem>\n          <TableRowItem width=\"17%\">\n            <span className=\"text-thirdry font-semibold\">{referralReward && referralReward.toString()}</span>\n          </TableRowItem>\n        </>\n      }\n    </TableRow>\n  );\n};\n\nexport default ContributeActivity;\n","import { web3FromSource } from '@polkadot/extension-dapp';\n\nexport default async function getFromAccount (accountPair, api) {\n  const {\n    address,\n    meta: { source, isInjected }\n  } = accountPair;\n  let fromAcct;\n  // signer is from Polkadot-js browser extension\n  if (isInjected) {\n    const injected = await web3FromSource(source);\n    fromAcct = address;\n    api.setSigner(injected.signer);\n  } else {\n    fromAcct = accountPair;\n  }\n  return fromAcct;\n}\n","class Contribution {\n  constructor (amountKSM, date, address, referral = null) {\n    this.amountKSM = amountKSM;\n    this.date = date;\n    this.address = address;\n    this.referral = referral;\n  }\n}\n\nexport default Contribution;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport Navbar from 'components/Layouts/Navbar';\nimport {\n  Details,\n  Contribute,\n  Crowdloan,\n  ContributeActivity\n} from 'components/HomeComponents';\nimport { useSubstrate, SubstrateContextProvider } from '../../substrate-lib';\nimport { Dimmer, Loader, Grid, Message } from 'semantic-ui-react';\nimport getFromAccount from '../../utils/GetFromAccount';\nimport Decimal from 'decimal.js';\nimport Kusama from 'types/Kusama';\nimport Contribution from 'types/Contribution';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport config from 'config';\nimport { isHex, hexAddPrefix } from '@polkadot/util';\nimport ReferralCode from 'types/ReferralCode';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { web3Enable } from '@polkadot/extension-dapp';\n\nfunction Main () {\n  const { api, apiState, keyring, keyringState, apiError } = useSubstrate();\n\n  axios.defaults.baseURL = config.SUBSCAN_URL;\n  axios.defaults.headers.post['Content-Type'] = 'application/json';\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = true;\n  axios.defaults.headers.post['X-API-Key'] = config.API_KEY;\n  axiosRetry(axios, { retries: 5, retryDelay: _ => 600, retryCondition: error => error.response.status === 429 });\n\n  const { referralCode } = useParams();\n  const { t } = useTranslation();\n\n  const [fromAccount, setFromAccount] = useState(null);\n  const [accountAddress, setAccountAddress] = useState(null);\n  const [accountBalanceKSM, setAccountBalanceKSM] = useState(null);\n  const [userContributions, setUserContributions] = useState(null);\n  const [polkadotJSInstalled, setPolkadotJSInstalled] = useState(null);\n\n  const [totalContributionsKSM, setTotalContributionsKSM] = useState(null);\n  const [allReferrals, setAllReferrals] = useState(null);\n  const [allContributions, setAllContributions] = useState(null);\n  const [allContributors, setAllContributors] = useState(null);\n\n  const accountPair =\n    accountAddress &&\n    keyringState === 'READY' &&\n    keyring.getPair(accountAddress);\n\n  useEffect(() => {\n    const setDefaultAccount = async () => {\n      if (keyringState === 'READY' && keyring.getPairs().length > 0 && !accountAddress) {\n        setAccountAddress(keyring.getPairs()[0].address);\n      }\n    };\n    setDefaultAccount();\n  });\n\n  useMemo(() => {\n    console.log(`Version: ${config.GIT_HASH}`);\n  }, []);\n\n  useEffect(() => {\n    async function loadFromAccount (accountPair) {\n      if (!api || !api.isConnected || !accountPair) {\n        return;\n      }\n      await api.isReady;\n      const fromAccount = await getFromAccount(accountPair, api);\n      setFromAccount(fromAccount);\n    }\n    loadFromAccount(accountPair, api);\n  }, [api, accountPair]);\n\n  useEffect(() => {\n    const getAccountBalance = async () => {\n      if (!api || !api.isConnected || !accountAddress) {\n        return;\n      }\n      await api.isReady;\n      let unsubscribe;\n      api.query.system.account(accountAddress, balance => {\n        const rawBalance = new Decimal(balance.data.free.toString());\n        setAccountBalanceKSM(new Kusama(Kusama.ATOMIC_UNITS, rawBalance).toKSM());\n      })\n        .then(unsub => {\n          unsubscribe = unsub;\n        })\n        .catch(console.error);\n      return () => unsubscribe && unsubscribe();\n    };\n    getAccountBalance();\n  }, [api, accountAddress]);\n\n  useEffect(() => {\n    const checkForPolkadotJS = async () => {\n      const extensions = await web3Enable(config.APP_NAME);\n      setPolkadotJSInstalled(extensions.length > 0);\n    };\n    checkForPolkadotJS();\n  }, []);\n\n  useMemo(() => {\n    const getAllContributors = allContributions => {\n      return allContributions\n        .map(contribution => contribution.address)\n        .filter((address, i, self) => self.indexOf(address) === i);\n    };\n\n    const getAllContributionsAndReferrals = async () => {\n      if (!api) {\n        return;\n      }\n      await api.isReady;\n      let totalPages;\n      let pageIdx = 0;\n      const allContributions = [];\n      const allReferrals = {};\n      do {\n        const res = await axios.post('parachain/contributes', {\n          fund_id: config.FUND_ID,\n          row: 100,\n          page: pageIdx,\n          from_history: true\n        });\n        totalPages = Math.ceil(res.data.data.count / 100);\n        res.data.data.contributes?.forEach(contribution => {\n          const amountKSM = new Kusama(Kusama.ATOMIC_UNITS, new Decimal(contribution.contributing)).toKSM();\n          const referralCode = (isHex(hexAddPrefix(contribution.memo)) && contribution.memo.length === 64) ? ReferralCode.fromHexStr(contribution.memo) : null;\n          const currentContribution = new Contribution(amountKSM, new Date(contribution.block_timestamp * 1000), contribution.who, referralCode);\n          allContributions.push(currentContribution);\n          if (referralCode) {\n            allReferrals[contribution.who] = referralCode.toAddress();\n          }\n        });\n        pageIdx++;\n      } while (pageIdx < totalPages);\n      const allContributors = getAllContributors(allContributions);\n      setAllContributors(allContributors);\n      setAllContributions(allContributions);\n      setAllReferrals(allReferrals);\n    };\n    getAllContributionsAndReferrals();\n  }, [api]);\n\n  useMemo(() => {\n    const getUserContributions = async () => {\n      if (!accountAddress || !allContributions) {\n        return;\n      }\n      setUserContributions(\n        allContributions\n          .filter(contribution => contribution.address === accountAddress)\n          .sort((a, b) => b.date - a.date)\n      );\n    };\n    getUserContributions();\n  }, [accountAddress, allContributions]);\n\n  useEffect(() => {\n    const getTotalContributionsKSM = async () => {\n      const res = await axios.post('parachain/funds', { fund_id: config.FUND_ID, row: 1, page: 0 });\n      setTotalContributionsKSM(new Kusama(Kusama.ATOMIC_UNITS, new Decimal(res.data.data.funds[0].raised)).toKSM());\n    };\n    getTotalContributionsKSM();\n  }, [api]);\n\n  const loader = text =>\n    <Dimmer active>\n      <Loader size='small'>{text}</Loader>\n    </Dimmer>;\n\n  const message = err =>\n    <Grid centered columns={2} padded>\n      <Grid.Column>\n        <Message negative compact floating\n          header='Error Connecting to Substrate'\n          content={`${JSON.stringify(err, null, 4)}`}\n        />\n      </Grid.Column>\n    </Grid>;\n\n  const walletMessage = () =>\n    <Dimmer active>\n      <Message compact floating >\n        <a href='https://polkadot.js.org/extension/'>\n          {t('Install polkadot.js wallet to continue')}\n        </a>\n      </Message>\n    </Dimmer>;\n\n  if (apiState === 'ERROR') {\n    return message(apiError);\n  } else if (keyringState === 'NO_EXTENSION') {\n    return walletMessage();\n  } else if (apiState !== 'READY') {\n    return loader(t('Connecting to Kusama'));\n  }\n\n  return (\n    <div className=\"home-page px-6 sm:px-16 xl:px-40\">\n      <Navbar\n        accountPair={accountPair}\n        accountAddress={accountAddress}\n        setAccountAddress={setAccountAddress}\n        accountBalanceKSM={accountBalanceKSM}\n      />\n      <div className=\"home-content py-6\">\n        <Grid columns=\"three\">\n          <Grid.Row className=\"flex-wrap flex-col flex\">\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Contribute\n                polkadotJSInstalled={polkadotJSInstalled}\n                accountAddress={accountAddress}\n                allContributors={allContributors}\n                urlReferralCode={referralCode}\n                fromAccount={fromAccount}\n                accountBalanceKSM={accountBalanceKSM}\n                totalContributionsKSM={totalContributionsKSM}\n                setUserContributions={setUserContributions}\n                setAccountAddress={setAccountAddress}\n                accountPair={accountPair}\n              />\n            </Grid.Column>\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Details\n                polkadotJSInstalled={polkadotJSInstalled}\n                accountAddress={accountAddress}\n                userContributions={userContributions}\n                allContributions={allContributions}\n                allContributors={allContributors}\n                allReferrals={allReferrals}\n                setAccountAddress={setAccountAddress}\n                accountPair={accountPair}\n              />\n            </Grid.Column>\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Crowdloan\n                totalContributionsKSM={totalContributionsKSM}\n                allContributions={allContributions}\n                allContributors={allContributors}\n                allReferrals={allReferrals}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </div>\n      <ContributeActivity allContributions={allContributions} />\n    </div>\n  );\n}\n\nexport default function HomePage () {\n  return (\n    <SubstrateContextProvider>\n      <Main />\n    </SubstrateContextProvider>\n  );\n}\n","// This component will simply add utility functions to your developer console.\nimport { useSubstrate } from '../';\n\nexport default function DeveloperConsole (props) {\n  const { api, apiState, keyring, keyringState } = useSubstrate();\n  if (apiState === 'READY') { window.api = api; }\n  if (keyringState === 'READY') { window.keyring = keyring; }\n  window.util = require('@polkadot/util');\n  window.utilCrypto = require('@polkadot/util-crypto');\n\n  return null;\n}\n","import React, { useEffect } from 'react';\nimport 'semantic-ui-css/semantic.min.css';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport HomePage from 'pages/HomePage';\nimport { SubstrateContextProvider } from './substrate-lib';\nimport { DeveloperConsole } from './substrate-lib/components';\nimport { useTranslation } from 'react-i18next';\nimport { getLanguage } from 'utils/LocalStorageValue';\n\nconst App = () => {\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    i18n.changeLanguage(getLanguage());\n    // eslint-disable-next-line\n  }, []);\n  return (\n    <SubstrateContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/:referralCode\" component={HomePage} />\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n      <DeveloperConsole />\n    </SubstrateContextProvider>\n  );\n};\nexport default App;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport translationEN from 'common/locales/en.json';\nimport translationCN from 'common/locales/cn.json';\nimport detector from 'i18next-browser-languagedetector';\n\nconst resources = {\n  en: {\n    translation: translationEN\n  },\n  cn: {\n    translation: translationCN\n  }\n};\n\ni18n\n  .use(detector)\n  .use(initReactI18next)\n  .init({\n    resources,\n    lng: 'en',\n    keySeparator: false,\n    interpolation: {\n      escapeValue: false\n    }\n  });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\nimport './common/i18n/i18n';\nimport keyring from '@polkadot/ui-keyring';\nimport { cryptoWaitReady } from '@polkadot/util-crypto';\nimport config from 'config';\nimport { web3Accounts, web3Enable } from '@polkadot/extension-dapp';\n\nconst CalamariCrowdloanUI = async () => {\n  await cryptoWaitReady();\n  const extensions = await web3Enable(config.APP_NAME);\n  console.log('extensions', extensions);\n  let allAccounts = await web3Accounts();\n  allAccounts = allAccounts.map(({ address, meta }) =>\n    ({ address, meta: { ...meta, name: meta.name } }));\n  keyring.loadAll({ isDevelopment: config.DEVELOPMENT_KEYRING }, allAccounts);\n  ReactDOM.render(<App />, document.getElementById('root'));\n};\nCalamariCrowdloanUI();\n"],"sourceRoot":""}