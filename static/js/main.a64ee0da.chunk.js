(this["webpackJsonpcalamari-crowdloan"]=this["webpackJsonpcalamari-crowdloan"]||[]).push([[0],{566:function(e){e.exports=JSON.parse('{"APP_NAME":"Calamari Crowdloan","DEVELOPMENT_KEYRING":false,"RPC":{}}')},586:function(e){e.exports=JSON.parse('{"How it works":"How it works","My Referral code":"My Referral code","Connect wallet":"Connect wallet","Contribute":"Contribute","Enter your contribution amount":"Enter your contribution amount","Max":"Max","Enter your referral code (optional)":"Enter your referral code (optional)","Your Rewards":"Your Rewards","Base":"Base","Bonus":"Bonus","Limited Time":"Limited Time","Referral":"Referral","Rewards":"Rewards","Claim your KMA":"Claim your KMA","Your details":"Your details","Total contributions ":"Total contributions","Total rewards ":"Total rewards","Contribution history":"Contribution history","Referral history":"Referral history","The Crowdloan":"The Crowdloan","Total contributions":"Total contributions","Total rewards":"Total rewards","Leaderboard":"Leaderboard","Rank":"Rank","Address":"Address","Amount (KSM)":"Amount(KSM)","Rewards (KMA)":"Rewards(KMA)","View all board":"View all board"}')},587:function(e){e.exports=JSON.parse('{"How it works":"\u4e86\u89e3\u4f17\u8d37\u89c4\u5219","My Referral code":"\u6211\u7684\u9080\u8bf7\u7801","Connect wallet":"\u8fde\u63a5\u94b1\u5305","Contribute":"\u652f\u6301 Calamari","Enter your contribution amount":"\u8f93\u5165\u652f\u6301\u91cf","Max":"\u6700\u5927","Enter your referral code (optional)":"\u8f93\u5165\u9080\u8bf7\u7801\uff08\u9009\u586b)","Your Rewards":"\u60a8\u7684\u5956\u52b1","Base":"\u57fa\u7840\u5956\u52b1","Bonus":"\u989d\u5916\u5956\u52b1","Limited Time":"\u540d\u989d\u6709\u9650","Referral":"\u9080\u8bf7\u5956\u52b1","Rewards":"\u7d2f\u8ba1\u5956\u52b1","Claim your KMA":"\u9886\u53d6\u60a8\u7684 KMA","Your details":"\u60a8\u7684\u53c2\u4e0e\u6570\u636e","Total contributions ":"\u7d2f\u8ba1\u652f\u6301","Total rewards ":"\u7d2f\u8ba1\u5956\u52b1","Contribution history":"\u652f\u6301\u660e\u7ec6","Referral history":"\u9080\u8bf7\u660e\u7ec6","The Crowdloan":"\u4f17\u8d37\u6570\u636e","Total contributions":"\u652f\u6301\u603b\u91cf","Total rewards":"\u603b\u5956\u52b1","Leaderboard":"\u8d21\u732e\u6392\u884c\u699c","Rank":"\u6392\u540d","Address":"\u5730\u5740","Amount (KSM)":"KSM \u8d21\u732e\u91cf","Rewards (KMA)":"KMA \u5956\u52b1","View all board":"\u67e5\u770b\u5b8c\u6574\u699c\u5355","Select an account":"\u9009\u62e9\u8d26\u6237","Copied to clipboard":"\u590d\u5236\u5230\u7c98\u8d34\u677f","Contribution processing":"\u652f\u6301\u5904\u7406\u4e2d","Contribution finalized":"\u652f\u6301\u786e\u8ba4","Contribution failed":"\u652f\u6301\u5931\u8d25","Referral processing":"\u9080\u8bf7\u5904\u7406\u4e2d","Referral finalized":"\u9080\u8bf7\u6210\u529f","Referral failed":"\u9080\u8bf7\u5931\u8d25","Contributed":"\u652f\u6301","Global Contribution Activity":"\u5168\u7403\u652f\u6301","Referrals":"\u9080\u8bf7\u6570\u91cf","Referral rewards":"\u9080\u8bf7\u5956\u52b1","Connecting to Kusama":"\u8fde\u63a5\u5230 Kusama \u4e2d","Install polkadot.js wallet to continue":"\u8bf7\u5b89\u88c5 polkadot.js \u4ee5\u7ee7\u7eed","Connect wallet to continue":"\u8fde\u63a5\u5230\u94b1\u5305\u4ee5\u7ee7\u7eed","Create a polkadot.js acount to continue(edited)":"\u8bf7\u5148\u5728Polkadot.js\u4e2d\u521b\u5efa\u8d26\u6237"}')},622:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://rococo-rpc.polkadot.io","CROWDLOAN_START_TIMESTAMP":1626580800000,"PARA_ID":2059,"SUBSCAN_URL":"https://rococo.api.subscan.io/api/scan/","FUND_ID":"2059-13","API_KEY":"35770f43091fd396d35192f5b6c499db","BLOCK_EXPLORER_URL":"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Frococo-rpc.polkadot.io#/explorer/query/","APP_BASE_URL":"localhost:8000/"}')},623:function(e){e.exports=JSON.parse('{"Memo":"AccountId"}')},625:function(e,t){},633:function(e,t){},660:function(e,t){},662:function(e,t){},672:function(e,t){},674:function(e,t){},704:function(e,t){},706:function(e,t){},713:function(e,t){},714:function(e,t){},731:function(e,t){},880:function(e,t,n){},882:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(168),i=n.n(c),s=(n(607),n(226)),o=n(53),l=n(19),u=n.n(l),d=n(33),j=n(1),b=n.p+"static/media/calamari-logo.fecd29f4.svg",x=n(919),m=n(564),O="lang",f=function(){var e=localStorage.getItem(O);return e||"en"},h=n(37),p=n(257),v=n(565),w=n.n(v),g=n(914),N=n(909),S=n(260),y=n(366),C=n(566),R=n(622),A=n(623),E=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),M=Object(h.a)(Object(h.a)(Object(h.a)(Object(h.a)({},C),R),E),{},{types:A}),k=n(3),T=w.a.parse(window.location.search).rpc||M.PROVIDER_SOCKET;console.log("Connected socket: ".concat(T));var K={socket:T,jsonrpc:Object(h.a)(Object(h.a)({},p.a),M.RPC),types:M.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},L=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(h.a)(Object(h.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(h.a)(Object(h.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(h.a)(Object(h.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(h.a)(Object(h.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(h.a)(Object(h.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(h.a)(Object(h.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},_=!1,I=r.a.createContext(),P=function(e){var t=Object(h.a)({},K);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(a.useReducer)(L,t),r=Object(j.a)(n,2),c=r[0],i=r[1];return function(e,t){var n=e.apiState,a=e.socket,r=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var i=new g.a(a),s=new N.a({provider:i,types:c,rpc:r});s.on("connected",(function(){t({type:"CONNECT",payload:s}),s.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),s.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),s.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,i),function(e,t){var n=function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(S.b)(M.APP_NAME);case 4:return e.next=6,Object(S.a)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(h.a)(Object(h.a)({},n),{},{name:n.name})}})),y.a.loadAll({isDevelopment:M.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:y.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(_)return t({type:"SET_KEYRING",payload:y.a});_=!0,n()}}(c,i),Object(k.jsx)(I.Provider,{value:c,children:e.children})},D=function(){return Object(h.a)({},Object(a.useContext)(I))},z={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},U=n(73),B=n.n(U),Y=n(911);var F=function(e){var t=e.openModal,n=e.setOpenModal,a=e.acccountAddress,r=e.setAccountAddress,c=D().keyring.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}}));return Object(k.jsxs)(Y.a,{size:"small",className:"address-modal",open:t,onClose:function(){return n(!t)},children:[Object(k.jsxs)(Y.a.Header,{className:"py-2",children:[Object(k.jsx)("div",{className:"text-2xl calamari-text text-center font-semibold",children:"Accounts"}),Object(k.jsx)("div",{className:"text-center purple-text text-lg font-normal",children:"Select an account"})]}),Object(k.jsx)(Y.a.Content,{children:Object(k.jsx)("div",{className:"px-24",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(k.jsx)("div",{onClick:function(){r(e.value),n(!1)},className:B()("border cursor-pointer px-8 mb-4 account rounded-md",{active:a&&a===e.value}),children:Object(k.jsxs)("div",{className:"flex calamari-text items-center content",children:[Object(k.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",shapeRendering:"geometricPrecision",viewBox:"0 0 24 24",height:"24",width:"24",children:[Object(k.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),Object(k.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),Object(k.jsxs)("div",{className:"px-4 py-1",children:[Object(k.jsx)("p",{className:"mb-1 account-name font-semibold calamari-text",children:e.text}),Object(k.jsx)("span",{className:"purple-text account-address",children:e.value})]})]})},t)}))})})]})};function H(e){var t=e.accountPair,n=e.setAccountAddress,r=Object(x.a)().t,c=Object(a.useState)(!1),i=Object(j.a)(c,2),s=i[0],o=i[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{onClick:function(){return o(!0)},className:"menu-item text-base btn lg:text-xl py-3 lg:py-4 px-2 lg:px-8 xl:px-12 btn",children:t?Object(k.jsxs)("div",{className:"flex px-3 items-center",children:[Object(k.jsxs)("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",shapeRendering:"geometricPrecision",viewBox:"0 0 24 24",height:"24",width:"24",children:[Object(k.jsx)("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),Object(k.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),Object(k.jsx)("span",{className:"pl-4",children:t&&t.meta.name.toUpperCase()})]}):r("Connect Wallet")}),s&&Object(k.jsx)(F,{openModal:s,setOpenModal:o,setAccountAddress:n,accountPair:t})]})}function G(e){var t=D(),n=t.api;return t.keyring.getPairs&&n.query?Object(k.jsx)(H,Object(h.a)({},e)):null}var W=n(4),V=n(5),J=n(92),q=n(49),X=n(114),Q=n(94),Z=n(128),$=n(313),ee=function(){function e(t){Object(W.a)(this,e),this.bytes=t}return Object(V.a)(e,[{key:"toAddress",value:function(){return Object(J.a)(this.bytes)}},{key:"toString",value:function(){return Object(X.a)(Object(Q.a)(this.bytes))}}],[{key:"fromAddress",value:function(t){return new e(Object(q.a)(t))}},{key:"fromHexStr",value:function(t){if(64!==t.length)throw Error("Invalid referral code");return new e(Object(Z.a)(Object($.a)(t)))}}]),e}();var te=function(e){var t=e.setAccountAddress,n=(e.accountBalanceKSM,e.accountAddress),r=e.accountPair,c=Object(x.a)(),i=c.t,o=c.i18n,l=Object(a.useState)("US"),u=Object(j.a)(l,2),d=u[0],h=u[1],p=function(e){h(e);var t,n="US"===e?"en":"cn";o.changeLanguage(n),t=n,localStorage.setItem(O,t)};return Object(a.useEffect)((function(){h("en"===f()?"US":"CN")}),[]),Object(k.jsxs)("div",{className:"navbar-content",children:[Object(k.jsx)("div",{className:"logo-content",children:Object(k.jsx)("img",{src:b,alt:"logo"})}),Object(k.jsxs)("div",{className:"navbar-menu",children:[Object(k.jsxs)("div",{className:"hidden lg:flex",children:[Object(k.jsx)(s.b,{to:"#",children:Object(k.jsx)("div",{className:"menu-item text-base lg:text-xl py-2 lg:py-4 px-4 lg:px-8 xl:px-12",children:i("How it works")})}),Object(k.jsx)(s.b,{to:"#",onClick:function(){n&&navigator.clipboard.writeText(M.APP_BASE_URL+ee.fromAddress(n).toString())},children:Object(k.jsx)("div",{className:"menu-item text-base lg:text-xl py-2 lg:py-4 px-4 lg:px-8 xl:px-12",children:i("My Referral code")})})]}),Object(k.jsx)("div",{className:"hidden lg:block",children:Object(k.jsx)(m.a,{selected:d,countries:["US","CN"],customLabels:{US:"EN",CN:"CN"},onSelect:function(e){return p(e)}})}),Object(k.jsx)(G,{setAccountAddress:t,accountPair:r})]})]})},ne=n.p+"static/media/arrow-down.d80e70fa.svg",ae=n.p+"static/media/arrow-up.716601cb.svg",re=n(915),ce=function(){return Object(k.jsx)("div",{className:"py-12",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]}),Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})]})})},ie=function(e){var t=e.userContributions,n=Object(x.a)().t,r=Object(a.useState)(1),c=Object(j.a)(r,2),i=c[0],s=c[1],o=t&&Math.max(Math.ceil(t.length/5,1),1),l=t&&t.slice(5*(i-1),5*i),u={month:"short",day:"numeric"};return t?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"flex justify-between pt-6",children:[Object(k.jsx)("p",{className:"mb-1",children:n("Contribution history")}),Object(k.jsxs)("span",{className:"opacity-50",children:[i," of ",o]})]}),Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:"artibute border-2 py-2 z-10 history relative rounded-lg calamari-text bg-white",children:[l.map((function(e,t){return Object(k.jsxs)("div",{className:B()("flex text-lg justify-between pl-6 pr-10 py-2",{"bg-gray":t%2}),children:[Object(k.jsx)("span",{children:e.date.toLocaleDateString("en-US",u)}),Object(k.jsx)("span",{className:"font-semibold",children:e.amountKSM.toString()})]},t)})),Object(k.jsx)("img",{src:ae,onClick:function(){return i>1&&s(i-1)},alt:"arrow-up",className:"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full"}),Object(k.jsx)("img",{src:ne,onClick:function(){return i<o&&s(i+1)},alt:"arrow-down",className:"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full"})]})})]}):Object(k.jsx)(ce,{})},se=function(){return Object(k.jsx)("div",{className:"py-12",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]}),Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})]})})},oe=function(e){var t=e.userReferrals,n=Object(a.useState)(1),r=Object(j.a)(n,2),c=r[0],i=r[1],s=Math.max(Math.ceil((null===t||void 0===t?void 0:t.length)/5,1),1),o=null===t||void 0===t?void 0:t.slice(5*(c-1),5*c),l={month:"short",day:"numeric"},u=Object(x.a)().t;return t?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"flex justify-between pt-10",children:[Object(k.jsx)("p",{className:"mb-1",children:u("Referral history")}),Object(k.jsxs)("span",{className:"opacity-50",children:[c," of ",s]})]}),Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:"artibute border-2 z-10 history relative rounded-lg calamari-text bg-white",children:[Object(k.jsx)("div",{className:"pt-2",children:o.map((function(e,t){return Object(k.jsxs)("div",{className:B()("flex text-lg justify-between pl-6 pr-10 py-2",{"bg-gray":t%2}),children:[Object(k.jsx)("span",{children:e.date.toLocaleDateString("en-US",l)}),Object(k.jsx)("span",{className:"font-semibold",children:e.amountKSM.toString()})]},t)}))}),Object(k.jsx)("img",{src:ne,alt:"arrow-down",className:"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full",onClick:function(){return c<s&&i(c+1)}}),Object(k.jsx)("img",{src:ae,alt:"arrow-up",className:"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full",onClick:function(){return c>1&&i(c-1)}})]})})]}):Object(k.jsx)(se,{})},le=n(46),ue=n.n(le),de=function(){function e(t){Object(W.a)(this,e),this.amountKMA=t}return Object(V.a)(e,[{key:"add",value:function(t){return new e(this.amountKMA.add(t.amountKMA))}},{key:"toString",value:function(){return this.amountKMA.toNumber().toLocaleString(void 0,e.DISPLAY_OPTIONS)}}],[{key:"zero",value:function(){return new e(new ue.a(0))}}]),e}();de.DISPLAY_OPTIONS={maximumFractionDigits:0,minimumFractionDigits:0};var je=function(){function e(t,n){Object(W.a)(this,e),this.denomination=t,this.value=n}return Object(V.a)(e,[{key:"minus",value:function(t){if(this.denomination!==t.denomination)throw Error("Cannot subtrract; denominations do not match");return new e(this.denomination,this.value.minus(t.value))}},{key:"add",value:function(t){if(this.denomination!==t.denomination)throw Error("Cannot add; denominations do not match");return new e(this.denomination,this.value.add(t.value))}},{key:"min",value:function(t){if(this.denomination!==t.denomination)throw Error("Cannot get min; denominations do not match");return new e(this.denomination,ue.a.min(this.value,t.value))}},{key:"max",value:function(t){if(this.denomination!==t.denomination)throw Error("Cannot get max; denominations do not match");return new e(this.denomination,ue.a.max(this.value,t.value))}},{key:"toAtomicUnits",value:function(){if(this.denomination===e.ATOMIC_UNITS)throw Error("Cannot convert atomic units to atomic units");return new e(e.ATOMIC_UNITS,(t=this.value,new ue.a(10).pow(new ue.a(12)).mul(t)));var t}},{key:"toKSM",value:function(){if(this.denomination===e.KSM)throw Error("Cannot convert KSM to KSM");return new e(e.KSM,this.value.div(new ue.a(10).pow(new ue.a(12))))}},{key:"toKMABaseReward",value:function(){if(this.denomination!==e.KSM)throw Error("Cannot calculate reward from atomic units");return new de(this.value.mul(1e4))}},{key:"toKMABonusReward",value:function(){if(this.denomination!==e.KSM)throw Error("Cannot calculate reward from atomic units");return new de(this.value.mul(500))}},{key:"toKMAReferralReward",value:function(){if(this.denomination!==e.KSM)throw Error("Cannot calculate reward from atomic units");return new de(this.value.mul(500))}},{key:"toString",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.denomination===e.ATOMIC_UNITS)return this.value.toNumber().toLocaleString(void 0,e.DISPLAY_OPTIONS);if(this.denomination===e.KSM){var n=this.value.toNumber().toLocaleString(void 0,e.DISPLAY_OPTIONS);return t&&(n+=" KSM"),n}}}],[{key:"zero",value:function(){return new e(e.KSM,new ue.a(0))}}]),e}();je.ATOMIC_UNITS="atomic units",je.KSM="KSM",je.DISPLAY_OPTIONS={maximumFractionDigits:2,minimumFractionDigits:0};var be=je,xe=function(){return Object(k.jsx)("div",{className:"py-2",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})})},me=function(e){var t=e.userReferrals,n=void 0===t?[]:t,r=e.userContributions,c=e.allContributions,i=e.accountAddress,s=Object(a.useState)(de.zero()),o=Object(j.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(de.zero()),b=Object(j.a)(d,2),m=b[0],O=b[1],f=Object(a.useState)(de.zero()),h=Object(j.a)(f,2),p=h[0],v=h[1],w=Object(a.useState)(de.zero()),g=Object(j.a)(w,2),N=g[0],S=g[1],y=Object(a.useState)(be.zero()),C=Object(j.a)(y,2),R=C[0],A=C[1],E=Object(x.a)().t;return Object(a.useEffect)((function(){!function(){if(r){var e=r.reduce((function(e,t){return t.amountKSM.toKMABaseReward().add(e)}),de.zero());u(e)}}()}),[r]),Object(a.useEffect)((function(){!function(){if(!c)return new de(new ue.a(0));var e=new be(be.KSM,new ue.a(1e3)),t=be.zero(),n=de.zero();c.forEach((function(a){if(a.address===i){var r=e.minus(t).max(be.zero()),c=a.amountKSM.minus(r).max(be.zero()),s=a.amountKSM.minus(c);n=n.add(s.toKMABonusReward())}t=t.add(a.amountKSM)})),O(n)}()}),[c,i]),Object(a.useEffect)((function(){!function(){var e=n.reduce((function(e,t){return e.add(t.amountKSM.toKMAReferralReward())}),de.zero());v(e)}()}),[n]),Object(a.useEffect)((function(){!function(){var e=l.add(m.add(p));S(e)}()}),[l,m,p]),Object(a.useEffect)((function(){!function(){if(r){var e=r.reduce((function(e,t){return e.add(t.amountKSM)}),be.zero());A(e)}}()}),[r]),r?Object(k.jsxs)("div",{className:"flex",children:[Object(k.jsxs)("div",{className:"w-3/5",children:[Object(k.jsx)("p",{className:"mb-0 pb-5",children:E("Total contributions ")}),Object(k.jsx)("span",{className:"purple-text text-lg xl:text-xl font-semibold",children:R.toString()})]}),Object(k.jsxs)("div",{className:"w-2/5",children:[Object(k.jsx)("p",{className:"mb-0 pb-5",children:E("Total rewards ")}),Object(k.jsxs)("span",{className:"purple-text text-lg xl:text-xl font-semibold",children:[N.toString()," KMA"]})]})]}):Object(k.jsx)(xe,{})},Oe=function(){var e=Object(x.a)().t;return Object(k.jsxs)("div",{className:"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:e("Your details")}),Object(k.jsx)("p",{className:"mb-2 text-sm xl:text-base",children:e("Connect wallet to continue")})]})},fe=function(e){var t=e.userContributions,n=e.allContributions,r=e.allReferrals,c=e.accountAddress,i=Object(a.useState)([]),s=Object(j.a)(i,2),o=s[0],l=s[1],u=Object(x.a)().t;return Object(a.useEffect)((function(){!function(){if(r&&n&&c){for(var e=[],t=0,a=Object.entries(r);t<a.length;t++){var i=Object(j.a)(a[t],2),s=i[0];i[1]===c&&e.push(s)}var o=[];n.forEach((function(t){e.includes(t.address)&&o.push(t)})),l(o)}else l(null)}()}),[n,r,c]),c?Object(k.jsxs)("div",{className:"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:u("Your details")}),Object(k.jsx)(me,{userReferrals:o||[],userContributions:t,allContributions:n,accountAddress:c}),Object(k.jsx)(ie,{userContributions:t}),Object(k.jsx)(oe,{userReferrals:o})]}):Object(k.jsx)(Oe,{})},he=n(12),pe=n(907);function ve(e,t){var n=null;return e.filter((function(e){var n=e.event;return t.events.system.ExtrinsicFailed.is(n)})).forEach((function(e){var a=Object(j.a)(e.event.data,2),r=a[0];a[1];if(r.isModule){var c=t.registry.findMetaError(r.asModule),i=c.documentation,s=c.method,o=c.section;n="".concat(o,".").concat(s,": ").concat(i.join(" "))}else n=r.toString()})),n}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return null},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return null},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return null};return function(r){var c,i=r.status,s=r.events;(i.isInBlock||i.isFinalized)&&(c=ve(s,e)),i.isInBlock&&c?n(i.asInBlock.toString(),c):i.isFinalized&&c?n(i.asFinalized.toString(),c):i.isFinalized?t(i.asFinalized.toString()):a(i.type)}}function ge(e){var t,n=e.txStatus,a=e.transactionType,r=void 0===a?"Transacion":a;return n?(n.isProcessing()?t="\ud83d\udd52 ".concat(r," processing"):n.isFinalized()?t="\u2705 ".concat(r," finalized"):n.isFailed()&&(t="\u274c ".concat(r," failed")),console.log(n),Object(k.jsx)("div",{style:{textAlign:"center",overflowWrap:"break-word"},children:n.isProcessing()?Object(k.jsx)("p",{children:t}):Object(k.jsx)("a",{href:M.BLOCK_EXPLORER_URL+n.block,children:Object(k.jsx)("p",{children:t})})})):Object(k.jsx)("div",{})}var Ne="finalized",Se="failed",ye="processing",Ce=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(W.a)(this,e),this.status=t,this.block=n,this.message=a,this.batchNum=null,this.totalBatches=null}return Object(V.a)(e,[{key:"isProcessing",value:function(){return this.status===ye}},{key:"isFinalized",value:function(){return this.status===Ne}},{key:"isFailed",value:function(){return this.status===Se}},{key:"toString",value:function(){var e=this.status;return this.block&&(e+=";\n block hash: ".concat(this.block)),this.message&&(e+=";\n ".concat(this.message)),e}}],[{key:"processing",value:function(t){return new e(ye,null,t)}},{key:"finalized",value:function(t){return new e(Ne,t,null)}},{key:"failed",value:function(t,n){return new e(Se,t,n)}}]),e}();function Re(e){return z.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))}var Ae=n(28),Ee=n.n(Ae),Me=function(){var e=Object(x.a)().t;return Object(k.jsxs)("div",{className:"content-item p-8 xl:p-10 h-full contribute flex-1",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:e("Contribute")}),Object(k.jsx)("p",{className:"mb-2 text-sm xl:text-base",children:e("Connect wallet to continue")})]})};var ke=function(e){var t=e.fromAccount,n=e.accountBalanceKSM,r=e.totalContributionsKSM,c=e.urlReferralCode,i=Object(a.useState)(null),s=Object(j.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(null),d=Object(j.a)(u,2),b=d[0],m=d[1],O=Object(a.useState)(""),f=Object(j.a)(O,2),p=f[0],v=f[1],w=Object(a.useState)(),g=Object(j.a)(w,2),N=g[0],S=g[1],y=Object(a.useState)(),C=Object(j.a)(y,2),R=C[0],A=C[1],E=D().api,T=Object(x.a)().t,K=function(){try{return new be(be.KSM,new ue.a(p))}catch(e){return be.zero()}}(),L=K.toAtomicUnits(),_=function(){if(!r||!K)return null;var e=new be(be.KSM,new ue.a(1e3)).minus(r).max(be.zero()),t=K.minus(e).max(be.zero());return K.minus(t).toKMABonusReward()}(),I=K?R?K.toKMAReferralReward():de.zero():null,P=K?K?K.toKMABaseReward():de.zero():null,z=null;P&&I&&_&&(z=P.add(I.add(_)));var U=function(){var e,n=we(E,B,Y,F);(e=E.tx.crowdloan).contribute.apply(e,Object(he.a)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{emptyAsNull:!0},n=e.map((function(e){return!0})),a=e.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e}));return n.map((function(e,t){return Object(h.a)(Object(h.a)({},e),{},{value:a[t]||null})})).reduce((function(e,n){var a=n.type,r=void 0===a?"string":a,c=n.value;if(null==c||""===c)return t.emptyAsNull?[].concat(Object(he.a)(e),[null]):e;var i=c;return r.indexOf("Vec<")>=0?(i=(i=i.split(",").map((function(e){return e.trim()}))).map((function(e){return Re(r)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(he.a)(e),[i])):(Re(r)&&(i=i.indexOf(".")>=0?Number.parseFloat(i):Number.parseInt(i)),[].concat(Object(he.a)(e),[i]))}),[])}([M.PARA_ID,new Ee.a(L.value.toString()),null]))).signAndSend(t,n)},B=function(e){m(Ce.finalized(e)),R&&V()},Y=function(e,t){m(Ce.failed(e,t))},F=function(e){m(Ce.processing(e))},H=function(e){l(Ce.finalized(e))},G=function(e,t){l(Ce.failed(e,t))},W=function(e){l(Ce.processing(e))},V=function(){var e=E.createType("Memo",R.bytes),n=we(E,H,G,W);E.tx.crowdloan.addMemo(M.PARA_ID,e.toHex()).signAndSend(t,n)};return Object(a.useEffect)((function(){!function(){if(c&&!N)try{var e=ee.fromHexStr(c);A(e),S(c)}catch(t){}}()}),[N,c]),t?Object(k.jsxs)("div",{className:"content-item p-8 xl:p-10 h-full contribute flex-1",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:T("Contribute")}),Object(k.jsx)("p",{className:"mb-2 text-sm xl:text-base",children:T("Enter your contribution amount")}),Object(k.jsxs)("div",{className:"flex items-center",children:[Object(k.jsxs)("div",{className:"form-input w-4/5 amount relative h-20",children:[Object(k.jsx)(pe.a,{className:"h-full w-full outline-none",value:p&&p.toString(),type:"numher",onChange:function(e){var t=e.target.value;isNaN(t)&&""!==t||v(t)}}),Object(k.jsx)("span",{onClick:function(){var e=new be(be.KSM,new ue.a(.1));n&&v(n.minus(e).max(be.zero()).toString(!1))},className:"uppercase cursor-pointer text-xl xl:text-2xl mt-4 right-0 mr-4 max-btn font-semibold absolute px-5 py-3 rounded-md",children:T("Max")})]}),Object(k.jsx)("div",{className:"text-2xl xl:text-2xl w-1/5 font-semibold pl-4",children:"KSM"})]}),Object(k.jsxs)("div",{className:"pt-8",children:[Object(k.jsx)("p",{className:"mb-2 text-sm xl:text-base",children:T("Enter your referral code (optional)")}),Object(k.jsx)("div",{className:"w-full form-input relative h-20",children:Object(k.jsx)(pe.a,{value:N,onChange:function(e){S(e.target.value);try{var t=ee.fromHexStr(e.target.value);A(t)}catch(n){A(null)}},className:"w-full h-full outline-none"})})]}),Object(k.jsxs)("div",{className:"pt-8",children:[Object(k.jsx)("p",{className:"mb-2",children:T("Your Rewards")}),Object(k.jsxs)("div",{className:"reward",children:[Object(k.jsxs)("div",{className:"artibute rounded-t-lg calamari-text bg-white",children:[Object(k.jsxs)("div",{className:"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-4 pb-2",children:[Object(k.jsx)("span",{children:T("Base")}),Object(k.jsxs)("span",{className:"font-semibold",children:[P&&P.toString()," KMA"]})]}),Object(k.jsxs)("div",{className:"flex text-base xl:text-lg items-center justify-between px-3 xl:px-6 py-2 bg-gray",children:[Object(k.jsxs)("div",{className:"flex items-center",children:[Object(k.jsx)("span",{children:T("Bonus")}),Object(k.jsx)("span",{className:"text-xs block text-white rounded-sm ml-2 bg-red py-1 px-2",children:T("Limited Time")})]}),Object(k.jsxs)("span",{className:"font-semibold",children:[_&&_.toString()," KMA"]})]}),Object(k.jsxs)("div",{className:"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-2 pb-4",children:[Object(k.jsx)("span",{children:T("Referral")}),Object(k.jsxs)("span",{className:"font-semibold",children:[I&&I.toString()," KMA"]})]})]}),Object(k.jsxs)("div",{className:"flex text-2xl xl:text-2xl p-6 result justify-between text-white",children:[Object(k.jsxs)("span",{children:[T("Rewards"),":"]}),Object(k.jsxs)("span",{children:[z&&z.toString()," KMA"]})]})]})]}),Object(k.jsx)("div",{onClick:function(){U()},className:"py-6 rounded-lg text-3xl xl:text-3xl cursor-pointer text-center mt-8 mb-4 bg-oriange",children:T("Claim your KMA")}),Object(k.jsx)(ge,{txStatus:b,transactionType:"Contribution"}),Object(k.jsx)(ge,{txStatus:o,transactionType:"Referral"})]}):Object(k.jsx)(Me,{})},Te=n(589),Ke=function(){return Object(k.jsx)("div",{className:"py-8",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]}),Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})]})})};function Le(e){var t=e.allContributions,n={month:"short",day:"numeric"},r=Object(a.useState)([]),c=Object(j.a)(r,2),i=c[0],s=c[1];Object(a.useEffect)((function(){if(t){!function(){var e=new Date(M.CROWDLOAN_START_TIMESTAMP),n=864e5,a=new Date-e,r=Math.ceil(a/n),c=Object(he.a)(Array(r).keys()).map((function(t){return new Date(e.getTime()+t*n)})).map((function(e){return{day:e,totalContributions:be.zero()}})),i=0,o=c[i].day;t.forEach((function(e){for(;e.date>new Date(o.getTime()+n);)i++,o=c[i].day;c[i].totalContributions=c[i].totalContributions.add(e.amountKSM)}));var l={day:e.getTime()-n,totalContributions:be.zero()};s([l].concat(Object(he.a)(c)))}()}}),[t]);var o=i.map((function(e,t){return i.slice(0,t+1).reduce((function(e,t){return e.add(t.totalContributions)}),be.zero())})).map((function(e){return e.value.toNumber()})),l={labels:i.map((function(e){return new Date(e.day).toLocaleDateString("en-US",n)})),datasets:[{label:"KSM",data:o,borderColor:"rgba(233, 109, 43, 1)",backgroundColor:"rgba(233, 109, 43, 1)",yAxisID:"y",borderWidth:1}]};return t?Object(k.jsxs)("div",{className:"py-4 relative graph-line pt-4",children:[Object(k.jsx)("span",{className:"absolute right-0",children:"KSM"}),Object(k.jsx)(Te.a,{data:l,options:{animation:!1,responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{legend:{display:!1}},scales:{y:{type:"linear",display:!0,position:"right"}},elements:{point:{radius:2,hoverRadius:3}}}})]}):Object(k.jsx)(Ke,{})}var _e=function(e){var t=e.label,n=e.className,a=e.width,r=void 0===a?"auto":a,c=e.children;return Object(k.jsx)("div",{style:{width:r},className:B()("box-border text-base inline-block p-2 text-gray font-semibold",n),children:t||c})},Ie=function(e){var t=e.children,n=e.className;return Object(k.jsx)("div",{className:B()("flex w-full items-center bottom-border-dashed",n),children:t})},Pe=function(e){var t=e.children,n=e.className,a=e.highlight;return Object(k.jsx)("div",{className:B()("flex w-full items-center",{"bg-table-row":a},n),children:t})},De=function(e){var t=e.children,n=e.className,a=e.width,r=void 0===a?"":a,c=e.onTableRow;return Object(k.jsx)("div",{style:{width:r},onClick:c,className:B()("box-border inline-block p-2",n),children:t})},ze=function(){var e=Object(x.a)().t;return Object(k.jsxs)("div",{className:"item p-8 mt-6 xl:px-10 xl:py-6 bg-white",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:e("Leaderboard")}),Object(k.jsx)("div",{className:"py-8",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]}),Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})]})})]})};function Ue(e){var t=e.allContributions,n=Object(x.a)().t,a=function(){if(!t)return null;var e={};return t.forEach((function(t){var n=e[t.address]||be.zero();e[t.address]=n.add(t.amountKSM)})),Object.entries(e).map((function(e){var t=Object(j.a)(e,2);return{address:t[0],amountKSM:t[1]}})).sort((function(e,t){return e.amountKSM.value.gt(t.amountKSM.value)})).slice(0,3)}();return a?Object(k.jsxs)("div",{className:"item p-8 mt-6 xl:px-10 xl:py-6 bg-white",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:n("Leaderboard")}),Object(k.jsx)("div",{className:"overflow-x-auto border-2 rounded-lg",children:Object(k.jsxs)("div",{className:"min-w-table-md ",children:[Object(k.jsxs)(Ie,{className:"px-2",children:[Object(k.jsx)(_e,{label:n("Rank"),width:"15%"}),Object(k.jsx)(_e,{label:n("Address"),width:"30%"}),Object(k.jsx)(_e,{label:n("Contributed"),width:"25%"})]}),a.map((function(e,t){return Object(k.jsxs)(Pe,{className:"bg-light-gray calamari-text rounded-lg px-2 my-2",children:[Object(k.jsx)(De,{width:"15%",children:Object(k.jsx)("div",{className:"w-8 h-8 bg-purple text-white leading-8 text-center rounded-md",children:t+1})}),Object(k.jsx)(De,{width:"30%",children:Object(k.jsx)("div",{style:{textOverflow:"ellipsis"},className:"overflow-hidden",children:e.address})}),Object(k.jsx)(De,{width:"25%",children:Object(k.jsx)("span",{className:"text-thirdry font-semibold",children:e.amountKSM.toString()})})]})}))]})})]}):Object(k.jsx)(ze,{})}var Be=function(e){var t=e.totalContributionsKSM,n=e.allContributions,a=Object(x.a)().t,r=function(){if(t){var e=t.value.mul(500);return t.value.gt(1e3)&&(e=5e5),t.value.mul(1e4).add(e)}}();return Object(k.jsxs)("div",{className:"content-item h-full mt-16 lg:mt-0 calamari-text crowdloan",children:[Object(k.jsxs)("div",{className:"bg-white item p-8 xl:p-10 xl:pb-4",children:[Object(k.jsx)("h1",{className:"title text-3xl md:text-4xl",children:a("The Crowdloan")}),t?Object(k.jsxs)("div",{className:"flex",children:[Object(k.jsxs)("div",{className:"w-3/5",children:[Object(k.jsx)("p",{className:"mb-0 pb-5 total-title",children:a("Total contributions")}),Object(k.jsx)("span",{className:"purple-text total-value text-lg font-semibold",children:t.toString()})]}),Object(k.jsxs)("div",{className:"w-2/5",children:[Object(k.jsx)("p",{className:"mb-0 pb-5 total-title",children:a("Total rewards")}),Object(k.jsxs)("span",{className:"purple-text total-value text-lg font-semibold",children:[r.toNumber().toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})," KMA"]})]})]}):Object(k.jsx)("div",{className:"py-2",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})}),Object(k.jsx)(Le,{allContributions:n})]}),Object(k.jsx)(Ue,{allContributions:n})]})},Ye=n(910),Fe=n(108),He=n.n(Fe),Ge=function(){var e=Object(x.a)().t;return Object(k.jsxs)("div",{className:"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl",children:[Object(k.jsx)("h1",{className:"text-2xl title md:text-4xl",children:e("Global Contribution Activity")}),Object(k.jsx)("div",{className:"overflow-x-auto",children:Object(k.jsx)("div",{className:"mb-4 min-w-table",children:Object(k.jsxs)(re.a,{fluid:!0,children:[Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]}),Object(k.jsxs)(re.a.Paragraph,{children:[Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{}),Object(k.jsx)(re.a.Line,{})]})]})})})]})},We=function(e){var t=e.contribution,n=new be(be.ATOMIC_UNITS,new ue.a(t.contributing)).toKSM();return Object(k.jsxs)(Pe,{className:"bg-light-gray calamari-text rounded-lg px-2 my-3",children:[Object(k.jsx)(De,{width:"30%",children:Object(k.jsx)("span",{className:"text-blue-thirdry",children:t.who})}),Object(k.jsx)(De,{width:"15%",children:Object(k.jsx)("span",{className:"text-thirdry font-semibold",children:n.toString()})}),Object(k.jsx)(De,{width:"15%",children:Object(k.jsxs)("span",{className:"manta-prime-blue font-semibold",children:[n.value.mul(1e4).toString()," KMA"]})})]})},Ve=function(){var e=Object(a.useState)(1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),i=Object(j.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(null),u=Object(j.a)(l,2),d=u[0],b=u[1],m=Object(x.a)().t;return Object(a.useEffect)((function(){He.a.post("parachain/contributes",{fund_id:M.FUND_ID,row:10,page:s-1,order:"block_num desc",from_history:!0}).then((function(e){b(e.data.data.contributes||[]),r(Math.ceil(e.data.data.count/10))}))}),[s]),d?Object(k.jsxs)("div",{className:"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl",children:[Object(k.jsx)("h1",{className:"text-2xl title md:text-4xl",children:m("Global Contribution Activity")}),Object(k.jsxs)("div",{className:"overflow-x-auto",children:[Object(k.jsx)("div",{className:"mb-4 min-w-table"}),Object(k.jsxs)("div",{className:"mb-4 min-w-table",children:[Object(k.jsxs)(Ie,{className:"px-2",children:[Object(k.jsx)(_e,{label:"Kusama Account",width:"30%"}),Object(k.jsx)(_e,{label:"Contributed",width:"15%"}),Object(k.jsx)(_e,{label:"Contributed Reward",width:"15%"})]}),null===d||void 0===d?void 0:d.map((function(e){return Object(k.jsx)(We,{contribution:e},e.extrinsic_index)}))]})]}),Object(k.jsx)("div",{className:"flex justify-center pt-2",children:Object(k.jsx)(Ye.a,{boundaryRange:0,defaultActivePage:1,siblingRange:2,totalPages:n,onPageChange:function(e,t){o(t.activePage)},size:"mini"})})]}):Object(k.jsx)(Ge,{})},Je=n(917),qe=n(908),Xe=n(918),Qe=n(916);function Ze(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(d.a)(u.a.mark((function e(t,n){var a,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.address,r=t.meta,c=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(S.c)(c);case 4:s=e.sent,i=a,n.setSigner(s.signer),e.next=10;break;case 9:i=t;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function e(t,n,a){Object(W.a)(this,e),this.amountKSM=t,this.date=n,this.address=a},tt=n(584),nt=n.n(tt),at=n(82);var rt=function(){He.a.defaults.baseURL=M.SUBSCAN_URL,He.a.defaults.headers.post["Content-Type"]="application/json",He.a.defaults.headers.post["Access-Control-Allow-Origin"]=!0,He.a.defaults.headers.post["X-API-Key"]=M.API_KEY,nt()(He.a,{retries:5,retryDelay:function(e){return 1e3},retryCondition:function(e){return 429===e.response.status}});var e=Object(o.f)().referralCode,t=Object(a.useState)(null),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(j.a)(i,2),l=s[0],b=s[1],x=Object(a.useState)(null),m=Object(j.a)(x,2),O=m[0],f=m[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),v=p[0],w=p[1],g=Object(a.useState)(null),N=Object(j.a)(g,2),S=N[0],y=N[1],C=Object(a.useState)(null),R=Object(j.a)(C,2),A=R[0],E=R[1],T=Object(a.useState)(null),K=Object(j.a)(T,2),L=K[0],_=K[1],I=D(),P=I.api,z=I.apiState,U=I.keyring,B=I.keyringState,Y=I.apiError,F=l&&"READY"===B&&U.getPair(l);Object(a.useMemo)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.isReady;case 4:return e.next=6,He.a.post("extrinsics",{call:"contribute",address:l,module:"crowdloan",row:100,page:0});case 6:return t=e.sent,n=t.data.data.extrinsics||[],e.next=10,Promise.all(n.filter((function(e){return e.success})).map((function(e){return{timestamp:1e3*e.block_timestamp,blockNumber:e.block_num,extrinsicIndex:parseInt(e.extrinsic_index.split("-")[1])}})).map(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.rpc.chain.getBlockHash(t.blockNumber);case 2:return n=e.sent,e.next=5,P.rpc.chain.getBlock(n);case 5:if(a=e.sent,!(a.block.extrinsics[t.extrinsicIndex].method.args[0].toNumber()&&t.timestamp>M.CROWDLOAN_START_TIMESTAMP)){e.next=10;break}return r=new be(be.ATOMIC_UNITS,new ue.a(a.block.extrinsics[t.extrinsicIndex].method.args[1].toNumber())).toKSM(),e.abrupt("return",new et(r,new Date(t.timestamp),l));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:a=(a=e.sent).filter((function(e){return void 0!==e})),w(a);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,P]),Object(a.useMemo)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,a,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.isReady;case 4:n=0,a=[],r=[],c={};case 8:return e.next=10,He.a.post("parachain/contributes",{order:"block_num asc",fund_id:M.FUND_ID,row:100,page:n,from_history:!0});case 10:s=e.sent,t=Math.floor(s.data.data.count/100),null===(i=s.data.data.contributes)||void 0===i||i.forEach((function(e){var t=new be(be.ATOMIC_UNITS,new ue.a(e.contributing)).toKSM(),n=Object(at.a)(Object($.a)(e.memo))&&64===e.memo.length?ee.fromHexStr(e.memo):null,i=new et(t,new Date(1e3*e.block_timestamp),e.who);a.push(i),r.push(e.who),n&&(c[e.who]=n.toAddress())})),n++;case 14:if(n<t){e.next=8;break}case 15:_(a),E(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P&&P.isConnected&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,P.isReady;case 4:return e.next=6,Ze(t,P);case 6:n=e.sent,c(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(F,P)}),[P,F]),Object(a.useEffect)((function(){var e;return l&&P.query.system.account(l,(function(e){var t=new ue.a(e.data.free.toString());f(new be(be.ATOMIC_UNITS,t).toKSM())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[P,l]),Object(a.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.a.post("parachain/funds",{fund_id:M.fundID,row:1,page:0});case 2:t=e.sent,y(new be(be.ATOMIC_UNITS,new ue.a(t.data.data.funds[0].raised)).toKSM());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P]);var H,G=function(e){return Object(k.jsx)(Je.a,{active:!0,children:Object(k.jsx)(qe.a,{size:"small",children:e})})};return"ERROR"===z?(H=Y,Object(k.jsx)(Xe.a,{centered:!0,columns:2,padded:!0,children:Object(k.jsx)(Xe.a.Column,{children:Object(k.jsx)(Qe.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(H,null,4))})})})):"READY"!==z?G("Connecting to Substrate"):"READY"!==B?G("Loading accounts (please review polkadot.js authorization)"):Object(k.jsxs)("div",{className:"home-page px-6 sm:px-16 xl:px-40",children:[Object(k.jsx)(te,{accountPair:F,accountAddress:l,setAccountAddress:b,accountBalanceKSM:O}),Object(k.jsx)("div",{className:"home-content py-6",children:Object(k.jsx)(Xe.a,{columns:"three",children:Object(k.jsxs)(Xe.a.Row,{className:"flex-wrap flex-col flex",children:[Object(k.jsx)(Xe.a.Column,{className:"flex-wrap item flex",children:Object(k.jsx)(ke,{urlReferralCode:e,fromAccount:r,accountBalanceKSM:O,totalContributionsKSM:S,setUserContributions:w})}),Object(k.jsx)(Xe.a.Column,{className:"flex-wrap item flex",children:Object(k.jsx)(fe,{accountAddress:l,userContributions:v,allContributions:L,allReferrals:A})}),Object(k.jsx)(Xe.a.Column,{className:"flex-wrap item flex",children:Object(k.jsx)(Be,{totalContributionsKSM:S,allContributions:L})})]})})}),Object(k.jsx)(Ve,{})]})};function ct(e){var t=D(),a=t.api,r=t.apiState,c=t.keyring,i=t.keyringState;return"READY"===r&&(window.api=a),"READY"===i&&(window.keyring=c),window.util=n(8),window.utilCrypto=n(48),null}var it=function(){var e=Object(x.a)().i18n;return Object(a.useEffect)((function(){e.changeLanguage(f())}),[]),Object(k.jsxs)(P,{children:[Object(k.jsx)(s.a,{children:Object(k.jsxs)(o.c,{children:[Object(k.jsx)(o.a,{path:"/:referralCode",component:rt}),Object(k.jsx)(o.a,{path:"/",component:rt})]})}),Object(k.jsx)(ct,{})]})},st=(n(880),n(429)),ot=n(262),lt=n(586),ut=n(587),dt=n(588),jt={en:{translation:lt},cn:{translation:ut}};st.a.use(dt.a).use(ot.e).init({resources:jt,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});st.a;i.a.render(Object(k.jsx)(it,{}),document.getElementById("root"))}},[[882,1,2]]]);
//# sourceMappingURL=main.a64ee0da.chunk.js.map