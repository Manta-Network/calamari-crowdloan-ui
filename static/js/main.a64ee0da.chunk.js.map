{"version":3,"sources":["assets/images/calamari-logo.svg","utils/LocalStorageValue.js","config/index.js","substrate-lib/SubstrateContext.js","substrate-lib/utils.js","components/Layouts/AccountSelectModal.js","components/Layouts/AccountSelectButton.js","types/ReferralCode.js","components/Layouts/Navbar.js","assets/icons/arrow-down.svg","assets/icons/arrow-up.svg","components/HomeComponents/Details/ContributionHistory.js","components/HomeComponents/Details/ReferralHistory.js","types/Calamari.js","types/Kusama.js","components/HomeComponents/Details/DetailsSummary.js","components/HomeComponents/Details/Details.js","utils/GetFailedExtrinsicError.js","utils/MakeTxResHandler.js","TxStatusDisplay.js","utils/TxStatus.js","utils/FormatPayloadForSubstrate.js","components/HomeComponents/Contribute.js","components/HomeComponents/Crowdloan/Graph.js","components/Table/TableColumnHeader/index.js","components/Table/TableHeaderWrapper/index.js","components/Table/TableRow/index.js","components/Table/TableRowItem/index.js","components/HomeComponents/Crowdloan/Leaderboard.js","components/HomeComponents/Crowdloan/Crowdloan.js","components/HomeComponents/ContributeActivity.js","utils/GetFromAccount.js","types/Contribution.js","pages/HomePage/index.js","substrate-lib/components/DeveloperConsole.js","App.js","common/i18n/i18n.js","index.js"],"names":["LANGUAGE_KEY","getLanguage","lang","localStorage","getItem","configEnv","require","types","envVars","reduce","mem","n","undefined","process","slice","config","configCommon","connectedSocket","queryString","parse","window","location","search","rpc","PROVIDER_SOCKET","console","log","INIT_STATE","socket","jsonrpc","RPC","keyring","keyringState","api","apiError","apiState","reducer","state","action","type","payload","Error","loadAccts","SubstrateContext","React","createContext","SubstrateContextProvider","props","initState","forEach","key","useReducer","dispatch","provider","WsProvider","_api","ApiPromise","on","isReady","then","err","connect","asyncLoadAccounts","a","web3Enable","APP_NAME","web3Accounts","allAccounts","map","address","meta","name","loadAll","isDevelopment","DEVELOPMENT_KEYRING","error","loadAccounts","Provider","value","children","useSubstrate","useContext","utils","paramConversion","num","AddressSelectModal","openModal","setOpenModal","acccountAddress","setAccountAddress","keyringOptions","getPairs","account","text","toUpperCase","icon","Modal","size","className","open","onClose","Header","Content","option","index","onClick","classNames","active","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","shapeRendering","viewBox","height","width","d","cx","cy","r","Main","accountPair","t","useTranslation","useState","AccountSelectModal","AccountSelector","query","ReferralCode","bytes","this","encodeAddress","hexStripPrefix","u8aToHex","decodeAddress","hexStr","length","hexToU8a","hexAddPrefix","Navbar","accountAddress","accountBalanceKSM","i18n","selected","setSelected","onChangeLanguage","code","langCode","changeLanguage","setItem","useEffect","src","Logo","alt","to","navigator","clipboard","writeText","APP_BASE_URL","fromAddress","toString","countries","customLabels","US","CN","onSelect","ContributionHistoryPlaceholder","Placeholder","fluid","Paragraph","Line","ContributionHistory","userContributions","currentPageNumberUserContributions","setCurrentPageNumberUserContributions","totalPagesUserContributions","Math","max","ceil","currentPageUserContributions","dateFormatOptions","month","day","contribution","date","toLocaleDateString","amountKSM","ArrowUp","ArrowDown","ReferralHistoryPlaceholder","ReferralHistory","userReferrals","currentPageNumberUserReferrals","setCurrentPageNumberUserReferrals","totalPagesUserReferrals","currentPageUserReferrals","referral","Calamari","amountKMA","other","add","toNumber","toLocaleString","DISPLAY_OPTIONS","Decimal","maximumFractionDigits","minimumFractionDigits","Kusama","denomination","kusama","minus","min","ATOMIC_UNITS","amount","pow","mul","KSM","div","includeUnits","string","DetailsSummaryPlaceholder","DetailsSummary","allContributions","zero","userBaseRewardsKMA","setUserBaseRewardsKMA","userBonusRewardsKMA","setUserBonusRewardsKMA","userReferralRewardsKMA","setUserReferralRewardsKMA","userTotalRewardsKMA","setUserTotalRewardKMA","userTotalContributionsKSM","setUserTotalContributionsKSM","userBaseRewards","acc","cur","toKMABaseReward","getUserBaseRewardsKMA","KSMEligibleForBonus","runningTotalKSM","userBonusRewardKMA","KSMEligibleForBonusRemaining","userKSMIneligibleForBonus","userKSMEligibleForBonus","toKMABonusReward","getUserBonusRewardsKMA","curr","toKMAReferralReward","getUserReferralRewards","getUserTotalRewardsKMA","getUserTotalContributionsKSM","ConnectWalletPrompt","Details","allReferrals","setUserReferrals","referredByUser","Object","entries","referred","push","includes","getUserReferrals","getFailedExtrinsicError","events","errorMessage","filter","event","system","ExtrinsicFailed","is","data","isModule","decoded","registry","findMetaError","asModule","documentation","method","section","join","makeTxResHandler","onSuccess","block","onFailure","onUpdate","message","status","isInBlock","isFinalized","asInBlock","asFinalized","txStatusMesage","txStatus","transactionType","isProcessing","isFailed","style","textAlign","overflowWrap","href","BLOCK_EXPLORER_URL","FINALIZED","FAILED","PROCESSING","TxStatus","batchNum","totalBatches","isNumType","some","el","indexOf","Contribute","fromAccount","totalContributionsKSM","urlReferralCode","referralStatus","setReferralStatus","contributionStatus","setContributionStatus","contributeAmountInput","setContributeAmountInput","referralCodeInput","setReferralCodeInput","referralCode","setReferralCode","contributeAmountKSM","getContributeAmounKSM","contributeAmountAtomicUnits","toAtomicUnits","earlyBonus","getEarlyBonus","referralBonus","baseReward","totalReward","contribute","handleTxResponse","onContributeSuccess","onContributeFailure","onContributeUpdate","tx","crowdloan","opts","emptyAsNull","paramFields","_","paramVal","inputParam","trim","field","ind","memo","converted","split","e","single","Number","parseFloat","parseInt","formatPayloadForSubstrate","PARA_ID","BN","signAndSend","finalized","publishReferral","failed","processing","onReferralSuccess","onReferralFailure","onReferralUpdate","createType","addMemo","toHex","fromHexStr","setReferralCodeFromURL","Input","onChange","input","target","isNaN","estimatedFeeAmount","GraphPlaceholder","Graph","contributionsByDay","setContributionsByDay","CROWDLOAN_START_DATE","Date","CROWDLOAN_START_TIMESTAMP","MS_PER_DAY","msIntoCrowdloan","daysIntoCrowdloan","Array","keys","i","getTime","totalContributions","dayIdx","currentDate","contributionsZerothDay","getContributionsByDay","graphData","labels","singleDayContributions","datasets","label","borderColor","backgroundColor","yAxisID","borderWidth","options","animation","responsive","interaction","mode","intersect","stacked","plugins","legend","display","scales","y","position","elements","point","radius","hoverRadius","TableColumnHeader","TableHeaderWrapper","TableRow","highlight","TableRowItem","onTableRow","LeaderboardPlaceholder","Leaderboard","topThreeContributors","contributionsByAddress","addressCurrentContribution","sort","first","second","gt","getTopThreeContributors","val","textOverflow","Crowdloan","totalRewards","getTotalRewards","ContributeActivityPlaceholder","TableRowData","contributionKSM","contributing","toKSM","who","ContributeActivity","totalPages","setTotalPages","pageNumber","setPageNumber","contributions","setContributions","axios","post","fund_id","FUND_ID","row","page","order","from_history","res","contributes","count","extrinsic_index","Pagination","boundaryRange","defaultActivePage","siblingRange","onPageChange","activePage","getFromAccount","source","isInjected","web3FromSource","injected","fromAcct","setSigner","signer","Contribution","HomePage","defaults","baseURL","SUBSCAN_URL","headers","API_KEY","axiosRetry","retries","retryDelay","retryCondition","response","useParams","setFromAccount","setAccountBalanceKSM","setUserContributions","setTotalContributionsKSM","setAllReferrals","setAllContributions","getPair","useMemo","call","module","extrinsics","Promise","all","ex","success","timestamp","block_timestamp","blockNumber","block_num","extrinsicIndex","chain","getBlockHash","blockHash","getBlock","signedBlock","args","getUserContributions","pageIdx","allAddresses","floor","isHex","currentContribution","toAddress","getAllContributionsAndReferrals","isConnected","loadFromAccount","unsubscribe","balance","rawBalance","free","unsub","catch","fundID","funds","raised","getTotalContributionsKSM","loader","Dimmer","Loader","Grid","centered","columns","padded","Column","Message","negative","compact","floating","header","content","JSON","stringify","Row","DeveloperConsole","util","utilCrypto","App","path","component","resources","en","translation","translationEN","cn","translationCN","use","detector","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a64ee0da.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/calamari-logo.fecd29f4.svg\";","/* eslint-disable no-unneeded-ternary */\nconst LANGUAGE_KEY = 'lang';\n\nexport const getLanguage = () => {\n  const lang = localStorage.getItem(LANGUAGE_KEY);\n  return lang ? lang : 'en';\n};\n\nexport const setLanguage = (lang) => {\n  localStorage.setItem(LANGUAGE_KEY, lang);\n};\n","import configCommon from './common.json';\n// Using `require` as `import` does not support dynamic loading (yet).\nconst configEnv = require(`./${process.env.NODE_ENV}.json`);\nconst types = require('./types.json');\n\n// Accepting React env vars and aggregating them into `config` object.\nconst envVarNames = [\n  'REACT_APP_PROVIDER_SOCKET',\n  'REACT_APP_DEVELOPMENT_KEYRING'\n];\nconst envVars = envVarNames.reduce((mem, n) => {\n  // Remove the `REACT_APP_` prefix\n  if (process.env[n] !== undefined) mem[n.slice(10)] = process.env[n];\n  return mem;\n}, {});\n\nconst config = { ...configCommon, ...configEnv, ...envVars, types };\nexport default config;\n","import React, { useReducer, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport jsonrpc from '@polkadot/types/interfaces/jsonrpc';\nimport queryString from 'query-string';\n\nimport { ApiPromise, WsProvider } from '@polkadot/api';\nimport { web3Accounts, web3Enable } from '@polkadot/extension-dapp';\nimport keyring from '@polkadot/ui-keyring';\n\nimport config from '../config';\n\nconst parsedQuery = queryString.parse(window.location.search);\nconst connectedSocket = parsedQuery.rpc || config.PROVIDER_SOCKET;\nconsole.log(`Connected socket: ${connectedSocket}`);\n\n///\n// Initial state for `useReducer`\n\nconst INIT_STATE = {\n  socket: connectedSocket,\n  jsonrpc: { ...jsonrpc, ...config.RPC },\n  types: config.types,\n  keyring: null,\n  keyringState: null,\n  api: null,\n  apiError: null,\n  apiState: null\n};\n\n///\n// Reducer function for `useReducer`\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'CONNECT_INIT':\n      return { ...state, apiState: 'CONNECT_INIT' };\n\n    case 'CONNECT':\n      return { ...state, api: action.payload, apiState: 'CONNECTING' };\n\n    case 'CONNECT_SUCCESS':\n      return { ...state, apiState: 'READY' };\n\n    case 'CONNECT_ERROR':\n      return { ...state, apiState: 'ERROR', apiError: action.payload };\n\n    case 'LOAD_KEYRING':\n      return { ...state, keyringState: 'LOADING' };\n\n    case 'SET_KEYRING':\n      return { ...state, keyring: action.payload, keyringState: 'READY' };\n\n    case 'KEYRING_ERROR':\n      return { ...state, keyring: null, keyringState: 'ERROR' };\n\n    default:\n      throw new Error(`Unknown type: ${action.type}`);\n  }\n};\n\n///\n// Connecting to the Substrate node\n\nconst connect = (state, dispatch) => {\n  const { apiState, socket, jsonrpc, types } = state;\n  // We only want this function to be performed once\n  if (apiState) return;\n\n  dispatch({ type: 'CONNECT_INIT' });\n\n  const provider = new WsProvider(socket);\n  const _api = new ApiPromise({ provider, types, rpc: jsonrpc });\n\n  // Set listeners for disconnection and reconnection event.\n  _api.on('connected', () => {\n    dispatch({ type: 'CONNECT', payload: _api });\n    // `ready` event is not emitted upon reconnection and is checked explicitly here.\n    _api.isReady.then((_api) => dispatch({ type: 'CONNECT_SUCCESS' }));\n  });\n  _api.on('ready', () => dispatch({ type: 'CONNECT_SUCCESS' }));\n  _api.on('error', err => dispatch({ type: 'CONNECT_ERROR', payload: err }));\n};\n\n///\n// Loading accounts from dev and polkadot-js extension\n\nlet loadAccts = false;\nconst loadAccounts = (state, dispatch) => {\n  const asyncLoadAccounts = async () => {\n    dispatch({ type: 'LOAD_KEYRING' });\n    try {\n      await web3Enable(config.APP_NAME);\n      let allAccounts = await web3Accounts();\n      allAccounts = allAccounts.map(({ address, meta }) =>\n        ({ address, meta: { ...meta, name: meta.name } }));\n      keyring.loadAll({ isDevelopment: config.DEVELOPMENT_KEYRING }, allAccounts);\n      dispatch({ type: 'SET_KEYRING', payload: keyring });\n    } catch (e) {\n      console.error(e);\n      dispatch({ type: 'KEYRING_ERROR' });\n    }\n  };\n\n  const { keyringState } = state;\n  // If `keyringState` is not null `asyncLoadAccounts` is running.\n  if (keyringState) return;\n  // If `loadAccts` is true, the `asyncLoadAccounts` has been run once.\n  if (loadAccts) return dispatch({ type: 'SET_KEYRING', payload: keyring });\n\n  // This is the heavy duty work\n  loadAccts = true;\n  asyncLoadAccounts();\n};\n\nconst SubstrateContext = React.createContext();\n\nconst SubstrateContextProvider = (props) => {\n  // filtering props and merge with default param value\n  const initState = { ...INIT_STATE };\n  const neededPropNames = ['socket', 'types'];\n  neededPropNames.forEach(key => {\n    initState[key] = (typeof props[key] === 'undefined' ? initState[key] : props[key]);\n  });\n\n  const [state, dispatch] = useReducer(reducer, initState);\n  connect(state, dispatch);\n  loadAccounts(state, dispatch);\n\n  return <SubstrateContext.Provider value={state}>\n    {props.children}\n  </SubstrateContext.Provider>;\n};\n\n// prop typechecking\nSubstrateContextProvider.propTypes = {\n  socket: PropTypes.string,\n  types: PropTypes.object\n};\n\nconst useSubstrate = () => ({ ...useContext(SubstrateContext) });\n\nexport { SubstrateContextProvider, useSubstrate };\n","const utils = {\n  paramConversion: {\n    num: [\n      'Compact<Balance>',\n      'BalanceOf',\n      'u8', 'u16', 'u32', 'u64', 'u128',\n      'i8', 'i16', 'i32', 'i64', 'i128'\n    ]\n  }\n};\n\nexport default utils;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Modal } from 'semantic-ui-react';\nimport { useSubstrate } from '../../substrate-lib';\n\nfunction AddressSelectModal ({ openModal, setOpenModal, acccountAddress, setAccountAddress }) {\n  const { keyring } = useSubstrate();\n  // Get the list of accounts we possess the private key for\n  const keyringOptions = keyring.getPairs().map(account => ({\n    key: account.address,\n    value: account.address,\n    text: account.meta.name.toUpperCase(),\n    icon: 'user'\n  }));\n\n  return (\n        <Modal\n            size=\"small\"\n            className=\"address-modal\"\n            open={openModal}\n            onClose={() => setOpenModal(!openModal)}>\n            <Modal.Header className=\"py-2\">\n            <div className=\"text-2xl calamari-text text-center font-semibold\">\n                Accounts\n            </div>\n            <div className=\"text-center purple-text text-lg font-normal\">\n                Select an account\n            </div>\n            </Modal.Header>\n            <Modal.Content>\n            <div className=\"px-24\">\n                {keyringOptions?.map((option, index) => (\n                <div\n                    onClick={() => {\n                      setAccountAddress(option.value);\n                      setOpenModal(false);\n                    }}\n                    className={classNames(\n                      'border cursor-pointer px-8 mb-4 account rounded-md',\n                      {\n                        active:\n                        acccountAddress &&\n                        acccountAddress === option.value\n                      }\n                    )}\n                    key={index}>\n                    <div className=\"flex calamari-text items-center content\">\n                    <svg\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"1.5\"\n                        shapeRendering=\"geometricPrecision\"\n                        viewBox=\"0 0 24 24\"\n                        height=\"24\"\n                        width=\"24\">\n                        <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n                        <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n                    </svg>\n                    <div className=\"px-4 py-1\">\n                        <p className=\"mb-1 account-name font-semibold calamari-text\">\n                        {option.text}\n                        </p>\n                        <span className=\"purple-text account-address\">\n                        {option.value}\n                        </span>\n                    </div>\n                    </div>\n                </div>\n                ))}\n            </div>\n            </Modal.Content>\n        </Modal>\n  );\n}\n\nexport default AddressSelectModal;\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSubstrate } from '../../substrate-lib';\nimport AccountSelectModal from './AccountSelectModal';\n\nfunction Main ({ accountPair, setAccountAddress }) {\n  const { t } = useTranslation();\n  const [openModal, setOpenModal] = useState(false);\n  return (\n    <>\n    <div\n      onClick={() => setOpenModal(true)}\n      className=\"menu-item text-base btn lg:text-xl py-3 lg:py-4 px-2 lg:px-8 xl:px-12 btn\">\n      {accountPair\n        ? (\n        <div className=\"flex px-3 items-center\">\n          <svg\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"1.5\"\n            shapeRendering=\"geometricPrecision\"\n            viewBox=\"0 0 24 24\"\n            height=\"24\"\n            width=\"24\">\n            <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\"></path>\n            <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n          </svg>\n          <span className=\"pl-4\">{accountPair && accountPair.meta.name.toUpperCase()}</span>\n        </div>\n          )\n        : (\n            t('Connect Wallet')\n          )}\n    </div>\n    {\n      openModal &&\n      <AccountSelectModal\n        openModal={openModal}\n        setOpenModal={setOpenModal}\n        setAccountAddress={setAccountAddress}\n        accountPair={accountPair}\n      />\n    }\n    </>\n\n  );\n}\n\n// function BalanceAnnotation (props) {\n//   const { accountSelected, accountBalance } = props;\n\n//   return accountSelected\n//     ? <Label pointing='left'>\n//         <Icon name='money' color='green' />\n//         {accountBalance}\n//       </Label>\n//     : null;\n// }\n\nexport default function AccountSelector (props) {\n  const { api, keyring } = useSubstrate();\n  return keyring.getPairs && api.query ? <Main {...props} /> : null;\n}\n\n// <div ref={contextRef}>\n//     <Menu.Menu position='right' style={{ alignItems: 'center' }}>\n//       { !accountSelected\n//         ? <span>\n//           Add your account with the{' '}\n//           <a\n//             target='_blank'\n//             rel='noopener noreferrer'\n//             href='https://github.com/polkadot-js/extension'\n//           >\n//             Polkadot JS Extension\n//           </a>\n//         </span>\n//         : null }\n//       <CopyToClipboard text={accountSelected}>\n//         <Button\n//           basic\n//           circular\n//           size='large'\n//           icon='user'\n//           color={accountSelected ? 'green' : 'red'}\n//         />\n//       </CopyToClipboard>\n//       <Dropdown\n//         search\n//         selection\n//         clearable\n//         placeholder='Select an account'\n//         options={keyringOptions}\n//         onChange={(_, dropdown) => {\n//           onChange(dropdown.value);\n//         }}\n//         value={accountSelected}\n//       />\n//       <BalanceAnnotation accountSelected={accountSelected} accountBalance={accountBalance}/>\n//     </Menu.Menu>\n// </ div >\n","import { encodeAddress, decodeAddress } from '@polkadot/util-crypto';\nimport { hexToU8a, u8aToHex, hexAddPrefix, hexStripPrefix } from '@polkadot/util';\n\nexport default class ReferralCode {\n  constructor (bytes) {\n    this.bytes = bytes;\n  }\n\n  static fromAddress (address) {\n    return new ReferralCode(decodeAddress(address));\n  }\n\n  static fromHexStr (hexStr) {\n    if (hexStr.length !== 64) {\n      throw Error('Invalid referral code');\n    }\n    return new ReferralCode(hexToU8a(hexAddPrefix(hexStr)));\n  }\n\n  toAddress () {\n    return encodeAddress(this.bytes);\n  }\n\n  toString () {\n    return hexStripPrefix(u8aToHex(this.bytes));\n  }\n}\n","/* eslint-disable multiline-ternary */\n/* eslint-disable react/style-prop-object */\nimport React, { useState, useEffect } from 'react';\nimport Logo from 'assets/images/calamari-logo.svg';\nimport { NavLink } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport ReactFlagsSelect from 'react-flags-select';\nimport { setLanguage, getLanguage } from 'utils/LocalStorageValue';\nimport AccountSelectButton from './AccountSelectButton';\nimport ReferralCode from 'types/ReferralCode';\nimport config from 'config';\n\nfunction Navbar ({ setAccountAddress, accountBalanceKSM, accountAddress, accountPair }) {\n  const { t, i18n } = useTranslation();\n  const [selected, setSelected] = useState('US');\n\n  const onChangeLanguage = (code) => {\n    setSelected(code);\n    const langCode = code === 'US' ? 'en' : 'cn';\n    i18n.changeLanguage(langCode);\n    setLanguage(langCode);\n  };\n\n  useEffect(() => {\n    setSelected(getLanguage() === 'en' ? 'US' : 'CN');\n  }, []);\n\n  const onClickMyReferralCode = () => {\n    accountAddress && navigator.clipboard.writeText(config.APP_BASE_URL + ReferralCode.fromAddress(accountAddress).toString());\n  };\n\n  return (\n    <div className=\"navbar-content\">\n      <div className=\"logo-content\">\n        <img src={Logo} alt=\"logo\" />\n      </div>\n      <div className=\"navbar-menu\">\n        <div className=\"hidden lg:flex\">\n          <NavLink to=\"#\">\n            <div className=\"menu-item text-base lg:text-xl py-2 lg:py-4 px-4 lg:px-8 xl:px-12\">\n              {t('How it works')}\n            </div>\n          </NavLink>\n          <NavLink to=\"#\" onClick={onClickMyReferralCode}>\n            <div className=\"menu-item text-base lg:text-xl py-2 lg:py-4 px-4 lg:px-8 xl:px-12\">\n              {t('My Referral code')}\n            </div>\n          </NavLink>\n        </div>\n        <div className=\"hidden lg:block\">\n          <ReactFlagsSelect\n            selected={selected}\n            countries={['US', 'CN']}\n            customLabels={{ US: 'EN', CN: 'CN' }}\n            onSelect={(code) => onChangeLanguage(code)}\n          />\n        </div>\n        <AccountSelectButton\n          setAccountAddress={setAccountAddress}\n          accountPair={accountPair}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Navbar;\n","export default __webpack_public_path__ + \"static/media/arrow-down.d80e70fa.svg\";","export default __webpack_public_path__ + \"static/media/arrow-up.716601cb.svg\";","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nconst ContributionHistoryPlaceholder = () => {\n  return (\n  <div className=\"py-12\">\n    <Placeholder fluid>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n    </Placeholder>\n  </div>\n  );\n};\n\nconst ContributionHistory = ({ userContributions }) => {\n  const { t } = useTranslation();\n  const PAGE_SIZE = 5;\n  const [currentPageNumberUserContributions, setCurrentPageNumberUserContributions] = useState(1);\n  const totalPagesUserContributions = userContributions && Math.max(Math.ceil(userContributions.length / 5, 1), 1);\n  const currentPageUserContributions = userContributions && userContributions.slice((currentPageNumberUserContributions - 1) * PAGE_SIZE, currentPageNumberUserContributions * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n\n  if (!userContributions) {\n    return <ContributionHistoryPlaceholder />;\n  }\n  return (\n        <>\n        <div className=\"flex justify-between pt-6\">\n        <p className=\"mb-1\">{t('Contribution history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserContributions} of {totalPagesUserContributions}</span>\n        </div>\n        <div>\n        <div className=\"artibute border-2 py-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          {currentPageUserContributions.map((contribution, index) => (\n            <div\n              key={index}\n              className={classNames(\n                'flex text-lg justify-between pl-6 pr-10 py-2',\n                { 'bg-gray': index % 2 }\n              )}>\n              <span>{contribution.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n              <span className=\"font-semibold\">{contribution.amountKSM.toString()}</span>\n            </div>\n          ))}\n          <img\n            src={ArrowUp}\n            onClick={() =>\n              currentPageNumberUserContributions > 1 && setCurrentPageNumberUserContributions(currentPageNumberUserContributions - 1)\n            }\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n          />\n          <img\n            src={ArrowDown}\n            onClick={() =>\n              currentPageNumberUserContributions < totalPagesUserContributions && setCurrentPageNumberUserContributions(currentPageNumberUserContributions + 1)\n            }\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n          />\n        </div>\n      </div>\n      </>\n  );\n};\n\nexport default ContributionHistory;\n","/* eslint-disable multiline-ternary */\nimport React, { useState } from 'react';\nimport ArrowDown from 'assets/icons/arrow-down.svg';\nimport ArrowUp from 'assets/icons/arrow-up.svg';\nimport { Placeholder } from 'semantic-ui-react';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\n\nconst ReferralHistoryPlaceholder = () => {\n  return (\n  <div className=\"py-12\">\n    <Placeholder fluid>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n      <Placeholder.Paragraph>\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder.Paragraph>\n    </Placeholder>\n  </div>\n  );\n};\n\nconst ReferralHistory = ({ userReferrals }) => {\n  const [currentPageNumberUserReferrals, setCurrentPageNumberUserReferrals] = useState(1);\n\n  const PAGE_SIZE = 5;\n  const totalPagesUserReferrals = Math.max(Math.ceil(userReferrals?.length / 5, 1), 1);\n  const currentPageUserReferrals = userReferrals?.slice((currentPageNumberUserReferrals - 1) * PAGE_SIZE, currentPageNumberUserReferrals * PAGE_SIZE);\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const { t } = useTranslation();\n\n  if (!userReferrals) {\n    return <ReferralHistoryPlaceholder />;\n  }\n  return (\n        <>\n        <div className=\"flex justify-between pt-10\">\n        <p className=\"mb-1\">{t('Referral history')}</p>\n        <span className=\"opacity-50\">{currentPageNumberUserReferrals} of {totalPagesUserReferrals}</span>\n      </div>\n      <div>\n        <div className=\"artibute border-2 z-10 history relative rounded-lg calamari-text bg-white\">\n          <div className='pt-2'>\n            {currentPageUserReferrals.map((referral, index) => (\n\n              <div\n                key={index}\n                className={classNames(\n                  'flex text-lg justify-between pl-6 pr-10 py-2',\n                  { 'bg-gray': index % 2 }\n                )}>\n                <span>{referral.date.toLocaleDateString('en-US', dateFormatOptions)}</span>\n                <span className=\"font-semibold\">{referral.amountKSM.toString()}</span>\n              </div>\n            ))\n            }\n          </div>\n          <img\n            src={ArrowDown}\n            alt=\"arrow-down\"\n            className=\"h-8 w-8 arrow-down absolute cursor-pointer z-20 p-2 mb-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals < totalPagesUserReferrals && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals + 1)\n            }\n          />\n          <img\n            src={ArrowUp}\n            alt=\"arrow-up\"\n            className=\"h-8 w-8 arrow-down absolute z-20 cursor-pointer top-0 p-2 mt-12 bg-white rounded-full\"\n            onClick={() =>\n              currentPageNumberUserReferrals > 1 && setCurrentPageNumberUserReferrals(currentPageNumberUserReferrals - 1)\n            }\n          />\n        </div>\n      </div>\n      </>\n  );\n};\n\nexport default ReferralHistory;\n","import Decimal from 'decimal.js';\n\nexport default class Calamari {\n    static DISPLAY_OPTIONS = { maximumFractionDigits: 0, minimumFractionDigits: 0 };\n\n    constructor (amountKMA) {\n      this.amountKMA = amountKMA;\n    }\n\n    static zero () {\n      return new Calamari(new Decimal(0));\n    }\n\n    add (other) {\n      return new Calamari(this.amountKMA.add(other.amountKMA));\n    }\n\n    toString () {\n      return this.amountKMA.toNumber().toLocaleString(undefined, Calamari.DISPLAY_OPTIONS);\n    }\n}\n","import Decimal from 'decimal.js';\nimport Calamari from './Calamari';\n\nconst KUSAMA_CHAIN_DECIMALS = 12;\n\nfunction kusamaToAtomicUnits (amount) {\n  return new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)).mul(amount);\n}\n\nfunction atomicUnitsToKSM (amount) {\n  return amount.div(new Decimal(10).pow(new Decimal(KUSAMA_CHAIN_DECIMALS)));\n}\n\nclass Kusama {\n    static ATOMIC_UNITS = 'atomic units'\n    static KSM = 'KSM'\n    static DISPLAY_OPTIONS = { maximumFractionDigits: 2, minimumFractionDigits: 0 };\n\n    constructor (denomination, value) {\n      this.denomination = denomination;\n      this.value = value;\n    }\n\n    static zero () {\n      return new Kusama(Kusama.KSM, new Decimal(0));\n    }\n\n    minus (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot subtrract; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, this.value.minus(kusama.value));\n      }\n    }\n\n    add (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot add; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, this.value.add(kusama.value));\n      }\n    }\n\n    min (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get min; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, Decimal.min(this.value, kusama.value));\n      }\n    }\n\n    max (kusama) {\n      if (this.denomination !== kusama.denomination) {\n        throw Error('Cannot get max; denominations do not match');\n      } else {\n        return new Kusama(this.denomination, Decimal.max(this.value, kusama.value));\n      }\n    }\n\n    toAtomicUnits () {\n      if (this.denomination === Kusama.ATOMIC_UNITS) {\n        throw Error('Cannot convert atomic units to atomic units');\n      }\n      return new Kusama(Kusama.ATOMIC_UNITS, kusamaToAtomicUnits(this.value));\n    }\n\n    toKSM () {\n      if (this.denomination === Kusama.KSM) {\n        throw Error('Cannot convert KSM to KSM');\n      }\n      return new Kusama(Kusama.KSM, atomicUnitsToKSM(this.value));\n    }\n\n    toKMABaseReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(10000));\n    }\n\n    toKMABonusReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(500));\n    }\n\n    toKMAReferralReward () {\n      if (this.denomination !== Kusama.KSM) {\n        throw Error('Cannot calculate reward from atomic units');\n      }\n      return new Calamari(this.value.mul(500));\n    }\n\n    toString (includeUnits = true) {\n      if (this.denomination === Kusama.ATOMIC_UNITS) {\n        return this.value.toNumber().toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n      } else if (this.denomination === Kusama.KSM) {\n        let string = this.value.toNumber().toLocaleString(undefined, Kusama.DISPLAY_OPTIONS);\n        if (includeUnits) {\n          string = string + ' KSM';\n        }\n        return string;\n      }\n    }\n}\n\nexport default Kusama;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Kusama from 'types/Kusama';\nimport Decimal from 'decimal.js';\nimport Calamari from 'types/Calamari';\nimport { Placeholder } from 'semantic-ui-react';\n\nconst DetailsSummaryPlaceholder = () => {\n  return (\n    <div className=\"py-2\">\n      <Placeholder fluid>\n        <Placeholder.Line />\n        <Placeholder.Line />\n      </Placeholder>\n    </div>\n  );\n};\n\nconst DetailsSummary = ({ userReferrals = [], userContributions, allContributions, accountAddress }) => {\n  const [userBaseRewardsKMA, setUserBaseRewardsKMA] = useState(Calamari.zero());\n  const [userBonusRewardsKMA, setUserBonusRewardsKMA] = useState(Calamari.zero());\n  const [userReferralRewardsKMA, setUserReferralRewardsKMA] = useState(Calamari.zero());\n  const [userTotalRewardsKMA, setUserTotalRewardKMA] = useState(Calamari.zero());\n  const [userTotalContributionsKSM, setUserTotalContributionsKSM] = useState(Kusama.zero());\n\n  const { t } = useTranslation();\n  useEffect(() => {\n    const getUserBaseRewardsKMA = () => {\n      if (!userContributions) {\n        return;\n      }\n      const userBaseRewards = userContributions.reduce((acc, cur) => cur.amountKSM.toKMABaseReward().add(acc), Calamari.zero());\n      setUserBaseRewardsKMA(userBaseRewards);\n    };\n    getUserBaseRewardsKMA();\n  }, [userContributions]);\n\n  useEffect(() => {\n    const getUserBonusRewardsKMA = () => {\n      if (!allContributions) {\n        return new Calamari(new Decimal(0));\n      }\n\n      const KSMEligibleForBonus = new Kusama(Kusama.KSM, new Decimal(1000)); // todo: is this number correct??\n      let runningTotalKSM = Kusama.zero();\n      let userBonusRewardKMA = Calamari.zero();\n      allContributions.forEach(contribution => {\n        if (contribution.address === accountAddress) {\n          const KSMEligibleForBonusRemaining = KSMEligibleForBonus.minus(runningTotalKSM).max(Kusama.zero());\n          const userKSMIneligibleForBonus = contribution.amountKSM.minus(KSMEligibleForBonusRemaining).max(Kusama.zero());\n          const userKSMEligibleForBonus = contribution.amountKSM.minus(userKSMIneligibleForBonus);\n\n          userBonusRewardKMA = userBonusRewardKMA.add(userKSMEligibleForBonus.toKMABonusReward());\n        }\n        runningTotalKSM = runningTotalKSM.add(contribution.amountKSM);\n      });\n      setUserBonusRewardsKMA(userBonusRewardKMA);\n    };\n    getUserBonusRewardsKMA();\n  }, [allContributions, accountAddress]);\n\n  useEffect(() => {\n    const getUserReferralRewards = () => {\n      const userReferralRewardsKMA = userReferrals.reduce((acc, curr) => acc.add(curr.amountKSM.toKMAReferralReward()), Calamari.zero());\n      setUserReferralRewardsKMA(userReferralRewardsKMA);\n    };\n    getUserReferralRewards();\n  }, [userReferrals]);\n\n  useEffect(() => {\n    const getUserTotalRewardsKMA = () => {\n      const userTotalRewardsKMA = userBaseRewardsKMA.add(userBonusRewardsKMA.add(userReferralRewardsKMA));\n      setUserTotalRewardKMA(userTotalRewardsKMA);\n    };\n    getUserTotalRewardsKMA();\n  }, [userBaseRewardsKMA, userBonusRewardsKMA, userReferralRewardsKMA]);\n\n  useEffect(() => {\n    const getUserTotalContributionsKSM = () => {\n      if (!userContributions) {\n        return;\n      }\n      const userTotalContributionsKSM = userContributions.reduce((acc, curr) => acc.add(curr.amountKSM), Kusama.zero());\n      setUserTotalContributionsKSM(userTotalContributionsKSM);\n    };\n    getUserTotalContributionsKSM();\n  }, [userContributions]);\n\n  if (!userContributions) {\n    return <DetailsSummaryPlaceholder />;\n  }\n  return (\n    <div className=\"flex\">\n      <div className=\"w-3/5\">\n        <p className=\"mb-0 pb-5\">{t('Total contributions ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalContributionsKSM.toString()}\n        </span>\n      </div>\n      <div className=\"w-2/5\">\n        <p className=\"mb-0 pb-5\">{t('Total rewards ')}</p>\n        <span className=\"purple-text text-lg xl:text-xl font-semibold\">\n          {userTotalRewardsKMA.toString()} KMA\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default DetailsSummary;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ContributionHistory from './ContributionHistory';\nimport ReferralHistory from './ReferralHistory';\nimport DetailsSummary from './DetailsSummary';\n\nconst ConnectWalletPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n    <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n    <p className=\"mb-2 text-sm xl:text-base\">\n      {t('Connect wallet to continue')}\n    </p>\n    </div>\n  );\n};\n\nconst Details = ({ userContributions, allContributions, allReferrals, accountAddress }) => {\n  const [userReferrals, setUserReferrals] = useState([]);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const getUserReferrals = () => {\n      if (!allReferrals || !allContributions || !accountAddress) {\n        setUserReferrals(null);\n        return;\n      }\n      const referredByUser = [];\n      for (const [referred, referredBy] of Object.entries(allReferrals)) {\n        if (referredBy === accountAddress) {\n          referredByUser.push(referred);\n        }\n      }\n      const userReferrals = [];\n      allContributions.forEach(contribution => {\n        if (referredByUser.includes(contribution.address)) {\n          userReferrals.push(contribution);\n        }\n      });\n      setUserReferrals(userReferrals);\n    };\n    getUserReferrals();\n  }, [allContributions, allReferrals, accountAddress]);\n\n  if (!accountAddress) {\n    return <ConnectWalletPrompt/>;\n  }\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full mt-8 lg:mt-0 bg-white calamari-text details\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Your details')}</h1>\n      <DetailsSummary\n        userReferrals={userReferrals || []}\n        userContributions={userContributions}\n        allContributions={allContributions}\n        accountAddress={accountAddress}\n      />\n      <ContributionHistory userContributions={userContributions} />\n      <ReferralHistory userReferrals={userReferrals} />\n    </div>\n  );\n};\n\nexport default Details;\n","export default function getFailedExtrinsicError (events, api) {\n  let errorMessage = null;\n  events.filter(({ event }) =>\n    api.events.system.ExtrinsicFailed.is(event))\n    .forEach(({ event: { data: [error, info] } }) => {\n      if (error.isModule) {\n        // for module errors, we have the section indexed, lookup\n        const decoded = api.registry.findMetaError(error.asModule);\n        const { documentation, method, section } = decoded;\n        errorMessage = `${section}.${method}: ${documentation.join(' ')}`;\n      } else {\n      // Other, CannotLookup, BadOrigin, no extra info\n        errorMessage = error.toString();\n      }\n    });\n  return errorMessage;\n}\n","import getFailedExtrinsicError from './GetFailedExtrinsicError';\n\nexport function makeTxResHandler (\n  api,\n  onSuccess = block => null,\n  onFailure = (block, error) => null,\n  onUpdate = message => null\n) {\n  return ({ status, events }) => {\n    let error;\n    if (status.isInBlock || status.isFinalized) {\n      error = getFailedExtrinsicError(events, api);\n    }\n    if (status.isInBlock && error) {\n      onFailure(status.asInBlock.toString(), error);\n    } else if (status.isFinalized && error) {\n      onFailure(status.asFinalized.toString(), error);\n    } else if (status.isFinalized) {\n      onSuccess(status.asFinalized.toString());\n    } else {\n      onUpdate(status.type);\n    }\n  };\n}\n\n// export function makeDefaultTxResHandler (\n//   api,\n//   setStatus\n// ) {\n//   const onSuccess = block => {\n//     console.log('success');\n//     setStatus(TxStatus.finalized(block));\n//   };\n//   const onFailure = (block, error) => {\n//     console.log('failure');\n//     console.log(error);\n//     setStatus(TxStatus.failed(block, error));\n//   };\n//   const onUpdate = message => {\n//     setStatus(TxStatus.processing(message));\n//   };\n//   return makeTxResHandler(api, onSuccess, onFailure, onUpdate);\n// }\n","import React from 'react';\nimport config from 'config';\n\nexport default function Main ({ txStatus, transactionType = 'Transacion' }) {\n  if (!txStatus) {\n    return <div/>;\n  }\n\n  let txStatusMesage;\n  if (txStatus.isProcessing()) {\n    txStatusMesage = `🕒 ${transactionType} processing`;\n  } else if (txStatus.isFinalized()) {\n    txStatusMesage = `✅ ${transactionType} finalized`;\n  } else if (txStatus.isFailed()) {\n    txStatusMesage = `❌ ${transactionType} failed`;\n  }\n  console.log(txStatus);\n\n  return (\n    <div style={{ textAlign: 'center', overflowWrap: 'break-word' }}>\n      {!txStatus.isProcessing()\n        ? <a href={config.BLOCK_EXPLORER_URL + txStatus.block}>\n      <p>\n        {txStatusMesage}\n      </p>\n      </a>\n        : <p>\n            {txStatusMesage}\n          </p>\n      }\n    </div>\n  );\n}\n","const FINALIZED = 'finalized';\nconst FAILED = 'failed';\nconst PROCESSING = 'processing';\n\nexport default class TxStatus {\n  constructor (status, block = null, message = null) {\n    this.status = status;\n    this.block = block;\n    this.message = message;\n    this.batchNum = null;\n    this.totalBatches = null;\n  }\n\n  static processing (message) {\n    return new TxStatus(PROCESSING, null, message);\n  }\n\n  static finalized (block) {\n    return new TxStatus(FINALIZED, block, null);\n  }\n\n  static failed (block, message) {\n    return new TxStatus(FAILED, block, message);\n  }\n\n  isProcessing () {\n    return this.status === PROCESSING;\n  }\n\n  isFinalized () {\n    return this.status === FINALIZED;\n  }\n\n  isFailed () {\n    return this.status === FAILED;\n  }\n\n  toString () {\n    let message = this.status;\n    if (this.block) {\n      message += `;\\n block hash: ${this.block}`;\n    }\n    if (this.message) {\n      message += `;\\n ${this.message}`;\n    }\n    return message;\n  }\n}\n","import utils from '../substrate-lib/utils';\n\nfunction isNumType (type) {\n  return utils.paramConversion.num.some(el => type.indexOf(el) >= 0);\n}\n\nexport default function formatPayloadForSubstrate (payload, opts = { emptyAsNull: true }) {\n  const paramFields = payload.map(_ => true);\n\n  // if `opts.emptyAsNull` is true, empty param value will be added to res as `null`.\n  //   Otherwise, it will not be added\n  const paramVal = payload.map(inputParam => {\n    // To cater the js quirk that `null` is a type of `object`.\n    if (typeof inputParam === 'object' && inputParam !== null && typeof inputParam.value === 'string') {\n      return inputParam.value.trim();\n    } else if (typeof inputParam === 'string') {\n      return inputParam.trim();\n    }\n    return inputParam;\n  });\n  const params = paramFields.map((field, ind) => ({ ...field, value: paramVal[ind] || null }));\n\n  return params.reduce((memo, { type = 'string', value }) => {\n    if (value == null || value === '') return (opts.emptyAsNull ? [...memo, null] : memo);\n\n    let converted = value;\n\n    // Deal with a vector\n    if (type.indexOf('Vec<') >= 0) {\n      converted = converted.split(',').map(e => e.trim());\n      converted = converted.map(single => isNumType(type)\n        ? (single.indexOf('.') >= 0 ? Number.parseFloat(single) : Number.parseInt(single))\n        : single\n      );\n      return [...memo, converted];\n    }\n\n    // Deal with a single value\n    if (isNumType(type)) {\n      converted = converted.indexOf('.') >= 0 ? Number.parseFloat(converted) : Number.parseInt(converted);\n    }\n    return [...memo, converted];\n  }, []);\n}\n","/* eslint-disable multiline-ternary */\nimport React, { useEffect, useState } from 'react';\nimport { Input } from 'semantic-ui-react';\nimport { useSubstrate } from '../../substrate-lib';\nimport Decimal from 'decimal.js';\nimport { makeTxResHandler } from '../../utils/MakeTxResHandler';\nimport Kusama from '../../types/Kusama';\nimport TxStatusDisplay from '../../TxStatusDisplay';\nimport TxStatus from '../../utils/TxStatus';\nimport formatPayloadForSubstrate from 'utils/FormatPayloadForSubstrate';\nimport BN from 'bn.js';\nimport { useTranslation } from 'react-i18next';\nimport Calamari from 'types/Calamari';\nimport config from 'config';\nimport ReferralCode from 'types/ReferralCode';\n\nconst ConnectWalletPrompt = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p className=\"mb-2 text-sm xl:text-base\">\n        {t('Connect wallet to continue')}\n      </p>\n    </div>\n  );\n};\n\nfunction Contribute ({ fromAccount, accountBalanceKSM, totalContributionsKSM, urlReferralCode }) {\n  const [referralStatus, setReferralStatus] = useState(null);\n  const [contributionStatus, setContributionStatus] = useState(null);\n  const [contributeAmountInput, setContributeAmountInput] = useState('');\n  const [referralCodeInput, setReferralCodeInput] = useState();\n  const [referralCode, setReferralCode] = useState();\n  const { api } = useSubstrate();\n  const { t } = useTranslation();\n\n  const getContributeAmounKSM = () => {\n    try {\n      return new Kusama(Kusama.KSM, new Decimal(contributeAmountInput));\n    } catch (error) {\n      return Kusama.zero();\n    }\n  };\n  const contributeAmountKSM = getContributeAmounKSM();\n  const contributeAmountAtomicUnits = contributeAmountKSM.toAtomicUnits();\n\n  const getEarlyBonus = () => {\n    if (!totalContributionsKSM || !contributeAmountKSM) {\n      return null;\n    }\n    const KSMEligibleForBonus = new Kusama(Kusama.KSM, new Decimal(1000));\n    const KSMEligibleForBonusRemaining = KSMEligibleForBonus.minus(totalContributionsKSM).max(Kusama.zero());\n    const userKSMIneligibleForBonus = contributeAmountKSM.minus(KSMEligibleForBonusRemaining).max(Kusama.zero());\n    const userKSMEligibleForBonus = contributeAmountKSM.minus(userKSMIneligibleForBonus);\n    return userKSMEligibleForBonus.toKMABonusReward();\n  };\n  const earlyBonus = getEarlyBonus();\n\n  const getReferalBonus = () => {\n    if (!contributeAmountKSM) return null;\n    return referralCode ? contributeAmountKSM.toKMAReferralReward() : Calamari.zero();\n  };\n  const referralBonus = getReferalBonus();\n\n  const getBaseReward = () => {\n    if (!contributeAmountKSM) return null;\n    return contributeAmountKSM ? contributeAmountKSM.toKMABaseReward() : Calamari.zero();\n  };\n  const baseReward = getBaseReward();\n\n  let totalReward = null;\n\n  if (baseReward && referralBonus && earlyBonus) {\n    totalReward = baseReward.add(referralBonus.add(earlyBonus));\n  }\n\n  const contribute = () => {\n    const handleTxResponse = makeTxResHandler(\n      api, onContributeSuccess, onContributeFailure, onContributeUpdate);\n    const tx = api.tx.crowdloan.contribute(\n      ...formatPayloadForSubstrate([\n        config.PARA_ID,\n        new BN(contributeAmountAtomicUnits.value.toString()),\n        null\n      ])\n    );\n    tx.signAndSend(fromAccount, handleTxResponse);\n  };\n\n  const onContributeSuccess = block => {\n    setContributionStatus(TxStatus.finalized(block));\n    referralCode && publishReferral();\n  };\n  const onContributeFailure = (block, error) => {\n    setContributionStatus(TxStatus.failed(block, error));\n  };\n  const onContributeUpdate = message => {\n    setContributionStatus(TxStatus.processing(message));\n  };\n\n  const onReferralSuccess = block => {\n    setReferralStatus(TxStatus.finalized(block));\n  };\n  const onReferralFailure = (block, error) => {\n    setReferralStatus(TxStatus.failed(block, error));\n  };\n  const onReferralUpdate = message => {\n    setReferralStatus(TxStatus.processing(message));\n  };\n\n  const publishReferral = () => {\n    const memo = api.createType('Memo', referralCode.bytes);\n    const handleTxResponse = makeTxResHandler(\n      api, onReferralSuccess, onReferralFailure, onReferralUpdate);\n    const tx = api.tx.crowdloan.addMemo(\n      config.PARA_ID, memo.toHex()\n    );\n    tx.signAndSend(fromAccount, handleTxResponse);\n  };\n\n  const onClickMax = () => {\n    const estimatedFeeAmount = new Kusama(Kusama.KSM, new Decimal(0.1));\n    accountBalanceKSM && setContributeAmountInput(accountBalanceKSM.minus(estimatedFeeAmount).max(Kusama.zero()).toString(false));\n  };\n\n  const onChangeContributeAmountInput = e => {\n    const input = e.target.value;\n    if (isNaN(input) && input !== '') {\n      return;\n    }\n    setContributeAmountInput(input);\n  };\n\n  const onChangeReferralCodeInput = e => {\n    setReferralCodeInput(e.target.value);\n    try {\n      const referralCode = ReferralCode.fromHexStr(e.target.value);\n      setReferralCode(referralCode);\n    } catch (error) {\n      setReferralCode(null);\n    }\n  };\n\n  const onClickClaimButton = () => {\n    contribute();\n  };\n\n  useEffect(() => {\n    const setReferralCodeFromURL = () => {\n      if (urlReferralCode && !referralCodeInput) {\n        try {\n          const referralCode = ReferralCode.fromHexStr(urlReferralCode);\n          setReferralCode(referralCode);\n          setReferralCodeInput(urlReferralCode);\n        } catch (error) {}\n      }\n    };\n    setReferralCodeFromURL();\n  }, [referralCodeInput, urlReferralCode]);\n\n  if (!fromAccount) {\n    return <ConnectWalletPrompt />;\n  }\n\n  return (\n    <div className=\"content-item p-8 xl:p-10 h-full contribute flex-1\">\n      <h1 className=\"title text-3xl md:text-4xl\">{t('Contribute')}</h1>\n      <p className=\"mb-2 text-sm xl:text-base\">\n        {t('Enter your contribution amount')}\n      </p>\n      <div className=\"flex items-center\">\n        <div className=\"form-input w-4/5 amount relative h-20\">\n          <Input\n            className=\"h-full w-full outline-none\"\n            value={contributeAmountInput && contributeAmountInput.toString()}\n            type='numher'\n            onChange={onChangeContributeAmountInput}\n          />\n          <span onClick={onClickMax} className=\"uppercase cursor-pointer text-xl xl:text-2xl mt-4 right-0 mr-4 max-btn font-semibold absolute px-5 py-3 rounded-md\">\n            {t('Max')}\n          </span>\n        </div>\n        <div className=\"text-2xl xl:text-2xl w-1/5 font-semibold pl-4\">KSM</div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2 text-sm xl:text-base\">\n          {t('Enter your referral code (optional)')}\n        </p>\n        <div className=\"w-full form-input relative h-20\">\n          <Input\n            value={referralCodeInput}\n            onChange={onChangeReferralCodeInput}\n            className=\"w-full h-full outline-none\"\n          />\n        </div>\n      </div>\n      <div className=\"pt-8\">\n        <p className=\"mb-2\">{t('Your Rewards')}</p>\n        <div className=\"reward\">\n          <div className=\"artibute rounded-t-lg calamari-text bg-white\">\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-4 pb-2\">\n              <span>{t('Base')}</span>\n              <span className=\"font-semibold\">{baseReward && baseReward.toString()} KMA</span>\n            </div>\n            <div className=\"flex text-base xl:text-lg items-center justify-between px-3 xl:px-6 py-2 bg-gray\">\n              <div className=\"flex items-center\">\n                <span>{t('Bonus')}</span>\n                <span className=\"text-xs block text-white rounded-sm ml-2 bg-red py-1 px-2\">\n                  {t('Limited Time')}\n                </span>\n              </div>\n              <span className=\"font-semibold\">{earlyBonus && earlyBonus.toString()} KMA</span>\n            </div>\n            <div className=\"flex text-base xl:text-lg justify-between px-3 xl:px-6 pt-2 pb-4\">\n              <span>{t('Referral')}</span>\n              <span className=\"font-semibold\">{referralBonus && referralBonus.toString()} KMA</span>\n            </div>\n          </div>\n          <div className=\"flex text-2xl xl:text-2xl p-6 result justify-between text-white\">\n            <span>{t('Rewards')}:</span>\n            <span>{totalReward && totalReward.toString()} KMA</span>\n          </div>\n        </div>\n      </div>\n      <div\n        onClick={onClickClaimButton}\n        className=\"py-6 rounded-lg text-3xl xl:text-3xl cursor-pointer text-center mt-8 mb-4 bg-oriange\">\n        {t('Claim your KMA')}\n      </div>\n      <TxStatusDisplay txStatus={contributionStatus} transactionType={'Contribution'} />\n      <TxStatusDisplay txStatus={referralStatus} transactionType={'Referral'} />\n    </div>\n  );\n}\n\nexport default Contribute;\n","import React, { useState, useEffect } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport Kusama from 'types/Kusama';\nimport { Placeholder } from 'semantic-ui-react';\nimport config from '../../../config';\n\nconst GraphPlaceholder = () => {\n  return (\n        <div className=\"py-8\">\n            <Placeholder fluid>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            </Placeholder>\n        </div>\n  );\n};\n\nexport default function Graph ({ allContributions }) {\n  const dateFormatOptions = { month: 'short', day: 'numeric' };\n  const [contributionsByDay, setContributionsByDay] = useState([]);\n\n  useEffect(() => {\n    if (!allContributions) {\n      return;\n    }\n    const getContributionsByDay = () => {\n      const CROWDLOAN_START_DATE = new Date(config.CROWDLOAN_START_TIMESTAMP);\n      const MS_PER_DAY = 1000 * 60 * 60 * 24;\n      const msIntoCrowdloan = new Date() - CROWDLOAN_START_DATE;\n      const daysIntoCrowdloan = Math.ceil(msIntoCrowdloan / MS_PER_DAY);\n      const crowdloanDays = [...Array(daysIntoCrowdloan).keys()].map((i) => new Date(CROWDLOAN_START_DATE.getTime() + (i * MS_PER_DAY)));\n      const contributionsByDay = crowdloanDays.map(day => ({ day: day, totalContributions: Kusama.zero() }));\n      let dayIdx = 0;\n      let currentDate = contributionsByDay[dayIdx].day;\n      allContributions.forEach(contribution => {\n        while (contribution.date > new Date(currentDate.getTime() + MS_PER_DAY)) {\n          dayIdx++;\n          currentDate = contributionsByDay[dayIdx].day;\n        }\n        contributionsByDay[dayIdx].totalContributions = contributionsByDay[dayIdx].totalContributions.add(contribution.amountKSM);\n      });\n      // Add day before crowdloan so that the graph starts at 0\n      const dayBeforeCrowdloan = CROWDLOAN_START_DATE.getTime() - MS_PER_DAY;\n      const contributionsZerothDay = { day: dayBeforeCrowdloan, totalContributions: Kusama.zero() };\n      setContributionsByDay([contributionsZerothDay, ...contributionsByDay]);\n    };\n    getContributionsByDay();\n  }, [allContributions]);\n\n  const options = {\n    animation: false,\n    responsive: true,\n    interaction: {\n      mode: 'index',\n      intersect: false\n    },\n    stacked: false,\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      y: {\n        type: 'linear',\n        display: true,\n        position: 'right'\n      }\n    },\n    elements: { point: { radius: 2, hoverRadius: 3 } }\n  };\n\n  const data = contributionsByDay.map((_, i) => contributionsByDay.slice(0, i + 1)\n    .reduce((acc, cur) => acc.add(cur.totalContributions), Kusama.zero()))\n    .map(kusama => kusama.value.toNumber());\n\n  const graphLabels = contributionsByDay.map(singleDayContributions => {\n    const day = new Date(singleDayContributions.day);\n    return day.toLocaleDateString('en-US', dateFormatOptions);\n  });\n\n  const graphData = {\n    labels: graphLabels,\n    datasets: [\n      {\n        label: 'KSM',\n        data: data,\n        borderColor: 'rgba(233, 109, 43, 1)',\n        backgroundColor: 'rgba(233, 109, 43, 1)',\n        yAxisID: 'y',\n        borderWidth: 1\n      }\n    ]\n  };\n\n  if (!allContributions) {\n    return <GraphPlaceholder />;\n  }\n  return (\n        <div className=\"py-4 relative graph-line pt-4\">\n            <span className=\"absolute right-0\">KSM</span>\n            <Line data={graphData} options={options} />\n        </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nconst TableColumnHeader = ({ label, className, width = 'auto', children }) => {\n  return (\n    <div\n      style={{ width }}\n      className={classNames(\n        'box-border text-base inline-block p-2 text-gray font-semibold',\n        className\n      )}>\n      {label || children}\n    </div>\n  );\n};\n\nexport default TableColumnHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst TableHeaderWrapper = ({ children, className }) => {\n  return (\n    <div className={classNames('flex w-full items-center bottom-border-dashed', className)}>\n      {children}\n    </div>\n  );\n};\n\nTableHeaderWrapper.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string\n};\n\nexport default TableHeaderWrapper;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport classNames from 'classnames';\n\nconst TableRow = ({ children, className, highlight }) => {\n  return (\n    <div\n      className={classNames('flex w-full items-center', { 'bg-table-row': highlight }, className)}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default TableRow;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport classNames from 'classnames';\n\nconst TableRowItem = ({ children, className, width = '', onTableRow }) => {\n  return (\n    <div\n      style={{ width }}\n      onClick={onTableRow}\n      className={classNames('box-border inline-block p-2', className)}>\n      {children}\n    </div>\n  );\n};\n\nexport default TableRowItem;\n","import React from 'react';\nimport Kusama from 'types/Kusama';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\n\nconst LeaderboardPlaceholder = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"item p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n        <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n        <div className=\"py-8\">\n            <Placeholder fluid>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            <Placeholder.Paragraph>\n                <Placeholder.Line />\n                <Placeholder.Line />\n                <Placeholder.Line />\n            </Placeholder.Paragraph>\n            </Placeholder>\n        </div>\n    </div>\n  );\n};\n\nexport default function Leaderboard ({ allContributions }) {\n  const { t } = useTranslation();\n\n  const getTopThreeContributors = () => {\n    if (!allContributions) {\n      return null;\n    }\n    const contributionsByAddress = {};\n    allContributions.forEach(contribution => {\n      const addressCurrentContribution = contributionsByAddress[contribution.address] || Kusama.zero();\n      contributionsByAddress[contribution.address] = addressCurrentContribution.add(contribution.amountKSM);\n    });\n    return Object.entries(contributionsByAddress)\n      .map(([address, amountKSM]) => ({ address: address, amountKSM: amountKSM }))\n      .sort((first, second) => first.amountKSM.value.gt(second.amountKSM.value))\n      .slice(0, 3);\n  };\n  const topThreeContributors = getTopThreeContributors();\n  if (!topThreeContributors) {\n    return <LeaderboardPlaceholder />;\n  }\n\n  return (\n        <div className=\"item p-8 mt-6 xl:px-10 xl:py-6 bg-white\">\n        <h1 className=\"title text-3xl md:text-4xl\">{t('Leaderboard')}</h1>\n        <div className=\"overflow-x-auto border-2 rounded-lg\">\n          <div className=\"min-w-table-md \">\n            <TableHeaderWrapper className=\"px-2\">\n              <TableColumnHeader label={t('Rank')} width=\"15%\" />\n              <TableColumnHeader label={t('Address')} width=\"30%\" />\n              <TableColumnHeader label={t('Contributed')} width=\"25%\" />\n            </TableHeaderWrapper>\n            {topThreeContributors.map((val, i) => (\n              <TableRow className=\"bg-light-gray calamari-text rounded-lg px-2 my-2\">\n                <TableRowItem width=\"15%\">\n                  <div className=\"w-8 h-8 bg-purple text-white leading-8 text-center rounded-md\">\n                    {i + 1}\n                  </div>\n                </TableRowItem>\n                <TableRowItem width=\"30%\">\n                  <div\n                    style={{ textOverflow: 'ellipsis' }}\n                    className=\"overflow-hidden\">\n                    {val.address}\n                  </div>\n                </TableRowItem>\n                <TableRowItem width=\"25%\">\n                  <span className=\"text-thirdry font-semibold\">\n                    {val.amountKSM.toString()}\n                  </span>\n                </TableRowItem>\n              </TableRow>\n            ))}\n          </div>\n        </div>\n      </div>\n  );\n}\n","/* eslint-disable multiline-ternary */\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Placeholder } from 'semantic-ui-react';\nimport Graph from './Graph';\nimport Leaderboard from './Leaderboard';\n\nfunction Crowdloan ({ totalContributionsKSM, allContributions }) {\n  const { t } = useTranslation();\n\n  // todo: include referrals\n  const getTotalRewards = () => {\n    if (!totalContributionsKSM) {\n      return;\n    }\n    let earlyBonus = totalContributionsKSM.value.mul(500);\n    if (totalContributionsKSM.value.gt(1000)) {\n      earlyBonus = 500000;\n    }\n    return totalContributionsKSM.value.mul(10000).add(earlyBonus);\n  };\n  const totalRewards = getTotalRewards();\n\n  return (\n    <div className=\"content-item h-full mt-16 lg:mt-0 calamari-text crowdloan\">\n      <div className=\"bg-white item p-8 xl:p-10 xl:pb-4\">\n        <h1 className=\"title text-3xl md:text-4xl\">{t('The Crowdloan')}</h1>\n        {!totalContributionsKSM ? (\n          <div className=\"py-2\">\n            <Placeholder fluid>\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder>\n          </div>\n        ) : (\n          <div className=\"flex\">\n            <div className=\"w-3/5\">\n              <p className=\"mb-0 pb-5 total-title\">\n                {t('Total contributions')}\n              </p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n              {totalContributionsKSM.toString()}\n              </span>\n            </div>\n            <div className=\"w-2/5\">\n              <p className=\"mb-0 pb-5 total-title\">{t('Total rewards')}</p>\n              <span className=\"purple-text total-value text-lg font-semibold\">\n              {totalRewards.toNumber().toLocaleString(undefined, { maximumFractionDigits: 0, minimumFractionDigits: 0 })} KMA\n              </span>\n            </div>\n          </div>\n        )}\n      <Graph allContributions={allContributions} />\n      </div>\n      <Leaderboard allContributions={allContributions} />\n    </div>\n  );\n}\n\nexport default Crowdloan;\n","/* eslint-disable multiline-ternary */\nimport React, { useState, useEffect } from 'react';\nimport { Pagination, Placeholder } from 'semantic-ui-react';\nimport TableColumnHeader from 'components/Table/TableColumnHeader';\nimport TableHeaderWrapper from 'components/Table/TableHeaderWrapper';\nimport TableRow from 'components/Table/TableRow';\nimport TableRowItem from 'components/Table/TableRowItem';\nimport axios from 'axios';\nimport Decimal from 'decimal.js';\nimport Kusama from '../../types/Kusama';\nimport config from '../../config';\nimport { useTranslation } from 'react-i18next';\n\nconst ContributeActivityPlaceholder = () => {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n      <div className=\"overflow-x-auto\">\n        <div className=\"mb-4 min-w-table\">\n          <Placeholder fluid>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n            <Placeholder.Paragraph>\n              <Placeholder.Line />\n              <Placeholder.Line />\n              <Placeholder.Line />\n            </Placeholder.Paragraph>\n          </Placeholder>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ContributeActivity = () => {\n  const [totalPages, setTotalPages] = useState(1);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [contributions, setContributions] = useState(null);\n\n  const { t } = useTranslation();\n  const PAGE_SIZE = 10;\n\n  const handlePageChange = (_, data) => {\n    setPageNumber(data.activePage);\n  };\n\n  useEffect(() => {\n    const getContributions = () => {\n      axios.post('parachain/contributes', { fund_id: config.FUND_ID, row: PAGE_SIZE, page: pageNumber - 1, order: 'block_num desc', from_history: true }).then(res => {\n        setContributions(res.data.data.contributes || []);\n        setTotalPages(Math.ceil(res.data.data.count / PAGE_SIZE));\n      });\n    };\n    getContributions();\n  }, [pageNumber]);\n\n  if (!contributions) {\n    return <ContributeActivityPlaceholder />;\n  }\n  return (\n    <div className=\"contributions-details p-6 md:p-10 my-4 mt-10 lg:mt-4 bg-white rounded-xl\">\n      <h1 className=\"text-2xl title md:text-4xl\">\n        {t('Global Contribution Activity')}\n      </h1>\n      <div className=\"overflow-x-auto\">\n        <div className=\"mb-4 min-w-table\">\n        </div>\n        <div className=\"mb-4 min-w-table\">\n          <TableHeaderWrapper className=\"px-2\">\n            {/* <TableColumnHeader label=\"Rank\" width=\"5%\" /> */}\n            <TableColumnHeader label=\"Kusama Account\" width=\"30%\" />\n            <TableColumnHeader label=\"Contributed\" width=\"15%\" />\n            <TableColumnHeader label=\"Contributed Reward\" width=\"15%\" />\n            {/* <TableColumnHeader label=\"Participants Referred\" width=\"20%\" />\n              <TableColumnHeader label=\"Referral Reward\" width=\"15%\" /> */}\n          </TableHeaderWrapper>\n          {\n            contributions?.map(contribution => <TableRowData contribution={contribution} key={contribution.extrinsic_index} />)\n          }\n        </div>\n      </div>\n      <div className=\"flex justify-center pt-2\">\n        <Pagination\n          boundaryRange={0}\n          defaultActivePage={1}\n          siblingRange={2}\n          totalPages={totalPages}\n          onPageChange={handlePageChange}\n          size=\"mini\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TableRowData = ({ contribution }) => {\n  const contributionKSM = new Kusama(Kusama.ATOMIC_UNITS, new Decimal(contribution.contributing)).toKSM();\n  return (\n    <TableRow className=\"bg-light-gray calamari-text rounded-lg px-2 my-3\">\n      {/* <TableRowItem width=\"5%\">\n        <div className=\"w-8 h-8 bg-purple text-white leading-8 text-center rounded-md\">\n          1\n        </div>\n      </TableRowItem> */}\n      <TableRowItem width=\"30%\">\n        <span className=\"text-blue-thirdry\">\n          {contribution.who}\n        </span>\n      </TableRowItem>\n      <TableRowItem width=\"15%\">\n        <span className=\"text-thirdry font-semibold\">{contributionKSM.toString()}</span>\n      </TableRowItem>\n      <TableRowItem width=\"15%\">\n        <span className=\"manta-prime-blue font-semibold\">{contributionKSM.value.mul(10000).toString()} KMA</span>\n      </TableRowItem>\n      {/* <TableRowItem width=\"20%\">\n        <span className=\"text-thirdry font-semibold\">2</span>\n      </TableRowItem>\n      <TableRowItem width=\"15%\">\n        <span className=\"text-thirdry font-semibold\">3.0148</span>\n      </TableRowItem> */}\n    </TableRow>\n  );\n};\n\nexport default ContributeActivity;\n","import { web3FromSource } from '@polkadot/extension-dapp';\n\nexport default async function getFromAccount (accountPair, api) {\n  const {\n    address,\n    meta: { source, isInjected }\n  } = accountPair;\n  let fromAcct;\n  // signer is from Polkadot-js browser extension\n  if (isInjected) {\n    const injected = await web3FromSource(source);\n    fromAcct = address;\n    api.setSigner(injected.signer);\n  } else {\n    fromAcct = accountPair;\n  }\n  return fromAcct;\n}\n","class Contribution {\n  constructor (amountKSM, date, address) {\n    this.amountKSM = amountKSM;\n    this.date = date;\n    this.address = address;\n  }\n\n  // static fromJson (json) {\n  //   return new Contribution(json.date, json.amountKSM, json.address);\n  // }\n\n  // toJson () {\n  //   return { amountKSM: this.amountKSM, date: this.date, rewardKSM: this.address };\n  // }\n}\n\nexport default Contribution;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport Navbar from 'components/Layouts/Navbar';\nimport {\n  Details,\n  Contribute,\n  Crowdloan,\n  ContributeActivity\n} from 'components/HomeComponents';\nimport { useSubstrate } from '../../substrate-lib';\nimport { Dimmer, Loader, Grid, Message } from 'semantic-ui-react';\nimport getFromAccount from '../../utils/GetFromAccount';\nimport Decimal from 'decimal.js';\nimport Kusama from 'types/Kusama';\nimport Contribution from 'types/Contribution';\nimport axios from 'axios';\nimport axiosRetry from 'axios-retry';\nimport config from 'config';\nimport { isHex, hexAddPrefix } from '@polkadot/util';\nimport ReferralCode from 'types/ReferralCode';\nimport { useParams } from 'react-router-dom';\n\nfunction HomePage () {\n  axios.defaults.baseURL = config.SUBSCAN_URL;\n  axios.defaults.headers.post['Content-Type'] = 'application/json';\n  axios.defaults.headers.post['Access-Control-Allow-Origin'] = true;\n  axios.defaults.headers.post['X-API-Key'] = config.API_KEY;\n  axiosRetry(axios, { retries: 5, retryDelay: _ => 1000, retryCondition: error => error.response.status === 429 });\n\n  const { referralCode } = useParams();\n\n  const [fromAccount, setFromAccount] = useState(null);\n  const [accountAddress, setAccountAddress] = useState(null);\n  const [accountBalanceKSM, setAccountBalanceKSM] = useState(null);\n  const [userContributions, setUserContributions] = useState(null);\n\n  const [totalContributionsKSM, setTotalContributionsKSM] = useState(null);\n  const [allReferrals, setAllReferrals] = useState(null);\n  const [allContributions, setAllContributions] = useState(null);\n  const { api, apiState, keyring, keyringState, apiError } = useSubstrate();\n\n  const accountPair =\n    accountAddress &&\n    keyringState === 'READY' &&\n    keyring.getPair(accountAddress);\n\n  useMemo(() => {\n    const getUserContributions = async () => {\n      if (!accountAddress || !api) {\n        return;\n      }\n      await api.isReady;\n      const res = await axios.post('extrinsics', { call: 'contribute', address: accountAddress, module: 'crowdloan', row: 100, page: 0 });\n      const extrinsics = res.data.data.extrinsics || [];\n      let contributions = await Promise.all(extrinsics\n        .filter(ex => ex.success)\n        .map(ex => {\n          return { timestamp: ex.block_timestamp * 1000, blockNumber: ex.block_num, extrinsicIndex: parseInt(ex.extrinsic_index.split('-')[1]) };\n        })\n        .map(async ex => {\n          const blockHash = await api.rpc.chain.getBlockHash(ex.blockNumber);\n          const signedBlock = await api.rpc.chain.getBlock(blockHash);\n          const paraID = signedBlock.block.extrinsics[ex.extrinsicIndex].method.args[0].toNumber();\n          if (paraID && ex.timestamp > config.CROWDLOAN_START_TIMESTAMP) {\n            const amountKSM = new Kusama(\n              Kusama.ATOMIC_UNITS,\n              new Decimal(signedBlock.block.extrinsics[ex.extrinsicIndex].method.args[1].toNumber())\n            ).toKSM();\n            return new Contribution(amountKSM, new Date(ex.timestamp), accountAddress);\n          }\n        })\n      );\n      contributions = contributions.filter(contribution => contribution !== undefined);\n      setUserContributions(contributions);\n    };\n    getUserContributions();\n  }, [accountAddress, api]);\n\n  useMemo(() => {\n    const getAllContributionsAndReferrals = async () => {\n      if (!api) {\n        return;\n      }\n      await api.isReady;\n      let totalPages;\n      let pageIdx = 0;\n      const allContributions = [];\n      const allAddresses = [];\n      const allReferrals = {};\n\n      do {\n        const res = await axios.post('parachain/contributes', { order: 'block_num asc', fund_id: config.FUND_ID, row: 100, page: pageIdx, from_history: true });\n        totalPages = Math.floor(res.data.data.count / 100);\n        res.data.data.contributes?.forEach(contribution => {\n          const amountKSM = new Kusama(Kusama.ATOMIC_UNITS, new Decimal(contribution.contributing)).toKSM();\n          const referralCode = (isHex(hexAddPrefix(contribution.memo)) && contribution.memo.length === 64) ? ReferralCode.fromHexStr(contribution.memo) : null;\n          const currentContribution = new Contribution(amountKSM, new Date(contribution.block_timestamp * 1000), contribution.who);\n          allContributions.push(currentContribution);\n          allAddresses.push(contribution.who);\n          if (referralCode) {\n            allReferrals[contribution.who] = referralCode.toAddress();\n          }\n        });\n        pageIdx++;\n      } while (pageIdx < totalPages);\n      setAllContributions(allContributions);\n      setAllReferrals(allReferrals);\n    };\n    getAllContributionsAndReferrals();\n  }, [api]);\n\n  useEffect(() => {\n    async function loadFromAccount (accountPair) {\n      if (!api || !api.isConnected || !accountPair) {\n        return;\n      }\n      await api.isReady;\n      const fromAccount = await getFromAccount(accountPair, api);\n      setFromAccount(fromAccount);\n    }\n    loadFromAccount(accountPair, api);\n  }, [api, accountPair]);\n\n  // When account address changes, update subscriptions\n  useEffect(() => {\n    let unsubscribe;\n    // If the user has selected an address, create a new subscription\n    accountAddress &&\n      api.query.system.account(accountAddress, balance => {\n        const rawBalance = new Decimal(balance.data.free.toString());\n        setAccountBalanceKSM(new Kusama(Kusama.ATOMIC_UNITS, rawBalance).toKSM());\n      })\n        .then(unsub => {\n          unsubscribe = unsub;\n        })\n        .catch(console.error);\n\n    return () => unsubscribe && unsubscribe();\n  }, [api, accountAddress]);\n\n  useEffect(() => {\n    const getTotalContributionsKSM = async () => {\n      const res = await axios.post('parachain/funds', { fund_id: config.fundID, row: 1, page: 0 });\n      setTotalContributionsKSM(new Kusama(Kusama.ATOMIC_UNITS, new Decimal(res.data.data.funds[0].raised)).toKSM());\n    };\n    getTotalContributionsKSM();\n  }, [api]);\n\n  const loader = text =>\n    <Dimmer active>\n      <Loader size='small'>{text}</Loader>\n    </Dimmer>;\n\n  const message = err =>\n    <Grid centered columns={2} padded>\n      <Grid.Column>\n        <Message negative compact floating\n          header='Error Connecting to Substrate'\n          content={`${JSON.stringify(err, null, 4)}`}\n        />\n      </Grid.Column>\n    </Grid>;\n\n  if (apiState === 'ERROR') return message(apiError);\n  else if (apiState !== 'READY') return loader('Connecting to Substrate');\n\n  if (keyringState !== 'READY') {\n    return loader('Loading accounts (please review polkadot.js authorization)');\n  }\n\n  return (\n    <div className=\"home-page px-6 sm:px-16 xl:px-40\">\n      <Navbar\n        accountPair={accountPair}\n        accountAddress={accountAddress}\n        setAccountAddress={setAccountAddress}\n        accountBalanceKSM={accountBalanceKSM}\n      />\n      <div className=\"home-content py-6\">\n        <Grid columns=\"three\">\n          <Grid.Row className=\"flex-wrap flex-col flex\">\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Contribute\n                urlReferralCode={referralCode}\n                fromAccount={fromAccount}\n                accountBalanceKSM={accountBalanceKSM}\n                totalContributionsKSM={totalContributionsKSM}\n                setUserContributions={setUserContributions}\n              />\n            </Grid.Column>\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Details\n                accountAddress={accountAddress}\n                userContributions={userContributions}\n                allContributions={allContributions}\n                allReferrals={allReferrals}\n              />\n            </Grid.Column>\n            <Grid.Column className=\"flex-wrap item flex\">\n              <Crowdloan\n                totalContributionsKSM={totalContributionsKSM}\n                allContributions={allContributions}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </div>\n      <ContributeActivity />\n    </div>\n  );\n}\n\nexport default HomePage;\n","// This component will simply add utility functions to your developer console.\nimport { useSubstrate } from '../';\n\nexport default function DeveloperConsole (props) {\n  const { api, apiState, keyring, keyringState } = useSubstrate();\n  if (apiState === 'READY') { window.api = api; }\n  if (keyringState === 'READY') { window.keyring = keyring; }\n  window.util = require('@polkadot/util');\n  window.utilCrypto = require('@polkadot/util-crypto');\n\n  return null;\n}\n","import React, { useEffect } from 'react';\nimport 'semantic-ui-css/semantic.min.css';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport HomePage from 'pages/HomePage';\nimport { SubstrateContextProvider } from './substrate-lib';\nimport { DeveloperConsole } from './substrate-lib/components';\nimport { useTranslation } from 'react-i18next';\nimport { getLanguage } from 'utils/LocalStorageValue';\n\nconst App = () => {\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    i18n.changeLanguage(getLanguage());\n    // eslint-disable-next-line\n  }, []);\n  return (\n    <SubstrateContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/:referralCode\" component={HomePage} />\n          <Route path=\"/\" component={HomePage} />\n        </Switch>\n      </Router>\n      <DeveloperConsole />\n    </SubstrateContextProvider>\n  );\n};\nexport default App;\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport translationEN from 'common/locales/en.json';\nimport translationCN from 'common/locales/cn.json';\nimport detector from 'i18next-browser-languagedetector';\n\nconst resources = {\n  en: {\n    translation: translationEN\n  },\n  cn: {\n    translation: translationCN\n  }\n};\n\ni18n\n  .use(detector)\n  .use(initReactI18next)\n  .init({\n    resources,\n    lng: 'en',\n    keySeparator: false,\n    interpolation: {\n      escapeValue: false\n    }\n  });\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\nimport './common/i18n/i18n';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}